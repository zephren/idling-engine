(this["webpackJsonpidling-engine"]=this["webpackJsonpidling-engine"]||[]).push([[0],{1012:function(e,t,n){},1013:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"CustomRepeatSetting",(function(){return Pe})),n.d(a,"DropdownSetting",(function(){return Ue})),n.d(a,"SliderSetting",(function(){return We})),n.d(a,"StringSetting",(function(){return Ke})),n.d(a,"StyleSetting",(function(){return Ve})),n.d(a,"SwitchSetting",(function(){return $e})),n.d(a,"Settings",(function(){return Qe})),n.d(a,"Dropdown",(function(){return ze}));var r=n(1),o=n(0),c=n.n(o),i=n(20),s=n.n(i),l=n(111),u=n(214),d=n(1050),p={primary:d.a[900],secondary:d.a[100]},m=Object(u.a)({palette:{primary:{main:p.primary},secondary:{main:p.secondary}},overrides:{MuiSwitch:{switchBase:{color:p.secondary},colorSecondary:{"&$checked":{color:p.primary}},track:{opacity:.2,backgroundColor:p.primary,"$checked$checked + &":{opacity:.5,backgroundColor:p.primary}}}}}),b=n(7),j=n.n(b),f=n(16),h=n(49),g=n(50),O=n(216),_=n(215),x=(n(134),n(26)),v=n(21),y=n(188),C=n.n(y),w=(n(250),n(665),n(666),n(189)),k=n.n(w),S=n(24),D=n(1049),N=n(1051),E=n(1052),I=n(1016),P=n(1053),G=n(1054),T=n(1089),A=n(1058),M=n(1092),R=n(193),z=n.n(R),F=n(192),B=n.n(F),U=n(12),L=n(9),W=n(14),K=new(function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"get",value:function(e,t){return localStorage[e]?JSON.parse(localStorage[e]):t}},{key:"set",value:function(e,t){localStorage[e]=JSON.stringify(t)}},{key:"delete",value:function(e){delete localStorage[e]}}]),e}());function q(){K.set("localSettings",L.b.state.localSettings)}var H={},J=n(79),V=n(11),$=Object(D.a)((function(e){return{componentEditing:{boxShadow:"inset 0em 0em 0em 2px rgba(255, 50, 50, 1)",minHeight:"5px",minWidth:"5px",padding:"10px!important"},componentSelected:{boxShadow:"inset 0em 0em 0em 2px green"}}}));function Q(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[].concat(Object(J.a)(a),[e&&L.b.state.localSettings.flags.highlightComponents?n.componentEditing:"",t?n.componentSelected:""]).join(" ")}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalClasses,n=void 0===t?[]:t,a=Object(o.useContext)(L.a),r=Object(V.useNode)((function(e){return{selected:e.events.selected}})),c=r.connectors,i=c.connect,s=c.drag,l=r.selected,u=Object(V.useEditor)((function(e){return{enabled:e.options.enabled}})),d=u.enabled,p=$(),m=Q(d,l,p,n),b=function(e){return i(s(e))};return{refFn:b,selected:l,enabled:d,componentClassName:m,store:a}}var X=new(function(){function e(){Object(h.a)(this,e),this.components={}}return Object(g.a)(e,[{key:"addComponent",value:function(e){this.components[e.componentName]={componentName:e.componentName,component:e}}}]),e}()),Z=new(function(){function e(){Object(h.a)(this,e),this._components={},this._componentsArray=[]}return Object(g.a)(e,[{key:"registerPlugin",value:function(){}},{key:"registerCustomComponent",value:function(e){this._components[e.componentName]=e,X.addComponent(e),this.componentsArray.push(e)}},{key:"components",get:function(){return this._components}},{key:"componentsArray",get:function(){return this._componentsArray}}]),e}());window.pluginRegistry=Z,window.useSetupComponent=Y;var ee=n(25);function te(){return ne.apply(this,arguments)}function ne(){return(ne=Object(f.a)(j.a.mark((function e(){var t,n,a,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=L.b.editorQuery,console.debug("Saving game data"),t?"{}"===(n=t.serialize())&&(n=null):n=U.a.gameConfig.layout,a={},Z.components)o=Z.components[r],a[r]=o.baseStyle;return Object.assign(U.a.gameConfig,{layout:n,baseStyles:a,customStyles:H,customComponents:U.a.customComponents,codeFiles:U.a.gameConfig.codeFiles}),e.next=8,ee.a.save(U.a.gameConfig);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.a.save(U.a.gameConfig);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=Object(D.a)((function(e){return{fileName:{fontSize:e.typography.fontSize}}}));function oe(){var e=Object(S.g)(),t=re(),n=Object(o.useState)(!1),a=Object(v.a)(n,2),c=a[0],i=a[1],s=Object(o.useState)(!1),l=Object(v.a)(s,2),u=l[0],d=l[1],p=Object(o.useState)({}),m=Object(v.a)(p,2),b=m[0],j=m[1];Object(o.useContext)(L.a);var f=U.a.gameConfig.codeFiles;function h(){te()}function g(){!function(e){f=e,U.a.gameConfig.codeFiles=e}(f.filter((function(e,t){return!b[t]}))),j({})}return Object(o.useEffect)((function(){var e=setInterval((function(){h()}),1e3);return function(){clearInterval(e),h(),Object(W.b)().then((function(){W.c.initialize(W.c.data)}))}}),[]),Object(r.jsxs)(N.a,{container:!0,style:{position:"absolute",height:"100%",width:"100%"},children:[Object(r.jsx)(N.a,{item:!0,sm:2,style:{position:"relative"},children:Object(r.jsxs)(E.a,{dense:!0,style:{overflowY:"auto",position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:[f.map((function(n,a){var o=e.location.pathname.includes(n.id);return Object(r.jsxs)(I.a,{style:{cursor:"pointer"},selected:o,onClick:function(){!function(t,n){if(u){var a=Object(x.a)({},b);a[n]=!a[n],j(a)}else L.b.state.localSettings.lastCodeFile=t,q(),e.push("/code/".concat(t))}(n.id,a)},children:[u&&Object(r.jsx)(P.a,{children:b[a]?Object(r.jsx)(B.a,{}):Object(r.jsx)(z.a,{})}),o?Object(r.jsx)(G.a,{primary:Object(r.jsx)(T.a,{value:n.name,onChange:function(e){n.name=e.target.value,i(!c)},size:"small",inputProps:{className:t.fileName}})}):Object(r.jsx)(G.a,{primary:n.name})]},n.id)})),Object(r.jsx)(A.a,{}),Object(r.jsx)(I.a,{button:!0,onClick:function(){var e="New File ".concat(f.length);Object(W.a)(e,"//".concat(e)),i(!c)},children:Object(r.jsx)(G.a,{primary:"+ New File"})}),Object(r.jsx)(A.a,{}),Object(r.jsxs)(I.a,{children:[Object(r.jsx)(G.a,{primary:"Delete Files"}),Object(r.jsx)(M.a,{onChange:function(e){u&&g(),d(e.target.checked)},checked:u})]}),Object(r.jsx)(I.a,{children:Object(r.jsx)(G.a,{primary:"Beautify",secondary:"Ctrl + Shift + B"})})]})}),Object(r.jsx)(N.a,{item:!0,sm:10,style:{background:"red",position:"relative"},children:Object(r.jsxs)(S.d,{children:[f.map((function(e){return Object(r.jsx)(S.b,{path:"/code/".concat(e.id),render:function(){return Object(r.jsx)("div",{style:{position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:Object(r.jsx)(C.a,{mode:"javascript",theme:"monokai",onChange:function(t){e.code=t},name:"Code Editor",editorProps:{$blockScrolling:!0},style:{width:"100%",height:"100%",fontSize:"1.1em"},value:e.code,tabSize:2,commands:k.a.commands,focus:!0})})}},e.id)})),Object(r.jsx)(S.b,{path:"/code",children:Object(r.jsx)(S.a,{to:"/code/".concat(f[0].id)})})]})})]})}var ce=n(1061),ie=n(112),se=n(194),le=n.n(se),ue=n(34),de=n(1088);function pe(e){var t=e.parts,n=[];return Object(r.jsx)(de.a,{"aria-label":"breadcrumb",children:t.map((function(e,t){var a=Object(v.a)(e,2),o=a[0],c=a[1];return c&&n.push(c),Object(r.jsx)(ue.c,{to:"/".concat(n.join("/")),children:o},n.join(""))}))})}function me(){return Object.keys(X.components).map((function(e){var t=X.components[e];return"[".concat(t.componentName,"](/components/").concat(t.componentName,")")}))}function be(e,t){return"[".concat(e,"](").concat(t,")")}function je(){return[{path:"/components/:componentName",breadcrumbs:function(e){var t=X.components[e.match.params.componentName].component;return[["Documentation",""],["Components","components"],[t.componentName,t.componentName]]},children:function(e){return X.components[e.match.params.componentName].component.documentation.md}},{path:"/components",breadcrumbs:function(){return[["Documentation",""],["Components","components"]]},children:function(){return"\n# Components\n".concat(me().join("\n\n"),"\n")}},{path:"/game",breadcrumbs:function(){return[["Documentation",""],["Game","game"]]},children:function(){return"\n# Game\n\nEvery game starts with a `game` object that you configure through the code editor. The following sections will explain how to use the the various properties of of the `game` object.\n\n".concat("\n## game.configure\n\n`Function`\n\nUse this function to set global properties that configure how the game will run.\n\n~~~js\ngame.configure = (settings) => {\n  ...\n}\n~~~\n\n### settings.tickInterval\n\nHow frequently the `game.tick` function should be called.\n\n~~~js\nsettings.tickInterval = 3000;\n~~~\n","\n").concat("\n## game.data\n\n`Object`\n\nThis can be any object that contains the state of the game. Getters can be used as well for getting cusomtized values without storing a full customized value.\n\nThe starter template code builds a class that is used to contain the game data. This helps organize the code to be able to reload the game data and update it as necessary.  \n","\n").concat("\n## game.actions\n\n`Object`\n\nThese are functions that handle actions you are allowing the user to perform.\n\nHere is an example of a clicking activity for the player that adds one every time to a ~money~ property\n\n~~~js\ngame.actions.mainClick = () => {\n  game.data.money += 1;\n};\n~~~\n\nAlternatively you could modify the amount gained based on the number of clicks.\n\n~~~js\ngame.actions.mainClick = () => {\n  game.data.money += Math.ceil(game.data.totalClicks / 100);\n  game.data.totalClicks += 1;\n};\n~~~\n","\n").concat("\n## dataSources\n\n`Object`\n\nThese are functions that return objects that represent the data to be rendered. The format of the returned data will depend on what is using it.\n\n### Types\n\nThe following are the different formats for the standard components\n\n#### For Tables\n\n`Array of objects`\n\nYou have some flexibility in how you name the properties as the table component allows you to select the properties and how they are used, per colunmn\n\nTHe following example assumes there is an array of `items` that represents things the player can buy.\n\n~~~js\ngame.dataSources.items = () => {\n  return items.map((item) => {\n    // Items and counts that the player has bought\n    // They are stored in an object, keyed by the item name\n    const count = game.data.item[item.name];\n\n    return {\n      name: item.name,\n      cost: {\n        data: () => {\n          return `${item.cost(count)} (${count})`;\n        }\n      },\n      action: {\n        text: 'Buy',\n        onClickAction: 'buyItem', // This is defined as part of game.actions\n      },\n    }\n  })\n};\n\n~~~\n","\n").concat("\n## visibilitySources\n\n`Object`\n\nThese are functions that return a boolean value to indicate whether a component should be visible or not.\n\n~~~js\ngame.visibilitySources.item1Feature = () => {\n  // Returns true if the player has bought item1\n  return !!game.data.items.item1;\n}\n~~~\n","\n").concat("\n## initialize\n\n`Function`\n\nThis is code executed when the game starts up. Saved player game data is passed in as a parameter so that it can be processed to resume the last game state.\n\nThis examples is creating an instance of a class `GameData` and using the loadedGameData. The instance is set to the `game.data` property.\n\n~~~js\ngame.initialize = (loadedGameData) => {\n  game.data = new GameData(loadedGameData);\n}\n~~~\n","\n").concat("\n## initializeGameData\n\n`Function`\n\nThis is code executed when a new game is started. It can also be called manually to reset the game.\n\n~~~js\ngame.initializeGameData = () => {\n  game.data = new GameData({});\n  game.update();\n}\n~~~\n","\n").concat("\n## tick\n`Function`\n\nThis is the function that is executed at the tick interval. This should be used to update any game data at the set `game.settings.tickInterval`.\n\n~~~js\ngame.tick = () => {\n  // Free money!\n  game.data.money += 1;\n}\n~~~\n","\n")}},{path:"/customComponents",breadcrumbs:function(){return[["Documentation",""],["Custom Components","customComponents"]]},children:function(){return"\n# Custom Components\n...how to implement\n"}},{path:"/",breadcrumbs:function(){return[["Documentation",""]]},children:function(){return"\n# Idling Engine\n\n## Game Config/Code\n\nThis section details the properties of the game object and their configuration.\n\n".concat(be("More >","/game"),"\n\n## Custom Components\n\nIf you are daring enough, this section explains how to implment your own custom components.\n\n").concat(be("More >","/customComponents"),"\n\n## Components\n").concat(me().join("\n\n"),"\n  ")}}]}var fe=n(1087),he=n(1060),ge={link:function(e){return Object(r.jsx)(ue.c,{to:e.href,children:e.children})},code:function(e){var t=e.language,n=e.value;return Object(r.jsx)(fe.a,{style:he.a,language:t,children:n})}},Oe=Object(D.a)((function(){return{paper:{padding:"1em"}}}));function _e(){var e=Oe();return console.log("Documentation render"),Object(r.jsx)(ce.a,{children:Object(r.jsx)(ie.a,{className:e.paper,children:Object(r.jsx)(ue.a,{basename:"/idling-engine/documentation",children:Object(r.jsx)("div",{className:"markdown-container",children:Object(r.jsx)(S.d,{children:je().map((function(e){return Object(r.jsx)(S.b,{path:e.path,render:function(t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(pe,{parts:e.breadcrumbs(t)}),Object(r.jsx)(le.a,{plugins:[],children:e.children(t),renderers:ge})]})}},e.path)}))})})})})})}var xe=n(1084),ve=n(83),ye=n(1063),Ce=n(1094),we=n(217),ke=n(39),Se=n(1064),De=n(1065),Ne=n(1066),Ee=n(1067),Ie=n(1068),Pe=function(e){var t=e.component;return e.items.map((function(e,n){return t(e,n)}))},Ge=n(1059),Te=n(1062),Ae=n(1091),Me=n(1057),Re=n(1085),ze=function(e){var t,n=e.value,a=e.items,o=e.label,c=e.onChange,i=[],s=Object(ke.a)(a);try{for(s.s();!(t=s.n()).done;){var l=t.value,u="",d=null;"string"===typeof l?(u=l,d=l):(u=l.name,d=l.value),i.push(Object(r.jsx)(Te.a,{value:d,children:u},u))}}catch(m){s.e(m)}finally{s.f()}var p=null;return o&&(p=Object(r.jsx)(Ae.a,{shrink:!0,children:o})),Object(r.jsxs)(Me.a,{fullWidth:!0,children:[p,Object(r.jsx)(Re.a,{value:n||"",onChange:c,children:i})]})},Fe=n(109),Be=n.n(Fe),Ue=function(e){var t=e.property,n=e.value,a=e.itemsFn,o=e.setProp;return Object(r.jsxs)(xe.a,{display:"flex",alignItems:"flex-end",children:[Object(r.jsx)(xe.a,{flexGrow:1,children:Object(r.jsx)(ze,{value:n||"",items:a(),onChange:function(e){o((function(n){return n[t]=e.target.value}))}})}),Object(r.jsx)(xe.a,{children:Object(r.jsx)(Ge.a,{size:"small",onClick:function(){o((function(e){return e[t]=null}))},children:Object(r.jsx)(Be.a,{})})})]})},Le=n(1093),We=function(e){var t=e.property,n=e.value,a=e.min,o=e.max,c=e.step,i=e.setProp;return Object(r.jsx)(Le.a,{value:n||7,step:c,min:a,max:o,onChange:function(e,n){i((function(e){return e[t]=n}))}})},Ke=function(e){var t=e.property,n=e.value,a=e.setProp;return Object(r.jsx)(T.a,{fullWidth:!0,value:n||"",onChange:function(e){a((function(n){n[t]=e.target.value}))}})},qe=n(199),He=n.n(qe);function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L.b.state.localSettings.flags.styleDrawerOpen=!0,L.b.state.localSettings.flags.previousHighlightComponents=L.b.state.localSettings.flags.highlightComponents,L.b.state.localSettings.flags.highlightComponents=!1,e.componentName&&(L.b.state.localSettings.styleDrawerComponentName=e.componentName,L.b.state.localSettings.styleDrawerStyleId=e.styleId||"",H[e.componentName]=H[e.componentName]||{}),q(),L.b.update()}var Ve=function(e){var t=e.property,n=e.value,a=e.componentName,o=e.setProp;return H[a]&&0!==Object.keys(H[a]).length?Object(r.jsxs)(xe.a,{display:"flex",alignItems:"flex-end",children:[Object(r.jsx)(xe.a,{flexGrow:1,children:Object(r.jsx)(ze,{value:n||"",items:Object.keys(H[a]).map((function(e){return{value:e,name:H[a][e].styleName}})),onChange:function(e){o((function(n){return n[t]=e.target.value}))}})}),Object(r.jsx)(xe.a,{children:Object(r.jsx)(Ge.a,{size:"small",onClick:function(){o((function(e){return e[t]=null}))},children:Object(r.jsx)(Be.a,{})})}),Object(r.jsx)(xe.a,{children:Object(r.jsx)(Ge.a,{size:"small",onClick:function(){Je({componentName:a,styleId:n})},children:Object(r.jsx)(He.a,{})})})]}):Object(r.jsx)(ye.a,{fullWidth:!0,variant:"contained",onClick:function(){Je({componentName:a})},children:"Define a Style"})},$e=function(e){e.property;var t=e.value,n=e.onChange;return Object(r.jsx)(M.a,{checked:t||!1,onChange:n})},Qe=function(e){var t=e.config,n=e.properties,a=e.setProp,o=[];if(!n)return console.error(t,new Error),null;var c,i=Object(ke.a)(t);try{for(i.s();!(c=i.n()).done;){var s=c.value,l=s.property,u=Object(we.a)(s,["property"]),d=n[l];o.push(Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(De.a,{component:"td",scope:"row",children:l}),Object(r.jsx)(De.a,{style:{width:"1em"}}),Object(r.jsx)(De.a,{children:Object(r.jsx)(s.type,Object(x.a)({property:l,value:d,setProp:a},u))})]},l))}}catch(p){i.e(p)}finally{i.f()}return Object(r.jsx)(Ne.a,{children:Object(r.jsx)(Ee.a,{size:"small",padding:"none",children:Object(r.jsx)(Ie.a,{children:o})})})},Ye=function(e){return Object(J.a)(Z.componentsArray.reduce((function(t,n){return n.toolboxItem&&t.push(n.toolboxItem(e)),t}),[]))};function Xe(e){L.b.state.localSettings.flags[e]=!L.b.state.localSettings.flags[e],q(),L.b.update()}var Ze=function(){var e=Object(V.useEditor)(),t=e.connectors,n=e.actions,a=Object(o.useState)(null),c=Object(v.a)(a,2),i=c[0],s=c[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(xe.a,{px:2,py:2,children:Object(r.jsxs)(N.a,{container:!0,direction:"column",spacing:1,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(ve.a,{children:"Drag to add"}),Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Highlight components",Object(r.jsx)(M.a,{checked:L.b.state.localSettings.flags.highlightComponents,onChange:function(){Xe("highlightComponents")}})]}),Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Tick while editing",Object(r.jsx)(M.a,{checked:L.b.state.localSettings.flags.tickWhileEditing,onChange:function(){Xe("tickWhileEditing")}})]})]}),Ye(t).map((function(e){return Object(r.jsx)(N.a,{container:!0,direction:"column",item:!0,children:Object(r.jsx)(ye.a,{ref:e.ref,variant:"contained",onClick:function(){n.selectNode(),s({component:e.component})},children:e.name})},e.name)}))]})}),i?Object(r.jsx)(tt,{component:i.component}):null]})},et={margin:{property:"margin",type:Ke},padding:{property:"padding",type:Ke},height:{property:"height",type:Ke}},tt=function(e){var t=e.component,n=t.baseStyle;if(!n)return null;var a=[];for(var o in n){var c=et[o];a.push(c)}return Object(r.jsx)(xe.a,{mt:2,px:2,py:2,children:Object(r.jsxs)(N.a,{container:!0,direction:"column",spacing:0,children:[Object(r.jsx)(N.a,{item:!0,children:Object(r.jsx)(xe.a,{pb:2,children:Object(r.jsxs)(N.a,{container:!0,alignItems:"center",children:[Object(r.jsx)(N.a,{item:!0,xs:!0,children:Object(r.jsx)(ve.a,{variant:"subtitle1",children:"Base Component Config"})}),Object(r.jsx)(N.a,{item:!0,children:Object(r.jsx)(Ce.a,{size:"small",color:"primary",label:t.componentName})})]})})}),Object(r.jsx)(Qe,{config:a,properties:n,setProp:function(e){var a=Object.assign({},n);e(a),t.baseStyle=a,L.b.update()}})]})})},nt=function(){var e=Object(V.useEditor)((function(e,t){var n,a=e.events.selected;return a&&(n={id:a,name:e.nodes[a].data.name,settings:e.nodes[a].related&&e.nodes[a].related.settings,isDeletable:t.node(a).isDeletable()}),{selected:n}})),t=e.actions,n=e.selected;return n?Object(r.jsx)(xe.a,{mt:2,px:2,py:2,children:Object(r.jsxs)(N.a,{container:!0,direction:"column",spacing:0,children:[Object(r.jsx)(N.a,{item:!0,children:Object(r.jsx)(xe.a,{pb:2,children:Object(r.jsxs)(N.a,{container:!0,alignItems:"center",children:[Object(r.jsx)(N.a,{item:!0,xs:!0,children:Object(r.jsx)(ve.a,{variant:"subtitle1",children:"Selected"})}),Object(r.jsx)(N.a,{item:!0,children:Object(r.jsx)(Ce.a,{size:"small",color:"primary",label:n.name})})]})})}),n.settings&&c.a.createElement(n.settings),n.isDeletable?Object(r.jsx)(ye.a,{variant:"contained",color:"default",onClick:function(){t.delete(n.id)},children:"Delete"}):null]})}):null},at=n(1070),rt=n(1071),ot={md:"\n# AppBar\n\n## Properties\n\n\n"},ct=n(1086),it=n(1069);function st(e){var t=e.path,n=e.tabs,a=e.className,o=Object(V.useNode)().connectors.connect,c=Object(S.g)(),i=function(e,t){var n=null;for(var a in t){var r=t[a];if(r.default&&(n=r),e.match(r.path))return[parseInt(a),r]}return n?[-1,n]:[-1,null]}(t,n),s=Object(v.a)(i,2),l=s[0],u=s[1];return-1===l?(u&&c.push(u.to),null):Object(r.jsx)(ct.a,{ref:o,value:l,onChange:function(e,t){var a=n[t];c.push(a.to)},className:a,children:n.map((function(e){return e.visibilitySource&&!W.c.visibilitySources[e.visibilitySource]()?null:Object(r.jsx)(it.a,{label:e.name,className:a},e.name)}))})}var lt=Object(D.a)((function(e){return{root:{flexGrow:1},spacer:{flexGrow:1},fullHeight:Object(x.a)({},e.mixins.toolbar)}}));function ut(e){var t=e.tabs,n=lt(),a=Y({additionalClasses:[n.root]}),c=a.refFn,i=a.componentClassName,s=a.store,l=Object(S.g)(),u=Object(o.useState)(!0),d=Object(v.a)(u,2),p=d[0],m=d[1];return Object(r.jsx)("div",{ref:c,className:n.root,onClick:function(){setTimeout((function(){m(!p),s.update()}))},children:Object(r.jsx)(at.a,{position:"static",className:i,children:Object(r.jsxs)(rt.a,{children:[Object(r.jsx)(st,{path:l.location.pathname,tabs:t,className:n.fullHeight}),Object(r.jsx)("div",{className:n.spacer})]})})})}ut.componentName="AppBar",ut.craft={props:{tabs:[{name:"Tab 1",path:"tab1",to:"/tab1",default:!0},{name:"Tab 2",path:"tab2",to:"/tab2"},{name:"Tab 3",path:"tab3",to:"/tab3"}]},related:{settings:function(){var e=Object(V.useNode)((function(e){return{props:e.data.props,triggerUpdate:!!e.data.props.triggerUpdate,tabs:e.data.props.tabs}})),t=e.actions.setProp,n=e.triggerUpdate,a=e.tabs,o=Object.keys(W.c.visibilitySources);return Object(r.jsxs)("div",{children:[a.map((function(e,c){return Object(r.jsx)(Qe,{config:[{type:Ke,property:"name"},{type:Ke,property:"path"},{type:Ke,property:"to"},{type:Ue,property:"visibilitySource",itemsFn:function(){return o}},{type:$e,property:"default",onChange:function(){return function(e){var r,o=Object(ke.a)(a);try{for(o.s();!(r=o.n()).done;)r.value.default=!1}catch(c){o.e(c)}finally{o.f()}return e.default=!0,t((function(e){e.triggerUpdate=!n}))}(e)}}],properties:e,setProp:function(a){a(e),t((function(e){e.triggerUpdate=!n}))}},c)})),Object(r.jsx)(ye.a,{onClick:function(){return a.push({name:"New Tab",path:"",to:""}),t((function(e){return e.triggerUpdate=!n}))},children:"Add Tab"})]})}}},ut.documentation=ot,ut.toolboxItem=function(e){return{name:"AppBar",component:ut,ref:function(t){return e.create(t,Object(r.jsx)(ut,{}))}}},Z.registerCustomComponent(ut);function dt(e,t,n){var a=Object(o.useState)(null),r=Object(v.a)(a,2),c=r[0],i=r[1];if(!t)return e;var s=null;return n&&(s=t[n]),(c&&s&&s.customId!==c.customId||!c&&s)&&i(Object(x.a)(Object(x.a)({},e),s)),c&&!s&&i(null),c||e}var pt={md:"\n# Button\n\n## Properties\n\n### onClickAction\nThis is an action made avaiable from `game.actions`. No parameters are passed to the action.\n"},mt=function e(t){var n=t.size,a=t.variant,o=t.color,c=t.text,i=t.onClickAction,s=t.actionContext,l=t.customStyleName,u=Y(),d=u.refFn,p=u.componentClassName,m=dt(e.baseStyle,H.Button,l);return Object(r.jsx)(ye.a,{style:m,ref:d,className:p,size:n,variant:a,color:o,onClick:function(){var e=W.c.actions[i];e&&(e(s),L.b.update())},children:c})};mt.componentName="Button",mt.craft={props:{size:"small",variant:"contained",color:"primary",text:"Button"},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(r.jsx)(Qe,{config:[{type:Ve,property:"customStyleName",componentName:n},{type:Ue,property:"onClickAction",itemsFn:function(){return Object.keys(W.c.actions)}},{type:Ke,property:"text"}],properties:a,setProp:t})}}},mt.baseStyle={margin:"0em"},mt.styleProperties=[{property:"padding",type:Ke}],mt.documentation=pt,mt.toolboxItem=function(e){return{name:"Button",component:mt,ref:function(t){return e.create(t,Object(r.jsx)(mt,{}))}}},Z.registerCustomComponent(mt);var bt={md:"\n# Text\n\n## Properties\n\n### text\nThe text to show\n\n"},jt=function e(t){var n=t.text,a=t.customStyleName,o=Y(),c=o.refFn,i=o.componentClassName,s=dt(e.baseStyle,H.Text,a);return Object(r.jsx)("span",{ref:c,className:i,style:s,children:n})};jt.componentName="Text",jt.craft={props:{text:"Text"},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(r.jsx)(Qe,{config:[{type:Ve,property:"customStyleName",componentName:n},{type:Ke,property:"text",componentName:n}],properties:a,setProp:t})}}},jt.baseStyle={margin:"0em"},jt.styleProperties=[{property:"fontSize",type:Ke}],jt.documentation=bt,jt.toolboxItem=function(e){return{name:"Text",component:jt,ref:function(t){return e.create(t,Object(r.jsx)(jt,{text:"Some text"}))}}},Z.registerCustomComponent(jt);var ft=n(1072),ht=n(1073),gt=(n(1074),function(e){var t=e.children,n=Object(V.useNode)().connectors.connect;return Object(r.jsx)(ft.a,{ref:n,className:"text-only",children:t})});gt.craft={rules:{}};var Ot=function(e){var t=e.children,n=Object(V.useNode)().connectors.connect;return Object(r.jsx)(ht.a,{ref:n,children:t})};Ot.craft={rules:{canMoveIn:function(e){return e.data.type===mt}}};function _t(e,t){if(!e)return{};var n={};if(W.c.visibilitySources[e]&&!W.c.visibilitySources[e]()){if(!t)return null;n.opacity="0.25"}return n}var xt={md:"\n# Container\n\n## Properties\n\n\n"},vt=function e(t){var n=t.children,a=t.visibilitySource,o=Y(),c=o.refFn,i=o.componentClassName,s=_t(a,o.enabled);return s?Object(r.jsx)(ce.a,{ref:c,style:Object(x.a)(Object(x.a)({},e.baseStyle),s),className:i,children:n}):null};vt.componentName="Container",vt.craft={props:{padding:"0px"},related:{settings:function(){var e=Object(V.useNode)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(r.jsx)(Qe,{config:[{type:Ue,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:n,setProp:t})}}},vt.baseStyle={padding:"0em"},vt.documentation=xt,vt.toolboxItem=function(e){return{name:"Container",component:vt,ref:function(t){return e.create(t,Object(r.jsx)(V.Element,{is:vt,canvas:!0,children:Object(r.jsx)(jt,{text:"Container"})}))}}},Z.registerCustomComponent(vt);var yt=[{name:"3",value:3},{name:"4",value:4},{name:"6",value:6}],Ct={md:"\n# GridContainer\n\n## Properties\n\n\n\n"},wt={md:"\n# GridItem\n\n## Properties\n\n\n\n"},kt=Object(D.a)((function(){return{root:{flexGrow:1}}})),St=function(e){var t=e.children,n=e.visibilitySource,a=Y({additionalClasses:[kt().root]}),o=a.refFn,c=a.componentClassName,i=_t(n,a.enabled);return i?Object(r.jsx)(N.a,{container:!0,ref:o,className:c,style:i,spacing:2,children:t}):null};St.componentName="GridContiainer",St.craft={props:{},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(r.jsx)(Qe,{config:[{type:Ue,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:n,setProp:t})}}};var Dt=function e(t){var n=t.children,a=t.size,o=t.visibilitySource,c=t.customStyleName,i=Y(),s=i.refFn,l=i.componentClassName,u=i.enabled,d=dt(e.baseStyle,H.GridItem,c),p=_t(o,u);return p?Object(r.jsx)(N.a,{item:!0,xs:a,ref:s,className:l,style:p,children:Object(r.jsx)(ie.a,{style:d,children:n})}):null};Dt.componentName="GridItem",Dt.craft={props:{size:6},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(r.jsx)(Qe,{config:[{type:Ve,property:"customStyleName",componentName:n},{type:Ue,property:"size",itemsFn:function(){return yt}},{type:Ue,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:a,setProp:t})}}},Dt.baseStyle={padding:"0em",height:"100%"},Dt.styleProperties=[{property:"padding",type:Ke}],St.documentation=Ct,Dt.documentation=wt,X.addComponent(St),X.addComponent(Dt),St.toolboxItem=function(e){return{name:"GridContainer",component:St,ref:function(t){return e.create(t,Object(r.jsxs)(V.Element,{is:St,canvas:!0,children:[Object(r.jsx)(V.Element,{is:Dt,canvas:!0,children:Object(r.jsx)(jt,{text:"Grid Item"})}),Object(r.jsx)(V.Element,{is:Dt,canvas:!0,children:Object(r.jsx)(jt,{text:"Grid Item"})})]}))}}},Z.registerCustomComponent(St),Dt.toolboxItem=function(e){return{name:"GridItem",component:Dt,ref:function(t){return e.create(t,Object(r.jsx)(V.Element,{is:Dt,canvas:!0,children:Object(r.jsx)(jt,{text:"Grid Item"})}))}}},Z.registerCustomComponent(Dt);var Nt=n(200),Et=n.n(Nt),It=n(201),Pt=n.n(It),Gt={md:"\n# PathContainer\n\n## Properties\n\n\n"},Tt=Object(D.a)((function(e){return{main:{padding:"0em"}}})),At=function e(t){var n=t.path,a=t.children,o=t.customStyleName,c=Object(S.g)(),i=Y({additionalClasses:[Tt().main]}),s=i.refFn,l=i.enabled,u=i.componentClassName,d=c.location.pathname.includes(n),p=dt(e.baseStyle,H.PathContainer,o);return Object(r.jsxs)(ce.a,{ref:s,className:u,style:p,children:[l&&Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{style:{float:"right",height:"0em"},children:d?Object(r.jsx)(Et.a,{}):Object(r.jsx)(Pt.a,{})}),n," : ",c.location.pathname]}),d?a:null]})};At.styleProperties=[{property:"margin",type:Ke}];At.componentName="PathContainer",At.craft={props:{path:"/tab1"},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(r.jsx)(Qe,{config:[{type:Ve,property:"customStyleName",componentName:n},{type:Ke,property:"path"}],properties:a,setProp:t})}}},At.baseStyle={margin:"0em"},At.documentation=Gt,At.toolboxItem=function(e){return{name:"PathContainer",component:At,ref:function(t){return e.create(t,Object(r.jsx)(V.Element,{is:At,canvas:!0}))}}},Z.registerCustomComponent(At);var Mt=n(1075),Rt={md:"\n# Table\n\n## Properties\n\n"},zt=function(e){var t=e.items,n=e.columnNames,a=[],o={item:{},index:"0",column:{}};try{for(var c in t){var i=t[c],s=[];for(var l in o.item=i,n){var u=n[l];o.index=l,o.column=u;var d=u.name,p=i[u.property];switch(u.type){case"string":if("string"!==typeof p)throw new Error("Trying to use a non-string value as a string");s.push(Object(r.jsx)(De.a,{children:p},d));break;case"variableString":if(!p.data)throw new Error("No data function for a variableString");s.push(Object(r.jsx)(De.a,{children:p.data()},d));break;case"button":if(!p.onClickAction)throw new Error("No onClickAcion function for a button");s.push(Object(r.jsx)(De.a,{children:Object(r.jsx)(mt,{text:p.text,variant:"contained",color:"primary",onClickAction:p.onClickAction,actionContext:i})},d))}}a.push(Object(r.jsx)(Se.a,{children:s},c))}}catch(m){return Object(r.jsx)(Ie.a,{children:Object(r.jsxs)(De.a,{children:[Object(r.jsxs)("div",{children:["Table Data Error! ",m.message]}),Object(r.jsxs)("div",{children:["Column Index: ",o.index]}),Object(r.jsxs)("div",{children:["Column Type: ",o.column.type]}),Object(r.jsxs)("div",{children:["Item Data: ",JSON.stringify(o.item)]})]})})}return Object(r.jsx)(Ie.a,{children:a})},Ft=function(e){var t,n=e.columnNames,a=void 0===n?[]:n,o=e.itemSource,c=Y(),i=c.refFn,s=c.componentClassName,l=[],u=Object(ke.a)(a);try{for(u.s();!(t=u.n()).done;){var d=t.value;l.push(Object(r.jsx)(De.a,{children:d.name},d.name))}}catch(b){u.e(b)}finally{u.f()}var p=W.c.dataSources[o],m=p?p():[];return Object(r.jsx)("div",{ref:i,className:s,children:Object(r.jsx)(Ne.a,{children:Object(r.jsxs)(Ee.a,{size:"small",children:[Object(r.jsx)(Mt.a,{children:Object(r.jsx)(Se.a,{children:l})}),Object(r.jsx)(zt,{items:m,columnNames:a})]})})})},Bt=function(e){var t=e.item,n=e.update;return Object(r.jsxs)("div",{style:{marginBottom:"1em"},children:[Object(r.jsx)(T.a,{fullWidth:!0,value:t.name,label:"Name",onChange:function(e){t.name=e.target.value,n()}}),Object(r.jsx)(T.a,{fullWidth:!0,value:t.property,label:"Property",onChange:function(e){t.property=e.target.value,n()}}),Object(r.jsx)(ze,{value:t.type||"",items:[{name:"String",value:"string"},{name:"Button",value:"button"},{name:"Variable String",value:"variableString"}],label:"Type",onChange:function(e){t.type=e.target.value,n()}})]})};Ft.componentName="Table",Ft.craft={props:{columnNames:[{name:"Colum 1",property:"col1",type:"string"},{name:"Colum 2",property:"col2",type:"string"},{name:"Colum 3",property:"col3",type:"button"}],itemSource:"",updateVariable:!1},related:{settings:function(){var e=Object(V.useNode)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(r.jsx)(Qe,{config:[{type:Ue,property:"itemSource",itemsFn:function(){return Object.keys(W.c.dataSources)}},{type:Pe,property:"columnNames",component:function(e,n){return Object(r.jsx)(Bt,{item:e,update:function(){t((function(e){return e.updateVarible=!e.updateVarible}))}},n)},items:n.columnNames}],properties:n,setProp:t})}}},Ft.documentation=Rt,Ft.toolboxItem=function(e){return{name:"Table",component:Ft,ref:function(t){return e.create(t,Object(r.jsx)(Ft,{}))}}},Z.registerCustomComponent(Ft);var Ut={md:"\n# VariableText\n\n## Properties\n\n"},Lt=function e(t){var n,a=t.dataProperty,o=t.subProperty,c=t.customStyleName,i=Y(),s=i.refFn,l=i.componentClassName,u=dt(e.baseStyle,H.VariableText,c),d=W.c.data[a];return d&&o&&(d=d[o]),"object"===typeof d&&(d=void 0),Object(r.jsx)("span",{ref:s,className:l,style:u,children:null!==(n=d)&&void 0!==n?n:"##NO VALUE##"})};Lt.componentName="VariableText",Lt.craft={props:{},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(V.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(r.jsx)(Qe,{config:[{type:Ve,property:"customStyleName",componentName:n},{type:Ke,property:"dataProperty"},{type:Ke,property:"subProperty"}],properties:a,setProp:t})}}},Lt.baseStyle={margin:"0em"},Lt.styleProperties=[{property:"fontSize",type:Ke}],Lt.documentation=Ut,Lt.toolboxItem=function(e){return{name:"VariableText",component:Lt,ref:function(t){return e.create(t,Object(r.jsx)(Lt,{}))}}},Z.registerCustomComponent(Lt);var Wt=function(){return Object(o.useEffect)((function(){console.debug("Starting autosave");var e=setInterval((function(){te()}),2e3);return function(){console.debug("Stopping autosave"),clearInterval(e)}}),[]),null},Kt=Object(D.a)((function(e){return{gameArea:{position:"absolute",background:"#eee",height:"100%",width:"100%",overflowY:"auto"}}}));function qt(){var e=Object(V.useEditor)().query,t=Kt();return Object(o.useEffect)((function(){return W.c.running=!1,function(){W.c.running=!1,te()}}),[]),L.b.editorQuery=e,Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{style:{position:"absolute",width:"80%",height:"100%"},children:Object(r.jsx)("div",{className:t.gameArea,children:Object(r.jsx)(ue.b,{children:Object(r.jsx)(V.Frame,{data:U.a.gameConfig.layout,children:Object(r.jsx)(V.Element,{is:vt,padding:5,canvas:!0,children:Object(r.jsx)(jt,{text:"Start dragging components in (and delete this one)"})})})})})}),Object(r.jsxs)("div",{style:{position:"absolute",right:"0%",width:"20%",height:"100%",overflowY:"auto"},children:[Object(r.jsx)(Ze,{}),Object(r.jsx)(nt,{})]})]})}function Ht(){return Object(r.jsxs)(V.Editor,{resolver:Z.components,children:[Object(r.jsx)(Wt,{}),Object(r.jsx)(qt,{})]})}function Jt(){var e=Object(S.g)(),t=Kt();return Object(o.useEffect)((function(){return W.c.running=!0,U.a.gameConfig||(console.error(new Error("No gameConfig routing to /edit")),e.push("/edit")),function(){W.c.running=!1}}),[e]),Object(r.jsx)("div",{className:t.gameArea,children:Object(r.jsx)(V.Editor,{resolver:Z.components,enabled:!1,children:Object(r.jsx)(ue.b,{children:Object(r.jsx)(V.Frame,{data:U.a.gameConfig.layout})})})})}var Vt=n(202),$t=n.n(Vt),Qt=function(){var e=Object(S.g)(),t=e.location.pathname,n=Object(o.useState)(!1),a=Object(v.a)(n,2),c=a[0],i=a[1],s=U.a.gameConfig;function l(t){e.push(t),i(!c)}return Object(o.useContext)(L.a),Object(r.jsx)(at.a,{position:"static",color:"transparent",children:Object(r.jsxs)(rt.a,{children:[Object(r.jsxs)("div",{style:{flexGrow:1},children:[Object(r.jsx)(ye.a,{onClick:function(){L.b.state.optionsDrawerOpen=!0,L.b.update()},children:Object(r.jsx)($t.a,{})}),Object(r.jsx)(ye.a,{onClick:function(){l("/edit")},variant:t.includes("/edit")?"contained":void 0,color:"primary",children:"Edit"}),Object(r.jsx)(ye.a,{onClick:function(){var e=L.b.state.localSettings.lastCodeFile;e&&(e="/".concat(e)),l("/code".concat(e))},variant:t.includes("/code")?"contained":void 0,color:"primary",children:"Code"}),Object(r.jsx)(ye.a,{onClick:function(){Je()},children:"Styling"}),Object(r.jsx)(ye.a,{onClick:function(){te(),l("/play")},variant:t.includes("/play")?"contained":void 0,color:"primary",children:"Play"}),Object(r.jsx)(ye.a,{onClick:function(){l("/documentation")},variant:t.includes("/documentation")?"contained":void 0,color:"primary",children:"Documentation"})]}),Object(r.jsx)("div",{children:s.name})]})})},Yt=n(1081),Xt=n(138),Zt=n.n(Xt),en=n(211),tn=n.n(en),nn=n(212),an=n.n(nn),rn=n(210),on=n.n(rn),cn=n(203),sn=n(1076),ln=n(1077),un=n(1078),dn=n(1079),pn=n(1080),mn=function(e){var t=e.onClose,n={gameConfig:U.a.gameConfig},a=Object(o.useState)(btoa(JSON.stringify(n))),c=Object(v.a)(a,2),i=c[0],s=c[1];return Object(r.jsxs)(sn.a,{open:!0,onClose:t,children:[Object(r.jsx)(ln.a,{children:"Import or export game data"}),Object(r.jsxs)(un.a,{children:[Object(r.jsx)(dn.a,{children:"Copy and paste the existing data somewhere to save it. Or paste in data you have and import it."}),Object(r.jsx)(T.a,{fullWidth:!0,label:"Current Game Data",multiline:!0,rows:4,value:i,onChange:function(e){s(e.target.value)},variant:"filled"})]}),Object(r.jsx)(pn.a,{children:Object(r.jsx)(ye.a,{onClick:function(){var e=JSON.parse(atob(i));console.debug("Imported game data",JSON.stringify(e,null,2)),ee.a.save(e.gameConfig),localStorage.lastGameId=e.gameConfig.id,window.location.reload()},color:"primary",children:"Import"})})]})},bn=function(e){var t=e.onClose;return Object(r.jsxs)(sn.a,{open:!0,onClose:t,children:[Object(r.jsx)(ln.a,{children:"Delete Game Configuration"}),Object(r.jsx)(un.a,{children:Object(r.jsx)(dn.a,{children:"Are you sure you want to delete the curret game configuration? This cannot be undone."})}),Object(r.jsxs)(pn.a,{children:[Object(r.jsx)(ye.a,{onClick:t,color:"primary",variant:"contained",children:"Cancel"}),Object(r.jsx)(ye.a,{onClick:Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.delete(U.a.gameConfig.id);case 2:return e.next=4,ee.a.getAll();case 4:(t=e.sent).length&&(localStorage.lastGameId=t[0].id),window.location.reload();case 7:case"end":return e.stop()}}),e)}))),color:"primary",children:"Confirm"})]})]})},jn=n(208),fn=n.n(jn),hn=n(206),gn=n.n(hn),On=n(205),_n=n.n(On),xn=n(207),vn=n.n(xn),yn=n(204),Cn=n.n(yn);function wn(){var e=Object(o.useState)(!1),t=Object(v.a)(e,2),n=t[0],a=t[1];return function(e){return a(null!==e&&void 0!==e?e:!n)}}function kn(e){var t=e.component,n=e.components,a=e.update,o=null;return o="Checking"===t.status?Object(r.jsx)(_n.a,{}):t.ok?Object(r.jsx)(gn.a,{style:{color:"green"}}):Object(r.jsx)(vn.a,{style:{color:"red"}}),Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(De.a,{children:Object(r.jsx)(Ge.a,{onClick:function(){var e=n.indexOf(t);n.splice(e,1),a()},children:Object(r.jsx)(fn.a,{})})}),Object(r.jsx)(De.a,{children:t.url}),Object(r.jsx)(De.a,{children:o}),Object(r.jsx)(De.a,{children:t.status})]})}var Sn=function(e){var t=e.onClose,n=wn(),a=Object(o.useState)(""),c=Object(v.a)(a,2),i=c[0],s=c[1];function l(e){return e.status="Checking",new Promise(function(){var t=Object(f.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Cn.a.get(e.url);case 3:a=t.sent,console.log(a.status),200===a.status&&(e.status="Ok",e.ok=!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response?e.status="Failed (".concat(t.t0.response.status,")"):e.status="Failed (".concat(t.t0.message,")"),e.ok=!1;case 12:n();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}function u(){return d.apply(this,arguments)}function d(){return(d=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.a.customComponents.map((function(e){return l(e)})),n(),e.next=4,Promise.all(t);case 4:n(123);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){u()})),Object(r.jsxs)(sn.a,{open:!0,onClose:t,children:[Object(r.jsx)(ln.a,{children:"Custom Components"}),Object(r.jsxs)(un.a,{children:[Object(r.jsx)(dn.a,{children:"Add custom components to your game."}),Object(r.jsx)(Ne.a,{children:Object(r.jsxs)(Ee.a,{size:"small",children:[Object(r.jsx)(Mt.a,{children:Object(r.jsxs)(Se.a,{children:[Object(r.jsx)(De.a,{}),Object(r.jsx)(De.a,{children:"URL"}),Object(r.jsx)(De.a,{}),Object(r.jsx)(De.a,{children:"Status"})]})}),Object(r.jsx)(Ie.a,{children:U.a.customComponents.map((function(e){return Object(r.jsx)(kn,{component:e,components:U.a.customComponents,update:n},e.url)}))})]})}),Object(r.jsx)("br",{}),Object(r.jsx)(T.a,{value:i,onChange:function(e){s(e.target.value)}}),Object(r.jsx)(ye.a,{onClick:Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:i,status:"New"},U.a.customComponents.push(t),e.next=4,l(t);case 4:s("");case 5:case"end":return e.stop()}}),e)}))),variant:"contained",color:"primary",children:"Add Component"}),Object(r.jsx)(ye.a,{onClick:u,variant:"contained",color:"primary",children:"Check Components"})]}),Object(r.jsxs)(pn.a,{children:[Object(r.jsx)(ye.a,{onClick:function(){t&&t()},color:"primary",children:"Done"}),Object(r.jsx)(ye.a,{onClick:function(){!function(){ae.apply(this,arguments)}(),window.location.reload()},color:"primary",variant:"contained",children:"Save And Reload"})]})]})},Dn=function(e){var t=e.onClose,n=U.a.gameConfig,a=Object(o.useState)(n.name),c=Object(v.a)(a,2),i=c[0],s=c[1];return Object(r.jsxs)(sn.a,{open:!0,onClose:t,children:[Object(r.jsx)(ln.a,{children:"Game Settings"}),Object(r.jsx)(un.a,{children:Object(r.jsx)(T.a,{fullWidth:!0,label:"Game Name",value:i,onChange:function(e){s(e.target.value)},variant:"filled"})}),Object(r.jsxs)(pn.a,{children:[Object(r.jsx)(ye.a,{onClick:t,children:"Cancel"}),Object(r.jsx)(ye.a,{onClick:Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.a.gameConfig.name=i,e.next=4,te();case 4:t();case 5:case"end":return e.stop()}}),e)}))),color:"primary",variant:"contained",children:"Save"})]})]})},Nn=n(209),En=n.n(Nn),In=n(213),Pn=n.n(In);function Gn(e){if(e)return e.map((function(e){return Object(r.jsxs)(I.a,{button:!0,onClick:function(){localStorage.lastGameId!==e.id&&(localStorage.lastGameId=e.id,window.location.reload())},children:[Object(r.jsx)(P.a,{children:Object(r.jsx)(En.a,{})}),Object(r.jsx)(G.a,{primary:e.name,secondary:e.id})]},e.id)}))}function Tn(e){var t=e.Icon,n=e.onClick,a=e.primary,o=e.secondary;return Object(r.jsxs)(I.a,{button:!0,onClick:n,children:[Object(r.jsx)(P.a,{children:Object(r.jsx)(t,{})}),Object(r.jsx)(G.a,{primary:a,secondary:o})]})}var An,Mn=function(){var e=Object(o.useState)(null),t=Object(v.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(!1),i=Object(v.a)(c,2),s=i[0],l=i[1],u=Object(o.useState)(!1),d=Object(v.a)(u,2),p=d[0],m=d[1],b=Object(o.useState)(!1),h=Object(v.a)(b,2),g=h[0],O=h[1],_=Object(o.useState)(!1),x=Object(v.a)(_,2),y=x[0],C=x[1],w=U.a.gameConfig;return n||Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting games"),e.t0=a,e.next=4,ee.a.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))(),Object(r.jsxs)("div",{children:[Object(r.jsx)(Yt.a,{open:L.b.state.optionsDrawerOpen,onClose:function(){L.b.state.optionsDrawerOpen=!1,L.b.update()},children:Object(r.jsxs)(E.a,{children:[Object(r.jsx)(I.a,{onClick:function(){},children:Object(r.jsxs)("div",{children:[Object(r.jsx)(ve.a,{variant:"h4",children:w.name}),Object(r.jsx)("div",{children:w.id})]})}),Object(r.jsx)(A.a,{}),Object(r.jsx)(Tn,{Icon:on.a,onClick:function(){return C(!0)},primary:"Game Settings"}),Object(r.jsx)(Tn,{Icon:Zt.a,onClick:function(){return W.c.initializeGameData()},primary:"Initialize Game Data"}),Object(r.jsx)(Tn,{Icon:Zt.a,onClick:function(){return m(!0)},primary:"Delete Game Configuration",secondary:"Delete the currently loaded game"}),Object(r.jsx)(Tn,{Icon:tn.a,onClick:function(){return l(!0)},primary:"Import / Export",secondary:"Import or export your game data"}),Object(r.jsx)(Tn,{Icon:an.a,onClick:function(){return O(!0)},primary:"Custom Components",secondary:"Custom components for your game"}),Object(r.jsx)(A.a,{}),Gn(n),Object(r.jsx)(Tn,{Icon:Pn.a,onClick:function(){delete localStorage.lastGameId,window.location.reload()},primary:"Create New Game",secondary:"Start building a new game"}),Object(r.jsx)(A.a,{}),Object(r.jsx)(I.a,{onClick:function(){},children:Object(r.jsx)(G.a,{primary:"Idling Engine",secondary:"Version ".concat(cn.version)})})]})}),s&&Object(r.jsx)(mn,{onClose:function(){return l(!1)}}),p&&Object(r.jsx)(bn,{onClose:function(){return m(!1)}}),y&&Object(r.jsx)(Dn,{onClose:Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,ee.a.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1),C(!1);case 6:case"end":return e.stop()}}),e)})))}),g&&Object(r.jsx)(Sn,{onClose:function(){return O(!1)}})]})},Rn=n(66),zn=n(1018),Fn=(An={},Object(Rn.a)(An,mt.name,mt),Object(Rn.a)(An,At.name,At),Object(Rn.a)(An,Dt.name,Dt),Object(Rn.a)(An,jt.name,jt),Object(Rn.a)(An,Lt.name,Lt),An),Bn=function(){var e=wn(),t=L.b.state.localSettings,n=t.styleDrawerComponentName,a=t.styleDrawerStyleId,o=function(t,n){L.b.state.localSettings.styleDrawerComponentName=t,L.b.state.localSettings.styleDrawerStyleId=n,e()},c=null;return n&&(c=H[n]),c&&c[a]||(a=""),Object(r.jsx)("div",{children:Object(r.jsx)(Yt.a,{open:L.b.state.localSettings.flags.styleDrawerOpen,onClose:function(){L.b.state.localSettings.flags.styleDrawerOpen=!1,L.b.state.localSettings.flags.highlightComponents=L.b.state.localSettings.flags.previousHighlightComponents,q(),L.b.update()},anchor:"right",BackdropProps:{invisible:!0},children:Object(r.jsxs)("div",{style:{padding:"1em"},children:[Object(r.jsx)(ve.a,{variant:"h4",children:"Style Components"}),Object(r.jsx)(ze,{value:n,items:Object.keys(Fn),label:"Component",onChange:function(t){H[t.target.value]=H[t.target.value]||{},o(t.target.value,""),e()}}),c&&Object(r.jsxs)(xe.a,{display:"flex",alignItems:"flex-end",children:[Object(r.jsx)(xe.a,{flexGrow:1,children:Object(r.jsx)(ze,{value:a,items:Object.keys(c).map((function(e){return{value:e,name:c[e].styleName}})),label:"Styles",onChange:function(e){o(n,e.target.value)}})}),Object(r.jsx)(xe.a,{children:Object(r.jsx)(ye.a,{onClick:function(e){var t=Object(zn.a)();c[t]={styleName:"New Style ".concat(Object.keys(c).length+1)},o(n,t)},variant:"contained",children:"Add Style"})})]}),c&&a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Qe,{config:[{property:"styleName",type:Ke}].concat(Object(J.a)(Fn[n].styleProperties)),properties:c[a],setProp:function(e){var t=Object.assign({},c[a],{customId:Math.random()});e(t),c[a]=t,L.b.update()}}),Object(r.jsx)(ye.a,{onClick:function(e){var t=Object.keys(c),r=t.indexOf(a),i="";delete c[a],r>0?i=t[r-1]:t.length&&(i=t[1]),o(n,i)},variant:"contained",children:"Delete Style"})]})]})})})};function Un(){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(f.a)(j.a.mark((function e(){var t,n,a,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n={},console.groupCollapsed("Loading Custom Components"),console.log(U.a),console.groupEnd(),a=Object(ke.a)(U.a.customComponents),e.prev=6,o=function(){var e=r.value;if(!e.url)return"continue";var a=new Promise((function(t){console.log("Loading custom component ".concat(e.url));var a=document.createElement("script");a.type="text/javascript",a.src=e.url,a.onload=function(){t()},a.onerror=function(a){console.log(a),n[e.url]=a,t()},document.head.append(a)}));t.push(a)},a.s();case 9:if((r=a.n()).done){e.next=15;break}if("continue"!==o()){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.next=25,Promise.all(t);case 25:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})))).apply(this,arguments)}var Wn="\n\n// You may wish to move each of the following to its own file\n\ngame.configure = (settings) => {\n  // Update any game settings here\n  // settings.tickInterval = 5000\n}\n\ngame.initialize = (loadedGameData) => {\n  // Code executed when the application starts up\n  game.data = new GameData(loadedGameData);\n}\n\ngame.initializeGameData = () => {\n  // Code executed when the resetting the game data\n  game.data = new GameData({});\n  game.update();\n}\n\ngame.tick = () => {\n  // The main function to handle game logic\n};\n\n// Define actions using game.actions ...\n\ngame.actions.buttonClick = () => {\n  game.data.counter++;\n  game.update();\n}\n",Kn="\n\nclass GameData {\n  constructor(data) {\n    this._updateData(data);\n\n    // Set the data\n    for (const property in data) {\n      this[property] = data[property];\n    }\n  }\n\n  _updateData() {\n    // Use this to update game data as changes are made\n    if (!this.counter) {\n      this.counter = 0;\n    }\n  }\n\n  // Can use getters as well for use with variableText\n}\n";function qn(){localStorage.lastGameId=Object(zn.a)(),U.a.gameConfig={id:localStorage.lastGameId,name:"New Game",codeFiles:[]},Object(W.a)("main","//main\n"+Wn),Object(W.a)("gameData","//gameData\n"+Kn)}function Hn(e){for(var t in e){var n=Z.components[t],a=e[t];n&&a&&(n.baseStyle=Object(x.a)(Object(x.a)({},n.baseStyle),a))}}function Jn(){return(Jn=Object(f.a)(j.a.mark((function e(t){var n,a,r,o,c,i,s,l,u,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.load(localStorage.lastGameId);case 2:for(n=e.sent,a=JSON.parse(n.layout),r={},o=0,c=Object.keys(a);o<c.length;o++)if(i=c[o],a[i].type.resolvedName!==t)r[i]=a[i];else{s=Object(ke.a)(Object.values(a));try{for(s.s();!(l=s.n()).done;)u=l.value,(d=u.nodes.indexOf(i))>=0&&u.nodes.splice(d,1)}catch(p){s.e(p)}finally{s.f()}}return n.layout=JSON.stringify(r),e.next=9,ee.a.save(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vn(e){for(var t=JSON.parse(e),n=[],a=function(){var e=o[r];if("ROOT"===e)return"continue";var a=t[e].type.resolvedName;if(!Z.components[a]){var c={message:"Unknown component ".concat(a),resolve:function(){!function(e){Jn.apply(this,arguments)}(a)}};n.push(c)}},r=0,o=Object.keys(t);r<o.length;r++)a();return n}function $n(e){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.load(t);case 2:if(!(n=e.sent)){e.next=6;break}return U.a.customComponents=n.customComponents||[],e.abrupt("return");case 6:U.a.customComponents=[];case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(f.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.load(t);case 2:if(!(n=e.sent)){e.next=14;break}if(n.baseStyles&&Hn(n.baseStyles),n.customStyles&&Object.assign(H,n.customStyles),U.a.gameConfig=n,!(a=Vn(U.a.gameConfig.layout)).length){e.next=10;break}return e.abrupt("return",{errors:a});case 10:return console.debug("Game data loaded"),e.abrupt("return",{});case 14:return console.warn("Starting new game data"),qn(),e.next=18,te();case 18:return e.abrupt("return",{});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(){return ea.apply(this,arguments)}function ea(){return(ea=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.init();case 2:return e.next=4,$n(localStorage.lastGameId);case 4:return e.next=6,Un();case 6:return console.groupCollapsed("Custom Components"),console.log(Object.keys(Z.components).join("\n")),console.log(Z.components),console.groupEnd(),e.next=12,Yn(localStorage.lastGameId);case 12:if(t=e.sent,!(n=t.errors)){e.next=16;break}return e.abrupt("return",{errors:n});case 16:return W.c.setUpdateUIFunction(L.b.update),e.next=19,Object(W.b)();case 19:return e.abrupt("return",{});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){var e=K.get("localSettings",void 0);e&&(console.groupCollapsed("Stored Local Settings"),console.log(JSON.stringify(e,null,2)),L.b.state.localSettings=Object.assign(L.b.state.localSettings,e),console.groupEnd())}();var ta=function(e){Object(O.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ready:!1,errors:[],showCustomComponentsDialog:!1},e.update=function(){e.setState({})},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.b.update=this.update,L.b.enqueueSnackbar=this.props.enqueueSnackbar,e.next=4,Zn();case 4:t=e.sent,(n=t.errors)?this.setState({errors:n}):this.setState({ready:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.errors;return t.length?Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:["There was an error loading your configured custom components",t.map((function(e){var t=e.message,n=e.resolve;return Object(r.jsxs)("div",{children:['"',t,'"',Object(r.jsx)(ye.a,{variant:"contained",onClick:function(){n()},children:"Remove References"})]},e.message)}))]}),Object(r.jsxs)("div",{children:["Option one is to fix URL of the missing component",this.state.showCustomComponentsDialog&&Object(r.jsx)(Sn,{onClose:function(){e.setState({showCustomComponentsDialog:!1})}}),Object(r.jsx)(ye.a,{variant:"contained",onClick:function(){e.setState({showCustomComponentsDialog:!0})},children:"Manage Custom Components"})]}),Object(r.jsx)("div",{children:"Option two is to remove all instances of the component that is causing the issue"})]}):this.state.ready?Object(r.jsx)(L.a.Provider,{value:{state:L.b.state,editorQuery:L.b.editorQuery,enqueueSnackbar:L.b.enqueueSnackbar,update:this.update},children:Object(r.jsx)(ue.a,{basename:"/idling-engine",children:Object(r.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[Object(r.jsx)(Mn,{}),Object(r.jsx)(Bn,{}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"absolute",width:"100%",height:"100%"},children:[Object(r.jsx)(Qt,{}),Object(r.jsx)("div",{style:{position:"relative",flexGrow:1},children:Object(r.jsxs)(S.d,{children:[Object(r.jsx)(S.b,{path:"/edit",render:function(){return Object(r.jsx)(Ht,{})}}),Object(r.jsx)(S.b,{path:"/code",render:function(){return Object(r.jsx)(oe,{})}}),Object(r.jsx)(S.b,{path:"/play",render:function(){return Object(r.jsx)(Jt,{})}}),Object(r.jsx)(S.b,{path:"/documentation",render:function(){return Object(r.jsx)(_e,{})}}),Object(r.jsx)(S.b,{path:"/",children:Object(r.jsx)(S.a,{to:"/edit"})})]})})]})]})})}):null}}]),n}(o.Component),na=Object(l.b)(ta),aa=(n(1012),n(1082)),ra=n(1083);window.idlingEngineCore=a,window.craftjs=V;var oa=c.a.createRef(),ca=function(e){return function(){oa.current.closeSnackbar(e)}};s.a.render(Object(r.jsxs)(aa.a,{theme:m,children:[Object(r.jsx)(ra.a,{}),Object(r.jsx)(l.a,{maxSnack:5,ref:oa,autoHideDuration:null,action:function(e){return Object(r.jsx)(ye.a,{onClick:ca(e),color:"secondary",children:"Dismiss"})},children:Object(r.jsx)(na,{})})]}),document.getElementById("root"))},12:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={gameConfig:null,customComponents:[]};window.data=a},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(26),r=n(187),o=new(n.n(r).a);!function(){var e=console;e._customized||(e.co=Object(a.a)({},console),e._customized=!0);var t=e.co,n={DEBUG:1,INFO:2,WARN:3,ERROR:4};e.logLevels=n,e.logLevel=n.DEBUG,e.debug=function(){if(e.logLevel<=n.DEBUG){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.debug.apply(t,["DEBUG"].concat(r))}},e.info=function(){if(e.logLevel<=n.INFO){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.info.apply(t,["INFO"].concat(r))}},e.warn=function(){if(e.logLevel<=n.WARN){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.warn.apply(t,["WARN"].concat(r))}},e.error=function(){if(e.logLevel<=n.ERROR){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];t.error.apply(t,["ERROR"].concat(r)),o.emit("error",r)}}}();console},14:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return game})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addCodeFile})),__webpack_require__.d(__webpack_exports__,"b",(function(){return executeCode}));var _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_lib_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1018),_lib_log__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(134),_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25),game={running:!1,settings:{tickInterval:1e3},data:{},actions:{},dataSources:{},visibilitySources:{},configure:function(e){console.log("game.configure not defined")},isInitialized:!1,isGameDataInitialized:!1,_initialize:function(e){console.log("game.initialize not defined")},get initialize(){return this._initialize},set initialize(e){var t=this;this._initialize=function(n){console.log("Initializing Game"),t.isInitialized=!0,e(n)}},_initializeGameData:function(){console.log("game.initializeGameData not defined")},get initializeGameData(){return this._initializeGameData},set initializeGameData(e){var t=this;this._initializeGameData=function(){console.log("Initializing Game Data"),t.isInitialized=!0,e()}},_tick:function(){console.log("game.tick not defined")},get tick(){return this._tick},set tick(e){this._tick=function(){(game.running||_lib_context__WEBPACK_IMPORTED_MODULE_3__.b.state.localSettings.flags.tickWhileEditing)&&e()}},update:function(){console.log("game.update not defined")},setUpdateUIFunction:function(e){game.update=e}},runningInterval=null,ticking=!1;function startTicking(){runningInterval&&clearInterval(runningInterval),runningInterval=setInterval(Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){return _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ticking){e.next=5;break}return ticking=!0,e.next=5,game.tick();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:ticking=!1;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),game.settings.tickInterval)}function addCodeFile(e,t){_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles.push({id:Object(uuid__WEBPACK_IMPORTED_MODULE_5__.a)(),name:e,code:t})}var fileLineCounts=[];function executeCode(){return _executeCode.apply(this,arguments)}function _executeCode(){return _executeCode=Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(){var files,finalCode,_iterator,_step,file,lines,numberWidth,loadedGameData;return _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:files=_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles,fileLineCounts=[],finalCode="",_iterator=Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(files);try{for(_iterator.s();!(_step=_iterator.n()).done;)file=_step.value,finalCode+=file.code+"\n",fileLineCounts.push(file.code.split("\n").length)}catch(err){_iterator.e(err)}finally{_iterator.f()}return lines=finalCode.split("\n"),numberWidth=Math.floor(Math.log(lines.length)),console.groupCollapsed("GAME CODE"),console.log(lines.map((function(e,t){return"".concat((t+1).toString().padEnd(numberWidth)," ").concat(e)})).join("\n")),console.groupEnd(),_context2.prev=10,eval(finalCode),_context2.next=14,_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__.a.loadGameData(_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.id);case 14:loadedGameData=_context2.sent,console.groupCollapsed("Loaded Game Data"),console.log(loadedGameData),console.groupEnd(),game.isInitialized||game.initialize(loadedGameData),game.configure(game.settings),startTicking(),_context2.next=27;break;case 23:_context2.prev=23,_context2.t0=_context2.catch(10),_context2.t0.message="GAME SCRIPT ERROR: "+_context2.t0.message,console.error(_context2.t0);case 27:case"end":return _context2.stop()}}),_callee2,null,[[10,23]])}))),_executeCode.apply(this,arguments)}function handleError(e){var t,n;if((null===(t=e[0])||void 0===t?void 0:t.message)&&(null===(n=e[0])||void 0===n?void 0:n.stack)){for(var a=e[0],r=a.message,o=null,c=a.stack.split("\n"),i=0;i<2;i++){var s=c[i];if(s.includes("eval")){var l=s.match(/(\d+):(\d+)/g);if(l.length){var u=l[l.length-1].split(":");o=[parseInt(u[0]),parseInt(u[1])];break}}}if(o){var d=0;for(var p in fileLineCounts){var m=fileLineCounts[p];if(o[0]<d+m){var b=o[0]-d,j=o[1],f=_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles[p].name;r+=" (Line: ".concat(b,", Col: ").concat(j,') in "').concat(f,'"');break}d+=m}}_lib_context__WEBPACK_IMPORTED_MODULE_3__.b.enqueueSnackbar(r,{variant:"error",preventDuplicate:!0})}}setInterval((function(){_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__.a.saveGameData(_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.id,game.data)}),5e3),_lib_log__WEBPACK_IMPORTED_MODULE_6__.a.on("error",handleError),window.game=game},203:function(e){e.exports=JSON.parse('{"name":"idling-engine","version":"1.0.10","dependencies":{"@craftjs/core":"0.1.0-beta.13","@material-ui/core":"^4.11.2","@material-ui/icons":"^4.11.2","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/jest":"^26.0.19","@types/node":"^12.19.11","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","ace-builds":"^1.4.12","axios":"^0.21.1","concurrently":"^5.3.0","events":"^3.2.0","idb":"^6.0.0","material-ui-color-picker":"^3.5.1","notistack":"^1.0.3","react":"^17.0.1","react-ace":"^9.2.1","react-contenteditable":"^3.3.5","react-dom":"^17.0.1","react-markdown":"^5.0.3","react-router-dom":"^5.2.0","react-scripts":"4.0.1","react-syntax-highlighter":"^15.4.3","typescript":"^4.1.3","uuid":"^8.3.2","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-router-dom":"^5.1.6","@types/react-syntax-highlighter":"^13.5.0","@types/uuid":"^8.3.0","gh-pages":"^3.1.0"},"homepage":"https://zephren.github.io/idling-engine"}')},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),r=n.n(a),o=n(16),c=n(49),i=n(50),s=n(218),l=new(function(){function e(){var t=this;Object(c.a)(this,e),this.db=void 0,this.setReady=void 0,this.ready=new Promise((function(e){t.setReady=e}))}return Object(i.a)(e,[{key:"init",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)("GameConfig",10,{upgrade:this._upgrade,blocked:this._blocked,blocking:this._blocking,terminated:this._terminated});case 2:(t=e.sent).onerror=function(e){console.error("Database error: "+e.target.errorCode)},this.db=t,this.setReady(),console.debug("DATABASE",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_upgrade",value:function(e,t,n,a){console.debug("UPGRADE DATABASE",10),e.objectStoreNames.contains("games")||e.createObjectStore("games",{keyPath:"id"}),e.objectStoreNames.contains("gameData")||e.createObjectStore("gameData",{keyPath:"id"})}},{key:"_blocked",value:function(){}},{key:"_blocking",value:function(){}},{key:"_terminated",value:function(){}},{key:"getAll",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready;case 2:return t=this.db.transaction(["games"],"readwrite"),n=t.objectStore("games"),e.next=6,n.getAll();case 6:return a=e.sent,e.next=9,t.done;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready;case 2:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=6,a.put(t);case 6:return e.next=8,n.done;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=8,a.get(t);case 8:return o=e.sent,e.next=11,n.done;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=8,a.delete(t);case 8:return e.next=10,n.done;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveGameData",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n.id=t,a=this.db.transaction(["gameData"],"readwrite"),o=a.objectStore("gameData"),e.next=9,o.put(n);case 9:return e.next=11,a.done;case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadGameData",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["gameData"],"readwrite"),a=n.objectStore("gameData"),e.next=8,a.get(t);case 8:return o=e.sent,e.next=11,n.done;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());window.resetGameStore=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to reset the game store?")){e.next=3;break}return e.abrupt("return");case 3:return t=l.db.transaction(["games"],"readwrite"),n=t.objectStore("games"),e.next=7,n.clear();case 7:return e.next=9,t.done;case 9:window.location.reload();case 10:case"end":return e.stop()}}),e)}))),window.setGameLayout=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.load(t);case 2:return(a=e.sent).layout=n,e.next=6,l.save(a);case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},9:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=n(0),r={state:{localSettings:{flags:{highlightComponents:!0,previousHighlightComponents:!0,styleDrawerOpen:!1,tickWhileEditing:!1},lastCodeFile:"",styleDrawerComponentName:"",styleDrawerStyleId:""},optionsDrawerOpen:!1},editorQuery:null,enqueueSnackbar:function(){},update:function(){throw new Error("Update function not defined")}},o=n.n(a).a.createContext(r);window.store=r}},[[1013,1,2]]]);
//# sourceMappingURL=main.1047152d.chunk.js.map
(this["webpackJsonpidling-engine"]=this["webpackJsonpidling-engine"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={gameConfig:null,customComponents:[]};window.data=a},1012:function(e,t,n){},1013:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"CustomRepeatSetting",(function(){return Ie})),n.d(a,"DropdownSetting",(function(){return Fe})),n.d(a,"SliderSetting",(function(){return Le})),n.d(a,"StringSetting",(function(){return We})),n.d(a,"StyleSetting",(function(){return He})),n.d(a,"SwitchSetting",(function(){return Ve})),n.d(a,"Settings",(function(){return $e})),n.d(a,"Dropdown",(function(){return Re}));var r=n(7),o=n.n(r),c=n(1),i=n(13),s=n(0),l=n.n(s),u=n(19),d=n.n(u),p=n(113),m=n(214),b=n(1050),j={primary:b.a[900],secondary:b.a[100]},f=Object(m.a)({palette:{primary:{main:j.primary},secondary:{main:j.secondary}},overrides:{MuiSwitch:{switchBase:{color:j.secondary},colorSecondary:{"&$checked":{color:j.primary}},track:{opacity:.2,backgroundColor:j.primary,"$checked$checked + &":{opacity:.5,backgroundColor:j.primary}}}}}),h=n(49),g=n(50),O=n(216),_=n(215),x=(n(136),n(26)),v=n(21),y=n(189),C=n.n(y),w=(n(250),n(665),n(666),n(190)),k=n.n(w),S=n(25),D=n(1049),E=n(1051),N=n(1052),I=n(1016),P=n(1053),G=n(1054),T=n(1089),A=n(1058),M=n(1092),R=n(194),z=n.n(R),B=n(193),F=n.n(B),U=n(10),L=n(8),W=n(14),K=new(function(){function e(){Object(h.a)(this,e)}return Object(g.a)(e,[{key:"get",value:function(e,t){return localStorage[e]?JSON.parse(localStorage[e]):t}},{key:"set",value:function(e,t){localStorage[e]=JSON.stringify(t)}},{key:"delete",value:function(e){delete localStorage[e]}}]),e}());function q(){K.set("localSettings",L.b.state.localSettings)}var J=n(79),H=n(12),V=Object(D.a)((function(e){return{componentEditing:{boxShadow:"inset 0em 0em 0em 2px rgba(255, 50, 50, 1)",minHeight:"5px",minWidth:"5px",padding:"10px!important"},componentSelected:{boxShadow:"inset 0em 0em 0em 2px green"}}}));function $(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[].concat(Object(J.a)(a),[e&&L.b.state.localSettings.flags.highlightComponents?n.componentEditing:"",t?n.componentSelected:""]).join(" ")}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalClasses,n=void 0===t?[]:t,a=Object(s.useContext)(L.a),r=Object(H.useNode)((function(e){return{selected:e.events.selected}})),o=r.connectors,c=o.connect,i=o.drag,l=r.selected,u=Object(H.useEditor)((function(e){return{enabled:e.options.enabled}})),d=u.enabled,p=V(),m=$(d,l,p,n),b=function(e){return c(i(e))};return{refFn:b,selected:l,enabled:d,componentClassName:m,store:a}}var Y=new(function(){function e(){Object(h.a)(this,e),this.components={}}return Object(g.a)(e,[{key:"addComponent",value:function(e){this.components[e.componentName]={componentName:e.componentName,component:e}}}]),e}()),X=new(function(){function e(){Object(h.a)(this,e),this._components={},this._componentsArray=[]}return Object(g.a)(e,[{key:"registerPlugin",value:function(){}},{key:"registerCustomComponent",value:function(e){this._components[e.componentName]=e,Y.addComponent(e),this.componentsArray.push(e)}},{key:"components",get:function(){return this._components}},{key:"componentsArray",get:function(){return this._componentsArray}}]),e}());window.pluginRegistry=X,window.useSetupComponent=Q;var Z=n(24);function ee(){return te.apply(this,arguments)}function te(){return(te=Object(i.a)(o.a.mark((function e(){var t,n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=L.b.editorQuery,console.debug("Saving game data"),t?"{}"===(n=t.serialize())&&(n=null):n=U.a.gameConfig.layout,a={},X.components)c=X.components[r],a[r]=c.baseStyle;return Object.assign(U.a.gameConfig,{layout:n,baseStyles:a,customComponents:U.a.customComponents}),e.next=8,Z.a.save(U.a.gameConfig);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z.a.save(U.a.gameConfig);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=Object(D.a)((function(e){return{fileName:{fontSize:e.typography.fontSize}}}));function re(){var e=Object(S.g)(),t=ae(),n=Object(s.useState)(!1),a=Object(v.a)(n,2),r=a[0],o=a[1],i=Object(s.useState)(!1),l=Object(v.a)(i,2),u=l[0],d=l[1],p=Object(s.useState)({}),m=Object(v.a)(p,2),b=m[0],j=m[1];Object(s.useContext)(L.a);var f=U.a.gameConfig.codeFiles;function h(){ee()}function g(){!function(e){f=e,U.a.gameConfig.codeFiles=e}(f.filter((function(e,t){return!b[t]}))),j({})}return Object(s.useEffect)((function(){var e=setInterval((function(){h()}),1e3);return function(){clearInterval(e),h(),Object(W.b)().then((function(){W.c.initialize(W.c.data)}))}}),[]),Object(c.jsxs)(E.a,{container:!0,style:{position:"absolute",height:"100%",width:"100%"},children:[Object(c.jsx)(E.a,{item:!0,sm:2,style:{position:"relative"},children:Object(c.jsxs)(N.a,{dense:!0,style:{overflowY:"auto",position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:[f.map((function(n,a){var i=e.location.pathname.includes(n.id);return Object(c.jsxs)(I.a,{style:{cursor:"pointer"},selected:i,onClick:function(){!function(t,n){if(u){var a=Object(x.a)({},b);a[n]=!a[n],j(a)}else L.b.state.localSettings.lastCodeFile=t,q(),e.push("/code/".concat(t))}(n.id,a)},children:[u&&Object(c.jsx)(P.a,{children:b[a]?Object(c.jsx)(F.a,{}):Object(c.jsx)(z.a,{})}),i?Object(c.jsx)(G.a,{primary:Object(c.jsx)(T.a,{value:n.name,onChange:function(e){n.name=e.target.value,o(!r)},size:"small",inputProps:{className:t.fileName}})}):Object(c.jsx)(G.a,{primary:n.name})]},n.id)})),Object(c.jsx)(A.a,{}),Object(c.jsx)(I.a,{button:!0,onClick:function(){var e="New File ".concat(f.length);Object(W.a)(e,"//".concat(e)),o(!r)},children:Object(c.jsx)(G.a,{primary:"+ New File"})}),Object(c.jsx)(A.a,{}),Object(c.jsxs)(I.a,{children:[Object(c.jsx)(G.a,{primary:"Delete Files"}),Object(c.jsx)(M.a,{onChange:function(e){u&&g(),d(e.target.checked)},checked:u})]}),Object(c.jsx)(I.a,{children:Object(c.jsx)(G.a,{primary:"Beautify",secondary:"Ctrl + Shift + B"})})]})}),Object(c.jsx)(E.a,{item:!0,sm:10,style:{background:"red",position:"relative"},children:Object(c.jsxs)(S.d,{children:[f.map((function(e){return Object(c.jsx)(S.b,{path:"/code/".concat(e.id),render:function(){return Object(c.jsx)("div",{style:{position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:Object(c.jsx)(C.a,{mode:"javascript",theme:"monokai",onChange:function(t){e.code=t},name:"Code Editor",editorProps:{$blockScrolling:!0},style:{width:"100%",height:"100%",fontSize:"1.1em"},value:e.code,tabSize:2,commands:k.a.commands,focus:!0})})}},e.id)})),Object(c.jsx)(S.b,{path:"/code",children:Object(c.jsx)(S.a,{to:"/code/".concat(f[0].id)})})]})})]})}var oe=n(1061),ce=n(114),ie=n(195),se=n.n(ie),le=n(34),ue=n(1088);function de(e){var t=e.parts,n=[];return Object(c.jsx)(ue.a,{"aria-label":"breadcrumb",children:t.map((function(e,t){var a=Object(v.a)(e,2),r=a[0],o=a[1];return o&&n.push(o),Object(c.jsx)(le.c,{to:"/".concat(n.join("/")),children:r},n.join(""))}))})}function pe(){return Object.keys(Y.components).map((function(e){var t=Y.components[e];return"[".concat(t.componentName,"](/components/").concat(t.componentName,")")}))}function me(e,t){return"[".concat(e,"](").concat(t,")")}function be(){return[{path:"/components/:componentName",breadcrumbs:function(e){var t=Y.components[e.match.params.componentName].component;return[["Documentation",""],["Components","components"],[t.componentName,t.componentName]]},children:function(e){return Y.components[e.match.params.componentName].component.documentation.md}},{path:"/components",breadcrumbs:function(){return[["Documentation",""],["Components","components"]]},children:function(){return"\n# Components\n".concat(pe().join("\n\n"),"\n")}},{path:"/game",breadcrumbs:function(){return[["Documentation",""],["Game","game"]]},children:function(){return"\n# Game\n\nEvery game starts with a `game` object that you configure through the code editor. The following sections will explain how to use the the various properties of of the `game` object.\n\n".concat("\n## game.configure\n\n`Function`\n\nUse this function to set global properties that configure how the game will run.\n\n~~~js\ngame.configure = (settings) => {\n  ...\n}\n~~~\n\n### settings.tickInterval\n\nHow frequently the `game.tick` function should be called.\n\n~~~js\nsettings.tickInterval = 3000;\n~~~\n","\n").concat("\n## game.data\n\n`Object`\n\nThis can be any object that contains the state of the game. Getters can be used as well for getting cusomtized values without storing a full customized value.\n\nThe starter template code builds a class that is used to contain the game data. This helps organize the code to be able to reload the game data and update it as necessary.  \n","\n").concat("\n## game.actions\n\n`Object`\n\nThese are functions that handle actions you are allowing the user to perform.\n\nHere is an example of a clicking activity for the player that adds one every time to a ~money~ property\n\n~~~js\ngame.actions.mainClick = () => {\n  game.data.money += 1;\n};\n~~~\n\nAlternatively you could modify the amount gained based on the number of clicks.\n\n~~~js\ngame.actions.mainClick = () => {\n  game.data.money += Math.ceil(game.data.totalClicks / 100);\n  game.data.totalClicks += 1;\n};\n~~~\n","\n").concat("\n## dataSources\n\n`Object`\n\nThese are functions that return objects that represent the data to be rendered. The format of the returned data will depend on what is using it.\n\n### Types\n\nThe following are the different formats for the standard components\n\n#### For Tables\n\n`Array of objects`\n\nYou have some flexibility in how you name the properties as the table component allows you to select the properties and how they are used, per colunmn\n\nTHe following example assumes there is an array of `items` that represents things the player can buy.\n\n~~~js\ngame.dataSources.items = () => {\n  return items.map((item) => {\n    // Items and counts that the player has bought\n    // They are stored in an object, keyed by the item name\n    const count = game.data.item[item.name];\n\n    return {\n      name: item.name,\n      cost: {\n        data: () => {\n          return `${item.cost(count)} (${count})`;\n        }\n      },\n      action: {\n        text: 'Buy',\n        onClickAction: 'buyItem', // This is defined as part of game.actions\n      },\n    }\n  })\n};\n\n~~~\n","\n").concat("\n## visibilitySources\n\n`Object`\n\nThese are functions that return a boolean value to indicate whether a component should be visible or not.\n\n~~~js\ngame.visibilitySources.item1Feature = () => {\n  // Returns true if the player has bought item1\n  return !!game.data.items.item1;\n}\n~~~\n","\n").concat("\n## initialize\n\n`Function`\n\nThis is code executed when the game starts up. Saved player game data is passed in as a parameter so that it can be processed to resume the last game state.\n\nThis examples is creating an instance of a class `GameData` and using the loadedGameData. The instance is set to the `game.data` property.\n\n~~~js\ngame.initialize = (loadedGameData) => {\n  game.data = new GameData(loadedGameData);\n}\n~~~\n","\n").concat("\n## initializeGameData\n\n`Function`\n\nThis is code executed when a new game is started. It can also be called manually to reset the game.\n\n~~~js\ngame.initializeGameData = () => {\n  game.data = new GameData({});\n  game.update();\n}\n~~~\n","\n").concat("\n## tick\n`Function`\n\nThis is the function that is executed at the tick interval. This should be used to update any game data at the set `game.settings.tickInterval`.\n\n~~~js\ngame.tick = () => {\n  // Free money!\n  game.data.money += 1;\n}\n~~~\n","\n")}},{path:"/customComponents",breadcrumbs:function(){return[["Documentation",""],["Custom Components","customComponents"]]},children:function(){return"\n# Custom Components\n...how to implement\n"}},{path:"/",breadcrumbs:function(){return[["Documentation",""]]},children:function(){return"\n# Idling Engine\n\n## Game Config/Code\n\nThis section details the properties of the game object and their configuration.\n\n".concat(me("More >","/game"),"\n\n## Custom Components\n\nIf you are daring enough, this section explains how to implment your own custom components.\n\n").concat(me("More >","/customComponents"),"\n\n## Components\n").concat(pe().join("\n\n"),"\n  ")}}]}var je=n(1087),fe=n(1060),he={link:function(e){return Object(c.jsx)(le.c,{to:e.href,children:e.children})},code:function(e){var t=e.language,n=e.value;return Object(c.jsx)(je.a,{style:fe.a,language:t,children:n})}},ge=Object(D.a)((function(){return{paper:{padding:"1em"}}}));function Oe(){var e=ge();return console.log("Documentation render"),Object(c.jsx)(oe.a,{children:Object(c.jsx)(ce.a,{className:e.paper,children:Object(c.jsx)(le.a,{basename:"/idling-engine/documentation",children:Object(c.jsx)("div",{className:"markdown-container",children:Object(c.jsx)(S.d,{children:be().map((function(e){return Object(c.jsx)(S.b,{path:e.path,render:function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(de,{parts:e.breadcrumbs(t)}),Object(c.jsx)(se.a,{plugins:[],children:e.children(t),renderers:he})]})}},e.path)}))})})})})})}var _e=n(1084),xe=n(83),ve=n(1063),ye=n(1094),Ce=n(217),we=n(39),ke=n(1064),Se=n(1065),De=n(1066),Ee=n(1067),Ne=n(1068),Ie=function(e){var t=e.component;return e.items.map((function(e,n){return t(e,n)}))},Pe=n(1059),Ge=n(1062),Te=n(1091),Ae=n(1057),Me=n(1085),Re=function(e){var t,n=e.value,a=e.items,r=e.label,o=e.onChange,i=[],s=Object(we.a)(a);try{for(s.s();!(t=s.n()).done;){var l=t.value,u="",d=null;"string"===typeof l?(u=l,d=l):(u=l.name,d=l.value),i.push(Object(c.jsx)(Ge.a,{value:d,children:u},u))}}catch(m){s.e(m)}finally{s.f()}var p=null;return r&&(p=Object(c.jsx)(Te.a,{shrink:!0,children:r})),Object(c.jsxs)(Ae.a,{fullWidth:!0,children:[p,Object(c.jsx)(Me.a,{value:n||"",onChange:o,children:i})]})},ze=n(109),Be=n.n(ze),Fe=function(e){var t=e.property,n=e.value,a=e.itemsFn,r=e.setProp;return Object(c.jsxs)(_e.a,{display:"flex",alignItems:"flex-end",children:[Object(c.jsx)(_e.a,{flexGrow:1,children:Object(c.jsx)(Re,{value:n||"",items:a(),onChange:function(e){r((function(n){return n[t]=e.target.value}))}})}),Object(c.jsx)(_e.a,{children:Object(c.jsx)(Pe.a,{size:"small",onClick:function(){r((function(e){return e[t]=null}))},children:Object(c.jsx)(Be.a,{})})})]})},Ue=n(1093),Le=function(e){var t=e.property,n=e.value,a=e.min,r=e.max,o=e.step,i=e.setProp;return Object(c.jsx)(Ue.a,{value:n||7,step:o,min:a,max:r,onChange:function(e,n){i((function(e){return e[t]=n}))}})},We=function(e){var t=e.property,n=e.value,a=e.setProp;return Object(c.jsx)(T.a,{fullWidth:!0,value:n||"",onChange:function(e){a((function(n){n[t]=e.target.value}))}})},Ke=n(200),qe=n.n(Ke);function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(L.b.state.localSettings.flags.styleDrawerOpen=!0,L.b.state.localSettings.flags.previousHighlightComponents=L.b.state.localSettings.flags.highlightComponents,L.b.state.localSettings.flags.highlightComponents=!1,e.componentName){var t=U.a.gameConfig.customStyles;L.b.state.localSettings.styleDrawerComponentName=e.componentName,L.b.state.localSettings.styleDrawerStyleId=e.styleId||"",t[e.componentName]=t[e.componentName]||{}}q(),L.b.update()}var He=function(e){var t=e.property,n=e.value,a=e.componentName,r=e.setProp,o=U.a.gameConfig.customStyles;return o[a]&&0!==Object.keys(o[a]).length?Object(c.jsxs)(_e.a,{display:"flex",alignItems:"flex-end",children:[Object(c.jsx)(_e.a,{flexGrow:1,children:Object(c.jsx)(Re,{value:n||"",items:Object.keys(o[a]).map((function(e){return{value:e,name:o[a][e].styleName}})),onChange:function(e){r((function(n){return n[t]=e.target.value}))}})}),Object(c.jsx)(_e.a,{children:Object(c.jsx)(Pe.a,{size:"small",onClick:function(){r((function(e){return e[t]=null}))},children:Object(c.jsx)(Be.a,{})})}),Object(c.jsx)(_e.a,{children:Object(c.jsx)(Pe.a,{size:"small",onClick:function(){Je({componentName:a,styleId:n})},children:Object(c.jsx)(qe.a,{})})})]}):Object(c.jsx)(ve.a,{fullWidth:!0,variant:"contained",onClick:function(){Je({componentName:a})},children:"Define a Style"})},Ve=function(e){e.property;var t=e.value,n=e.onChange;return Object(c.jsx)(M.a,{checked:t||!1,onChange:n})},$e=function(e){var t=e.config,n=e.properties,a=e.setProp,r=[];if(!n)return console.error(t,new Error),null;var o,i=Object(we.a)(t);try{for(i.s();!(o=i.n()).done;){var s=o.value,l=s.property,u=Object(Ce.a)(s,["property"]),d=n[l];r.push(Object(c.jsxs)(ke.a,{children:[Object(c.jsx)(Se.a,{component:"td",scope:"row",children:l}),Object(c.jsx)(Se.a,{style:{width:"1em"}}),Object(c.jsx)(Se.a,{children:Object(c.jsx)(s.type,Object(x.a)({property:l,value:d,setProp:a},u))})]},l))}}catch(p){i.e(p)}finally{i.f()}return Object(c.jsx)(De.a,{children:Object(c.jsx)(Ee.a,{size:"small",padding:"none",children:Object(c.jsx)(Ne.a,{children:r})})})},Qe=function(e){return Object(J.a)(X.componentsArray.reduce((function(t,n){return n.toolboxItem&&t.push(n.toolboxItem(e)),t}),[]))};function Ye(e){L.b.state.localSettings.flags[e]=!L.b.state.localSettings.flags[e],q(),L.b.update()}var Xe=function(){var e=Object(H.useEditor)(),t=e.connectors,n=e.actions,a=Object(s.useState)(null),r=Object(v.a)(a,2),o=r[0],i=r[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(_e.a,{px:2,py:2,children:Object(c.jsxs)(E.a,{container:!0,direction:"column",spacing:1,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(xe.a,{children:"Drag to add"}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Highlight components",Object(c.jsx)(M.a,{checked:L.b.state.localSettings.flags.highlightComponents,onChange:function(){Ye("highlightComponents")}})]}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Tick while editing",Object(c.jsx)(M.a,{checked:L.b.state.localSettings.flags.tickWhileEditing,onChange:function(){Ye("tickWhileEditing")}})]})]}),Qe(t).map((function(e){return Object(c.jsx)(E.a,{container:!0,direction:"column",item:!0,children:Object(c.jsx)(ve.a,{ref:e.ref,variant:"contained",onClick:function(){n.selectNode(),i({component:e.component})},children:e.name})},e.name)}))]})}),o?Object(c.jsx)(et,{component:o.component}):null]})},Ze={margin:{property:"margin",type:We},padding:{property:"padding",type:We},height:{property:"height",type:We}},et=function(e){var t=e.component,n=t.baseStyle;if(!n)return null;var a=[];for(var r in n){var o=Ze[r];a.push(o)}return Object(c.jsx)(_e.a,{mt:2,px:2,py:2,children:Object(c.jsxs)(E.a,{container:!0,direction:"column",spacing:0,children:[Object(c.jsx)(E.a,{item:!0,children:Object(c.jsx)(_e.a,{pb:2,children:Object(c.jsxs)(E.a,{container:!0,alignItems:"center",children:[Object(c.jsx)(E.a,{item:!0,xs:!0,children:Object(c.jsx)(xe.a,{variant:"subtitle1",children:"Base Component Config"})}),Object(c.jsx)(E.a,{item:!0,children:Object(c.jsx)(ye.a,{size:"small",color:"primary",label:t.componentName})})]})})}),Object(c.jsx)($e,{config:a,properties:n,setProp:function(e){var a=Object.assign({},n);e(a),t.baseStyle=a,L.b.update()}})]})})},tt=function(){var e=Object(H.useEditor)((function(e,t){var n,a=e.events.selected;return a&&(n={id:a,name:e.nodes[a].data.name,settings:e.nodes[a].related&&e.nodes[a].related.settings,isDeletable:t.node(a).isDeletable()}),{selected:n}})),t=e.actions,n=e.selected;return n?Object(c.jsx)(_e.a,{mt:2,px:2,py:2,children:Object(c.jsxs)(E.a,{container:!0,direction:"column",spacing:0,children:[Object(c.jsx)(E.a,{item:!0,children:Object(c.jsx)(_e.a,{pb:2,children:Object(c.jsxs)(E.a,{container:!0,alignItems:"center",children:[Object(c.jsx)(E.a,{item:!0,xs:!0,children:Object(c.jsx)(xe.a,{variant:"subtitle1",children:"Selected"})}),Object(c.jsx)(E.a,{item:!0,children:Object(c.jsx)(ye.a,{size:"small",color:"primary",label:n.name})})]})})}),n.settings&&l.a.createElement(n.settings),n.isDeletable?Object(c.jsx)(ve.a,{variant:"contained",color:"default",onClick:function(){t.delete(n.id)},children:"Delete"}):null]})}):null},nt=n(1070),at=n(1071),rt={md:"\n# AppBar\n\n## Properties\n\n\n"},ot=n(1086),ct=n(1069);function it(e){var t=e.path,n=e.tabs,a=e.className,r=Object(H.useNode)().connectors.connect,o=Object(S.g)(),i=function(e,t){var n=null;for(var a in t){var r=t[a];if(r.default&&(n=r),e.match(r.path))return[parseInt(a),r]}return n?[-1,n]:[-1,null]}(t,n),s=Object(v.a)(i,2),l=s[0],u=s[1];return-1===l?(u&&o.push(u.to),null):Object(c.jsx)(ot.a,{ref:r,value:l,onChange:function(e,t){var a=n[t];o.push(a.to)},className:a,children:n.map((function(e){return e.visibilitySource&&!W.c.visibilitySources[e.visibilitySource]()?null:Object(c.jsx)(ct.a,{label:e.name,className:a},e.name)}))})}var st=Object(D.a)((function(e){return{root:{flexGrow:1},spacer:{flexGrow:1},fullHeight:Object(x.a)({},e.mixins.toolbar)}}));function lt(e){var t=e.tabs,n=st(),a=Q({additionalClasses:[n.root]}),r=a.refFn,o=a.componentClassName,i=a.store,l=Object(S.g)(),u=Object(s.useState)(!0),d=Object(v.a)(u,2),p=d[0],m=d[1];return Object(c.jsx)("div",{ref:r,className:n.root,onClick:function(){setTimeout((function(){m(!p),i.update()}))},children:Object(c.jsx)(nt.a,{position:"static",className:o,children:Object(c.jsxs)(at.a,{children:[Object(c.jsx)(it,{path:l.location.pathname,tabs:t,className:n.fullHeight}),Object(c.jsx)("div",{className:n.spacer})]})})})}lt.componentName="AppBar",lt.craft={props:{tabs:[{name:"Tab 1",path:"tab1",to:"/tab1",default:!0},{name:"Tab 2",path:"tab2",to:"/tab2"},{name:"Tab 3",path:"tab3",to:"/tab3"}]},related:{settings:function(){var e=Object(H.useNode)((function(e){return{props:e.data.props,triggerUpdate:!!e.data.props.triggerUpdate,tabs:e.data.props.tabs}})),t=e.actions.setProp,n=e.triggerUpdate,a=e.tabs,r=Object.keys(W.c.visibilitySources);return Object(c.jsxs)("div",{children:[a.map((function(e,o){return Object(c.jsx)($e,{config:[{type:We,property:"name"},{type:We,property:"path"},{type:We,property:"to"},{type:Fe,property:"visibilitySource",itemsFn:function(){return r}},{type:Ve,property:"default",onChange:function(){return function(e){var r,o=Object(we.a)(a);try{for(o.s();!(r=o.n()).done;)r.value.default=!1}catch(c){o.e(c)}finally{o.f()}return e.default=!0,t((function(e){e.triggerUpdate=!n}))}(e)}}],properties:e,setProp:function(a){a(e),t((function(e){e.triggerUpdate=!n}))}},o)})),Object(c.jsx)(ve.a,{onClick:function(){return a.push({name:"New Tab",path:"",to:""}),t((function(e){return e.triggerUpdate=!n}))},children:"Add Tab"})]})}}},lt.documentation=rt,lt.toolboxItem=function(e){return{name:"AppBar",component:lt,ref:function(t){return e.create(t,Object(c.jsx)(lt,{}))}}},X.registerCustomComponent(lt);function ut(e,t,n){var a=Object(s.useState)(null),r=Object(v.a)(a,2),o=r[0],c=r[1];if(!t)return e;var i=null;return n&&(i=t[n]),(o&&i&&i.customId!==o.customId||!o&&i)&&c(Object(x.a)(Object(x.a)({},e),i)),o&&!i&&c(null),o||e}var dt={md:"\n# Button\n\n## Properties\n\n### onClickAction\nThis is an action made avaiable from `game.actions`. No parameters are passed to the action.\n"},pt=function e(t){var n=t.size,a=t.variant,r=t.color,o=t.text,i=t.onClickAction,s=t.actionContext,l=t.customStyleName,u=U.a.gameConfig.customStyles,d=Q(),p=d.refFn,m=d.componentClassName,b=ut(e.baseStyle,u.Button,l);return Object(c.jsx)(ve.a,{style:b,ref:p,className:m,size:n,variant:a,color:r,onClick:function(){var e=W.c.actions[i];e&&(e(s),L.b.update())},children:o})};pt.componentName="Button",pt.craft={props:{size:"small",variant:"contained",color:"primary",text:"Button"},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(c.jsx)($e,{config:[{type:He,property:"customStyleName",componentName:n},{type:Fe,property:"onClickAction",itemsFn:function(){return Object.keys(W.c.actions)}},{type:We,property:"text"}],properties:a,setProp:t})}}},pt.baseStyle={margin:"0em"},pt.styleProperties=[{property:"padding",type:We}],pt.documentation=dt,pt.toolboxItem=function(e){return{name:"Button",component:pt,ref:function(t){return e.create(t,Object(c.jsx)(pt,{}))}}},X.registerCustomComponent(pt);var mt={md:"\n# Text\n\n## Properties\n\n### text\nThe text to show\n\n"},bt=function e(t){var n=t.text,a=t.customStyleName,r=U.a.gameConfig.customStyles,o=Q(),i=o.refFn,s=o.componentClassName,l=ut(e.baseStyle,r.Text,a);return Object(c.jsx)("span",{ref:i,className:s,style:l,children:n})};bt.componentName="Text",bt.craft={props:{text:"Text"},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(c.jsx)($e,{config:[{type:He,property:"customStyleName",componentName:n},{type:We,property:"text",componentName:n}],properties:a,setProp:t})}}},bt.baseStyle={margin:"0em"},bt.styleProperties=[{property:"fontSize",type:We}],bt.documentation=mt,bt.toolboxItem=function(e){return{name:"Text",component:bt,ref:function(t){return e.create(t,Object(c.jsx)(bt,{text:"Some text"}))}}},X.registerCustomComponent(bt);var jt=n(1072),ft=n(1073),ht=(n(1074),function(e){var t=e.children,n=Object(H.useNode)().connectors.connect;return Object(c.jsx)(jt.a,{ref:n,className:"text-only",children:t})});ht.craft={rules:{}};var gt=function(e){var t=e.children,n=Object(H.useNode)().connectors.connect;return Object(c.jsx)(ft.a,{ref:n,children:t})};gt.craft={rules:{canMoveIn:function(e){return e.data.type===pt}}};function Ot(e,t){if(!e)return{};var n={};if(W.c.visibilitySources[e]&&!W.c.visibilitySources[e]()){if(!t)return null;n.opacity="0.25"}return n}var _t={md:"\n# Container\n\n## Properties\n\n\n"},xt=function e(t){var n=t.children,a=t.visibilitySource,r=Q(),o=r.refFn,i=r.componentClassName,s=Ot(a,r.enabled);return s?Object(c.jsx)(oe.a,{ref:o,style:Object(x.a)(Object(x.a)({},e.baseStyle),s),className:i,children:n}):null};xt.componentName="Container",xt.craft={props:{padding:"0px"},related:{settings:function(){var e=Object(H.useNode)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(c.jsx)($e,{config:[{type:Fe,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:n,setProp:t})}}},xt.baseStyle={padding:"0em"},xt.documentation=_t,xt.toolboxItem=function(e){return{name:"Container",component:xt,ref:function(t){return e.create(t,Object(c.jsx)(H.Element,{is:xt,canvas:!0,children:Object(c.jsx)(bt,{text:"Container"})}))}}},X.registerCustomComponent(xt);var vt=[{name:"3",value:3},{name:"4",value:4},{name:"6",value:6}],yt={md:"\n# GridContainer\n\n## Properties\n\n\n\n"},Ct={md:"\n# GridItem\n\n## Properties\n\n\n\n"},wt=Object(D.a)((function(){return{root:{flexGrow:1}}})),kt=function(e){var t=e.children,n=e.visibilitySource,a=(U.a.gameConfig.customStyles,Q({additionalClasses:[wt().root]})),r=a.refFn,o=a.componentClassName,i=Ot(n,a.enabled);return i?Object(c.jsx)(E.a,{container:!0,ref:r,className:o,style:i,spacing:2,children:t}):null};kt.componentName="GridContiainer",kt.craft={props:{},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(c.jsx)($e,{config:[{type:Fe,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:n,setProp:t})}}};var St=function e(t){var n=t.children,a=t.size,r=t.visibilitySource,o=t.customStyleName,i=U.a.gameConfig.customStyles,s=Q(),l=s.refFn,u=s.componentClassName,d=s.enabled,p=ut(e.baseStyle,i.GridItem,o),m=Ot(r,d);return m?Object(c.jsx)(E.a,{item:!0,xs:a,ref:l,className:u,style:m,children:Object(c.jsx)(ce.a,{style:p,children:n})}):null};St.componentName="GridItem",St.craft={props:{size:6},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(c.jsx)($e,{config:[{type:He,property:"customStyleName",componentName:n},{type:Fe,property:"size",itemsFn:function(){return vt}},{type:Fe,property:"visibilitySource",itemsFn:function(){return Object.keys(W.c.visibilitySources)}}],properties:a,setProp:t})}}},St.baseStyle={padding:"0em",height:"100%"},St.styleProperties=[{property:"padding",type:We}],kt.documentation=yt,St.documentation=Ct,Y.addComponent(kt),Y.addComponent(St),kt.toolboxItem=function(e){return{name:"GridContainer",component:kt,ref:function(t){return e.create(t,Object(c.jsxs)(H.Element,{is:kt,canvas:!0,children:[Object(c.jsx)(H.Element,{is:St,canvas:!0,children:Object(c.jsx)(bt,{text:"Grid Item"})}),Object(c.jsx)(H.Element,{is:St,canvas:!0,children:Object(c.jsx)(bt,{text:"Grid Item"})})]}))}}},X.registerCustomComponent(kt),St.toolboxItem=function(e){return{name:"GridItem",component:St,ref:function(t){return e.create(t,Object(c.jsx)(H.Element,{is:St,canvas:!0,children:Object(c.jsx)(bt,{text:"Grid Item"})}))}}},X.registerCustomComponent(St);var Dt=n(201),Et=n.n(Dt),Nt=n(202),It=n.n(Nt),Pt={md:"\n# PathContainer\n\n## Properties\n\n\n"},Gt=Object(D.a)((function(e){return{main:{padding:"0em"}}})),Tt=function e(t){var n=t.path,a=t.children,r=t.customStyleName,o=U.a.gameConfig.customStyles,i=Object(S.g)(),s=Q({additionalClasses:[Gt().main]}),l=s.refFn,u=s.enabled,d=s.componentClassName,p=i.location.pathname.includes(n),m=ut(e.baseStyle,o.PathContainer,r);return Object(c.jsxs)(oe.a,{ref:l,className:d,style:m,children:[u&&Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:{float:"right",height:"0em"},children:p?Object(c.jsx)(Et.a,{}):Object(c.jsx)(It.a,{})}),n," : ",i.location.pathname]}),p?a:null]})};Tt.styleProperties=[{property:"margin",type:We}];Tt.componentName="PathContainer",Tt.craft={props:{path:"/tab1"},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(c.jsx)($e,{config:[{type:He,property:"customStyleName",componentName:n},{type:We,property:"path"}],properties:a,setProp:t})}}},Tt.baseStyle={margin:"0em"},Tt.documentation=Pt,Tt.toolboxItem=function(e){return{name:"PathContainer",component:Tt,ref:function(t){return e.create(t,Object(c.jsx)(H.Element,{is:Tt,canvas:!0}))}}},X.registerCustomComponent(Tt);var At=n(1075),Mt={md:"\n# Table\n\n## Properties\n\n"},Rt=function(e){var t=e.items,n=e.columnNames,a=[],r={item:{},index:"0",column:{}};try{for(var o in t){var i=t[o],s=[];for(var l in r.item=i,n){var u=n[l];r.index=l,r.column=u;var d=u.name,p=i[u.property];switch(u.type){case"string":if("string"!==typeof p)throw new Error("Trying to use a non-string value as a string");s.push(Object(c.jsx)(Se.a,{children:p},d));break;case"variableString":if(!p.data)throw new Error("No data function for a variableString");s.push(Object(c.jsx)(Se.a,{children:p.data()},d));break;case"button":if(!p.onClickAction)throw new Error("No onClickAcion function for a button");s.push(Object(c.jsx)(Se.a,{children:Object(c.jsx)(pt,{text:p.text,variant:"contained",color:"primary",onClickAction:p.onClickAction,actionContext:i})},d))}}a.push(Object(c.jsx)(ke.a,{children:s},o))}}catch(m){return Object(c.jsx)(Ne.a,{children:Object(c.jsxs)(Se.a,{children:[Object(c.jsxs)("div",{children:["Table Data Error! ",m.message]}),Object(c.jsxs)("div",{children:["Column Index: ",r.index]}),Object(c.jsxs)("div",{children:["Column Type: ",r.column.type]}),Object(c.jsxs)("div",{children:["Item Data: ",JSON.stringify(r.item)]})]})})}return Object(c.jsx)(Ne.a,{children:a})},zt=function(e){var t,n=e.columnNames,a=void 0===n?[]:n,r=e.itemSource,o=Q(),i=o.refFn,s=o.componentClassName,l=[],u=Object(we.a)(a);try{for(u.s();!(t=u.n()).done;){var d=t.value;l.push(Object(c.jsx)(Se.a,{children:d.name},d.name))}}catch(b){u.e(b)}finally{u.f()}var p=W.c.dataSources[r],m=p?p():[];return Object(c.jsx)("div",{ref:i,className:s,children:Object(c.jsx)(De.a,{children:Object(c.jsxs)(Ee.a,{size:"small",children:[Object(c.jsx)(At.a,{children:Object(c.jsx)(ke.a,{children:l})}),Object(c.jsx)(Rt,{items:m,columnNames:a})]})})})},Bt=function(e){var t=e.item,n=e.update;return Object(c.jsxs)("div",{style:{marginBottom:"1em"},children:[Object(c.jsx)(T.a,{fullWidth:!0,value:t.name,label:"Name",onChange:function(e){t.name=e.target.value,n()}}),Object(c.jsx)(T.a,{fullWidth:!0,value:t.property,label:"Property",onChange:function(e){t.property=e.target.value,n()}}),Object(c.jsx)(Re,{value:t.type||"",items:[{name:"String",value:"string"},{name:"Button",value:"button"},{name:"Variable String",value:"variableString"}],label:"Type",onChange:function(e){t.type=e.target.value,n()}})]})};zt.componentName="Table",zt.craft={props:{columnNames:[{name:"Colum 1",property:"col1",type:"string"},{name:"Colum 2",property:"col2",type:"string"},{name:"Colum 3",property:"col3",type:"button"}],itemSource:"",updateVariable:!1},related:{settings:function(){var e=Object(H.useNode)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(c.jsx)($e,{config:[{type:Fe,property:"itemSource",itemsFn:function(){return Object.keys(W.c.dataSources)}},{type:Ie,property:"columnNames",component:function(e,n){return Object(c.jsx)(Bt,{item:e,update:function(){t((function(e){return e.updateVarible=!e.updateVarible}))}},n)},items:n.columnNames}],properties:n,setProp:t})}}},zt.documentation=Mt,zt.toolboxItem=function(e){return{name:"Table",component:zt,ref:function(t){return e.create(t,Object(c.jsx)(zt,{}))}}},X.registerCustomComponent(zt);var Ft={md:"\n# VariableText\n\n## Properties\n\n"},Ut=function e(t){var n,a=t.dataProperty,r=t.subProperty,o=t.customStyleName,i=U.a.gameConfig.customStyles,s=Q(),l=s.refFn,u=s.componentClassName,d=ut(e.baseStyle,i.VariableText,o),p=W.c.data[a];return p&&r&&(p=p[r]),"object"===typeof p&&(p=void 0),Object(c.jsx)("span",{ref:l,className:u,style:d,children:null!==(n=p)&&void 0!==n?n:"##NO VALUE##"})};Ut.componentName="VariableText",Ut.craft={props:{},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(H.useNode)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,a=e.props;return Object(c.jsx)($e,{config:[{type:He,property:"customStyleName",componentName:n},{type:We,property:"dataProperty"},{type:We,property:"subProperty"}],properties:a,setProp:t})}}},Ut.baseStyle={margin:"0em"},Ut.styleProperties=[{property:"fontSize",type:We}],Ut.documentation=Ft,Ut.toolboxItem=function(e){return{name:"VariableText",component:Ut,ref:function(t){return e.create(t,Object(c.jsx)(Ut,{}))}}},X.registerCustomComponent(Ut);var Lt=function(){return Object(s.useEffect)((function(){console.debug("Starting autosave");var e=setInterval((function(){ee()}),2e3);return function(){console.debug("Stopping autosave"),clearInterval(e)}}),[]),null},Wt=Object(D.a)((function(e){return{gameArea:{position:"absolute",background:"#eee",height:"100%",width:"100%",overflowY:"auto"}}}));function Kt(){var e=Object(H.useEditor)().query,t=Wt();return Object(s.useEffect)((function(){return W.c.running=!1,function(){W.c.running=!1,ee()}}),[]),L.b.editorQuery=e,Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{style:{position:"absolute",width:"80%",height:"100%"},children:Object(c.jsx)("div",{className:t.gameArea,children:Object(c.jsx)(le.b,{children:Object(c.jsx)(H.Frame,{data:U.a.gameConfig.layout,children:Object(c.jsx)(H.Element,{is:xt,padding:5,canvas:!0,children:Object(c.jsx)(bt,{text:"Start dragging components in (and delete this one)"})})})})})}),Object(c.jsxs)("div",{style:{position:"absolute",right:"0%",width:"20%",height:"100%",overflowY:"auto"},children:[Object(c.jsx)(Xe,{}),Object(c.jsx)(tt,{})]})]})}function qt(){return Object(c.jsxs)(H.Editor,{resolver:X.components,children:["play"!==L.b.state.mode?Object(c.jsx)(Lt,{}):null,Object(c.jsx)(Kt,{})]})}function Jt(){var e=Object(S.g)(),t=Wt();return Object(s.useEffect)((function(){return W.c.running=!0,U.a.gameConfig||(console.error(new Error("No gameConfig routing to /edit")),e.push("/edit")),function(){W.c.running=!1}}),[e]),Object(c.jsx)("div",{className:t.gameArea,children:Object(c.jsx)(H.Editor,{resolver:X.components,enabled:!1,children:Object(c.jsx)(le.b,{children:Object(c.jsx)(H.Frame,{data:U.a.gameConfig.layout})})})})}var Ht=n(203),Vt=n.n(Ht),$t=function(){var e=Object(S.g)(),t=e.location.pathname,n=Object(s.useState)(!1),a=Object(v.a)(n,2),r=a[0],o=a[1],i=U.a.gameConfig;if(Object(s.useContext)(L.a),"play"===L.b.state.mode)return null;function l(t){e.push(t),o(!r)}return Object(c.jsx)(nt.a,{position:"static",color:"transparent",children:Object(c.jsxs)(at.a,{children:[Object(c.jsxs)("div",{style:{flexGrow:1},children:[Object(c.jsx)(ve.a,{onClick:function(){L.b.state.optionsDrawerOpen=!0,L.b.update()},children:Object(c.jsx)(Vt.a,{})}),Object(c.jsx)(ve.a,{onClick:function(){l("/edit")},variant:t.includes("/edit")?"contained":void 0,color:"primary",children:"Edit"}),Object(c.jsx)(ve.a,{onClick:function(){var e=L.b.state.localSettings.lastCodeFile;e&&(e="/".concat(e)),l("/code".concat(e))},variant:t.includes("/code")?"contained":void 0,color:"primary",children:"Code"}),Object(c.jsx)(ve.a,{onClick:function(){Je()},children:"Styling"}),Object(c.jsx)(ve.a,{onClick:function(){ee(),l("/play")},variant:t.includes("/play")?"contained":void 0,color:"primary",children:"Play"}),Object(c.jsx)(ve.a,{onClick:function(){l("/documentation")},variant:t.includes("/documentation")?"contained":void 0,color:"primary",children:"Documentation"})]}),Object(c.jsx)("div",{children:i.name})]})})},Qt=n(1081),Yt=n(210),Xt=n.n(Yt),Zt=n(211),en=n.n(Zt),tn=n(212),nn=n.n(tn),an=n(209),rn=n.n(an),on=n(112),cn=n.n(on),sn=n(204),ln=n(1076),un=n(1077),dn=n(1078),pn=n(1079),mn=n(1080),bn=function(e){var t=e.onClose,n={gameConfig:U.a.gameConfig},a=Object(s.useState)(btoa(JSON.stringify(n))),r=Object(v.a)(a,2),o=r[0],i=r[1];return Object(c.jsxs)(ln.a,{open:!0,onClose:t,children:[Object(c.jsx)(un.a,{children:"Import or export game data"}),Object(c.jsxs)(dn.a,{children:[Object(c.jsx)(pn.a,{children:"Copy and paste the existing data somewhere to save it. Or paste in data you have and import it."}),Object(c.jsx)(T.a,{fullWidth:!0,label:"Current Game Data",multiline:!0,rows:4,value:o,onChange:function(e){i(e.target.value)},variant:"filled"})]}),Object(c.jsx)(mn.a,{children:Object(c.jsx)(ve.a,{onClick:function(){var e=JSON.parse(atob(o));console.debug("Imported game data",JSON.stringify(e,null,2)),Z.a.save(e.gameConfig),localStorage.lastGameId=e.gameConfig.id,window.location.reload()},color:"primary",children:"Import"})})]})},jn=function(e){var t=e.onClose;return Object(c.jsxs)(ln.a,{open:!0,onClose:t,children:[Object(c.jsx)(un.a,{children:"Delete Game Configuration"}),Object(c.jsx)(dn.a,{children:Object(c.jsx)(pn.a,{children:"Are you sure you want to delete the curret game configuration? This cannot be undone."})}),Object(c.jsxs)(mn.a,{children:[Object(c.jsx)(ve.a,{onClick:t,color:"primary",variant:"contained",children:"Cancel"}),Object(c.jsx)(ve.a,{onClick:Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.delete(U.a.gameConfig.id);case 2:return e.next=4,Z.a.getAll();case 4:(t=e.sent).length&&(localStorage.lastGameId=t[0].id),window.location.reload();case 7:case"end":return e.stop()}}),e)}))),color:"primary",children:"Confirm"})]})]})},fn=n(206),hn=n.n(fn),gn=n(205),On=n.n(gn),_n=n(207),xn=n.n(_n),vn=n(111),yn=n.n(vn);function Cn(){var e=Object(s.useState)(!1),t=Object(v.a)(e,2),n=t[0],a=t[1];return function(e){return a(null!==e&&void 0!==e?e:!n)}}function wn(e){var t=e.component,n=e.components,a=e.update,r=null;return r="Checking"===t.status?Object(c.jsx)(On.a,{}):t.ok?Object(c.jsx)(hn.a,{style:{color:"green"}}):Object(c.jsx)(xn.a,{style:{color:"red"}}),Object(c.jsxs)(ke.a,{children:[Object(c.jsx)(Se.a,{children:Object(c.jsx)(Pe.a,{onClick:function(){var e=n.indexOf(t);n.splice(e,1),a()},children:Object(c.jsx)(cn.a,{})})}),Object(c.jsx)(Se.a,{children:t.url}),Object(c.jsx)(Se.a,{children:r}),Object(c.jsx)(Se.a,{children:t.status})]})}var kn=function(e){var t=e.onClose,n=Cn(),a=Object(s.useState)(""),r=Object(v.a)(a,2),l=r[0],u=r[1];function d(e){return e.status="Checking",new Promise(function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yn.a.get(e.url);case 3:a=t.sent,console.log(a.status),200===a.status&&(e.status="Ok",e.ok=!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response?e.status="Failed (".concat(t.t0.response.status,")"):e.status="Failed (".concat(t.t0.message,")"),e.ok=!1;case 12:n();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}function p(){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.a.customComponents.map((function(e){return d(e)})),n(),e.next=4,Promise.all(t);case 4:n(123);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){p()})),Object(c.jsxs)(ln.a,{open:!0,onClose:t,children:[Object(c.jsx)(un.a,{children:"Custom Components"}),Object(c.jsxs)(dn.a,{children:[Object(c.jsx)(pn.a,{children:"Add custom components to your game."}),Object(c.jsx)(De.a,{children:Object(c.jsxs)(Ee.a,{size:"small",children:[Object(c.jsx)(At.a,{children:Object(c.jsxs)(ke.a,{children:[Object(c.jsx)(Se.a,{}),Object(c.jsx)(Se.a,{children:"URL"}),Object(c.jsx)(Se.a,{}),Object(c.jsx)(Se.a,{children:"Status"})]})}),Object(c.jsx)(Ne.a,{children:U.a.customComponents.map((function(e){return Object(c.jsx)(wn,{component:e,components:U.a.customComponents,update:n},e.url)}))})]})}),Object(c.jsx)("br",{}),Object(c.jsx)(T.a,{value:l,onChange:function(e){u(e.target.value)}}),Object(c.jsx)(ve.a,{onClick:Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:l,status:"New"},U.a.customComponents.push(t),e.next=4,d(t);case 4:u("");case 5:case"end":return e.stop()}}),e)}))),variant:"contained",color:"primary",children:"Add Component"}),Object(c.jsx)(ve.a,{onClick:p,variant:"contained",color:"primary",children:"Check Components"})]}),Object(c.jsxs)(mn.a,{children:[Object(c.jsx)(ve.a,{onClick:function(){t&&t()},color:"primary",children:"Done"}),Object(c.jsx)(ve.a,{onClick:function(){!function(){ne.apply(this,arguments)}(),window.location.reload()},color:"primary",variant:"contained",children:"Save And Reload"})]})]})},Sn=function(e){var t=e.onClose,n=U.a.gameConfig,a=Object(s.useState)(n.name),r=Object(v.a)(a,2),l=r[0],u=r[1];return Object(c.jsxs)(ln.a,{open:!0,onClose:t,children:[Object(c.jsx)(un.a,{children:"Game Settings"}),Object(c.jsx)(dn.a,{children:Object(c.jsx)(T.a,{fullWidth:!0,label:"Game Name",value:l,onChange:function(e){u(e.target.value)},variant:"filled"})}),Object(c.jsxs)(mn.a,{children:[Object(c.jsx)(ve.a,{onClick:t,children:"Cancel"}),Object(c.jsx)(ve.a,{onClick:Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.a.gameConfig.name=l,e.next=4,ee();case 4:t();case 5:case"end":return e.stop()}}),e)}))),color:"primary",variant:"contained",children:"Save"})]})]})},Dn=n(208),En=n.n(Dn),Nn=n(213),In=n.n(Nn);function Pn(e){if(e)return e.map((function(e){return Object(c.jsxs)(I.a,{button:!0,onClick:function(){localStorage.lastGameId!==e.id&&(localStorage.lastGameId=e.id,window.location.reload())},children:[Object(c.jsx)(P.a,{children:Object(c.jsx)(En.a,{})}),Object(c.jsx)(G.a,{primary:e.name,secondary:e.id})]},e.id)}))}function Gn(e){var t=e.Icon,n=e.onClick,a=e.primary,r=e.secondary;return Object(c.jsxs)(I.a,{button:!0,onClick:n,children:[Object(c.jsx)(P.a,{children:Object(c.jsx)(t,{})}),Object(c.jsx)(G.a,{primary:a,secondary:r})]})}var Tn,An=function(){var e=Object(s.useState)(null),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(!1),l=Object(v.a)(r,2),u=l[0],d=l[1],p=Object(s.useState)(!1),m=Object(v.a)(p,2),b=m[0],j=m[1],f=Object(s.useState)(!1),h=Object(v.a)(f,2),g=h[0],O=h[1],_=Object(s.useState)(!1),x=Object(v.a)(_,2),y=x[0],C=x[1],w=U.a.gameConfig;return n||Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting games"),e.t0=a,e.next=4,Z.a.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))(),Object(c.jsxs)("div",{children:[Object(c.jsx)(Qt.a,{open:L.b.state.optionsDrawerOpen,onClose:function(){L.b.state.optionsDrawerOpen=!1,L.b.update()},children:Object(c.jsxs)(N.a,{children:[Object(c.jsx)(I.a,{onClick:function(){},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(xe.a,{variant:"h4",children:w.name}),Object(c.jsx)("div",{children:w.id})]})}),Object(c.jsx)(A.a,{}),Object(c.jsx)(Gn,{Icon:rn.a,onClick:function(){return C(!0)},primary:"Game Settings"}),Object(c.jsx)(Gn,{Icon:Xt.a,onClick:function(){return W.c.initializeGameData()},primary:"Initialize Game Data"}),Object(c.jsx)(Gn,{Icon:cn.a,onClick:function(){return j(!0)},primary:"Delete Game Configuration",secondary:"Delete the currently loaded game"}),Object(c.jsx)(Gn,{Icon:en.a,onClick:function(){return d(!0)},primary:"Import / Export",secondary:"Import or export your game data"}),Object(c.jsx)(Gn,{Icon:nn.a,onClick:function(){return O(!0)},primary:"Custom Components",secondary:"Custom components for your game"}),Object(c.jsx)(A.a,{}),Pn(n),Object(c.jsx)(Gn,{Icon:In.a,onClick:function(){delete localStorage.lastGameId,window.location.reload()},primary:"Create New Game",secondary:"Start building a new game"}),Object(c.jsx)(A.a,{}),Object(c.jsx)(I.a,{onClick:function(){},children:Object(c.jsx)(G.a,{primary:"Idling Engine",secondary:"Version ".concat(sn.version)})})]})}),u&&Object(c.jsx)(bn,{onClose:function(){return d(!1)}}),b&&Object(c.jsx)(jn,{onClose:function(){return j(!1)}}),y&&Object(c.jsx)(Sn,{onClose:Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,Z.a.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1),C(!1);case 6:case"end":return e.stop()}}),e)})))}),g&&Object(c.jsx)(kn,{onClose:function(){return O(!1)}})]})},Mn=n(66),Rn=n(1018),zn=(Tn={},Object(Mn.a)(Tn,pt.name,pt),Object(Mn.a)(Tn,Tt.name,Tt),Object(Mn.a)(Tn,St.name,St),Object(Mn.a)(Tn,bt.name,bt),Object(Mn.a)(Tn,Ut.name,Ut),Tn),Bn=function(){var e=Cn(),t=U.a.gameConfig.customStyles,n=L.b.state.localSettings,a=n.styleDrawerComponentName,r=n.styleDrawerStyleId,o=function(t,n){L.b.state.localSettings.styleDrawerComponentName=t,L.b.state.localSettings.styleDrawerStyleId=n,e()},i=null;return a&&(i=t[a]),i&&i[r]||(r=""),Object(c.jsx)("div",{children:Object(c.jsx)(Qt.a,{open:L.b.state.localSettings.flags.styleDrawerOpen,onClose:function(){L.b.state.localSettings.flags.styleDrawerOpen=!1,L.b.state.localSettings.flags.highlightComponents=L.b.state.localSettings.flags.previousHighlightComponents,q(),L.b.update()},anchor:"right",BackdropProps:{invisible:!0},children:Object(c.jsxs)("div",{style:{padding:"1em"},children:[Object(c.jsx)(xe.a,{variant:"h4",children:"Style Components"}),Object(c.jsx)(Re,{value:a,items:Object.keys(zn),label:"Component",onChange:function(n){t[n.target.value]=t[n.target.value]||{},o(n.target.value,""),e()}}),i&&Object(c.jsxs)(_e.a,{display:"flex",alignItems:"flex-end",children:[Object(c.jsx)(_e.a,{flexGrow:1,children:Object(c.jsx)(Re,{value:r,items:Object.keys(i).map((function(e){return{value:e,name:i[e].styleName}})),label:"Styles",onChange:function(e){o(a,e.target.value)}})}),Object(c.jsx)(_e.a,{children:Object(c.jsx)(ve.a,{onClick:function(e){var t=Object(Rn.a)();i[t]={styleName:"New Style ".concat(Object.keys(i).length+1)},o(a,t)},variant:"contained",children:"Add Style"})})]}),i&&r&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)($e,{config:[{property:"styleName",type:We}].concat(Object(J.a)(zn[a].styleProperties)),properties:i[r],setProp:function(e){var t=Object.assign({},i[r],{customId:Math.random()});e(t),i[r]=t,L.b.update()}}),Object(c.jsx)(ve.a,{onClick:function(e){var t=Object.keys(i),n=t.indexOf(r),c="";delete i[r],n>0?c=t[n-1]:t.length&&(c=t[1]),o(a,c)},variant:"contained",children:"Delete Style"})]})]})})})};function Fn(){return Un.apply(this,arguments)}function Un(){return(Un=Object(i.a)(o.a.mark((function e(){var t,n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n={},console.groupCollapsed("Loading Custom Components"),console.log(U.a),console.groupEnd(),a=Object(we.a)(U.a.customComponents),e.prev=6,c=function(){var e=r.value;if(!e.url)return"continue";var a=new Promise((function(t){console.log("Loading custom component ".concat(e.url));var a=document.createElement("script");a.type="text/javascript",a.src=e.url,a.onload=function(){t()},a.onerror=function(a){console.log(a),n[e.url]=a,t()},document.head.append(a)}));t.push(a)},a.s();case 9:if((r=a.n()).done){e.next=15;break}if("continue"!==c()){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.next=25,Promise.all(t);case 25:case"end":return e.stop()}}),e,null,[[6,17,20,23]])})))).apply(this,arguments)}var Ln="\n\n// You may wish to move each of the following to its own file\n\ngame.configure = (settings) => {\n  // Update any game settings here\n  // settings.tickInterval = 5000\n}\n\ngame.initialize = (loadedGameData) => {\n  // Code executed when the application starts up\n  game.data = new GameData(loadedGameData);\n}\n\ngame.initializeGameData = () => {\n  // Code executed when the resetting the game data\n  game.data = new GameData({});\n  game.update();\n}\n\ngame.tick = () => {\n  // The main function to handle game logic\n};\n\n// Define actions using game.actions ...\n\ngame.actions.buttonClick = () => {\n  game.data.counter++;\n  game.update();\n}\n",Wn="\n\nclass GameData {\n  constructor(data) {\n    this._updateData(data);\n\n    // Set the data\n    for (const property in data) {\n      this[property] = data[property];\n    }\n  }\n\n  _updateData() {\n    // Use this to update game data as changes are made\n    if (!this.counter) {\n      this.counter = 0;\n    }\n  }\n\n  // Can use getters as well for use with variableText\n}\n";function Kn(){localStorage.lastGameId=Object(Rn.a)(),U.a.gameConfig={id:localStorage.lastGameId,name:"New Game",codeFiles:[],customStyles:{}},Object(W.a)("main","//main\n"+Ln),Object(W.a)("gameData","//gameData\n"+Wn)}function qn(e){for(var t in e){var n=X.components[t],a=e[t];n&&a&&(n.baseStyle=Object(x.a)(Object(x.a)({},n.baseStyle),a))}}function Jn(){return(Jn=Object(i.a)(o.a.mark((function e(t){var n,a,r,c,i,s,l,u,d,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.load(localStorage.lastGameId);case 2:for(n=e.sent,a=JSON.parse(n.layout),r={},c=0,i=Object.keys(a);c<i.length;c++)if(s=i[c],a[s].type.resolvedName!==t)r[s]=a[s];else{l=Object(we.a)(Object.values(a));try{for(l.s();!(u=l.n()).done;)d=u.value,(p=d.nodes.indexOf(s))>=0&&d.nodes.splice(p,1)}catch(o){l.e(o)}finally{l.f()}}return n.layout=JSON.stringify(r),e.next=9,Z.a.save(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hn(e){for(var t=JSON.parse(e),n=[],a=function(){var e=o[r];if("ROOT"===e)return"continue";var a=t[e].type.resolvedName;if(!X.components[a]){var c={message:"Unknown component ".concat(a),resolve:function(){!function(e){Jn.apply(this,arguments)}(a)}};n.push(c)}},r=0,o=Object.keys(t);r<o.length;r++)a();return n}function Vn(e){return $n.apply(this,arguments)}function $n(){return($n=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.load(t);case 2:return n=e.sent,e.abrupt("return",Qn(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return U.a.customComponents=t.customComponents||[],e.abrupt("return");case 3:U.a.customComponents=[];case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e){return Zn.apply(this,arguments)}function Zn(){return(Zn=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.load(t);case 2:return n=e.sent,e.abrupt("return",ea(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e){return ta.apply(this,arguments)}function ta(){return(ta=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(t.baseStyles&&qn(t.baseStyles),!(n=Hn(t.layout)).length){e.next=5;break}return e.abrupt("return",{errors:n});case 5:return U.a.gameConfig=t,console.debug("Game data loaded"),e.abrupt("return",{});case 10:return console.warn("Starting new game data"),Kn(),e.next=14,ee();case 14:return e.abrupt("return",{});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(){return aa.apply(this,arguments)}function aa(){return(aa=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn();case 2:console.groupCollapsed("Custom Components"),console.log(Object.keys(X.components).join("\n")),console.log(X.components),console.groupEnd();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){return oa.apply(this,arguments)}function oa(){return(oa=Object(i.a)(o.a.mark((function e(){var t,n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.init();case 2:if(!L.b.urlParams.gameConfig){e.next=16;break}return L.b.state.mode="play",e.next=6,yn.a.get(L.b.urlParams.gameConfig);case 6:return n=e.sent.data,a=atob(n),r=JSON.parse(a),Qn(c=r.gameConfig),na(),e.next=13,ea(c);case 13:t=e.sent.errors,e.next=22;break;case 16:return e.next=18,Vn(localStorage.lastGameId);case 18:return na(),e.next=21,Xn(localStorage.lastGameId);case 21:t=e.sent.errors;case 22:if(!t){e.next=24;break}return e.abrupt("return",{errors:t});case 24:return W.c.setUpdateUIFunction(L.b.update),e.next=27,Object(W.b)();case 27:return e.abrupt("return",{});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){var e=K.get("localSettings",void 0);e&&(console.groupCollapsed("Stored Local Settings"),console.log(JSON.stringify(e,null,2)),L.b.state.localSettings=Object.assign(L.b.state.localSettings,e),console.groupEnd())}();var ca=function(e){Object(O.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ready:!1,errors:[],showCustomComponentsDialog:!1},e.update=function(){e.setState({})},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.b.update=this.update,L.b.enqueueSnackbar=this.props.enqueueSnackbar,e.next=4,ra();case 4:t=e.sent,(n=t.errors)?this.setState({errors:n}):(this.setState({ready:!0}),Object(W.d)());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderPlay",value:function(){return Object(c.jsx)(Jt,{})}},{key:"renderEditRoutes",value:function(){return Object(c.jsxs)(S.d,{children:[Object(c.jsx)(S.b,{path:"/edit",render:function(){return Object(c.jsx)(qt,{})}}),Object(c.jsx)(S.b,{path:"/code",render:function(){return Object(c.jsx)(re,{})}}),Object(c.jsx)(S.b,{path:"/play",render:function(){return Object(c.jsx)(Jt,{})}}),Object(c.jsx)(S.b,{path:"/documentation",render:function(){return Object(c.jsx)(Oe,{})}}),Object(c.jsx)(S.b,{path:"/",children:Object(c.jsx)(S.a,{to:"/edit"})})]})}},{key:"render",value:function(){var e=this,t=this.state.errors;return t.length?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:["There was an error loading your configured custom components",t.map((function(e){var t=e.message,n=e.resolve;return Object(c.jsxs)("div",{children:['"',t,'"',Object(c.jsx)(ve.a,{variant:"contained",onClick:function(){n()},children:"Remove References"})]},e.message)}))]}),Object(c.jsxs)("div",{children:["Option one is to fix URL of the missing component",this.state.showCustomComponentsDialog&&Object(c.jsx)(kn,{onClose:function(){e.setState({showCustomComponentsDialog:!1})}}),Object(c.jsx)(ve.a,{variant:"contained",onClick:function(){e.setState({showCustomComponentsDialog:!0})},children:"Manage Custom Components"})]}),Object(c.jsx)("div",{children:"Option two is to remove all instances of the component that is causing the issue"})]}):this.state.ready?Object(c.jsx)(L.a.Provider,{value:{state:L.b.state,editorQuery:L.b.editorQuery,enqueueSnackbar:L.b.enqueueSnackbar,urlParams:L.b.urlParams,update:this.update},children:Object(c.jsx)(le.a,{basename:"/idling-engine",children:Object(c.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[Object(c.jsx)(An,{}),Object(c.jsx)(Bn,{}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"absolute",width:"100%",height:"100%"},children:[Object(c.jsx)($t,{}),Object(c.jsx)("div",{style:{position:"relative",flexGrow:1},children:"play"===L.b.state.mode?this.renderPlay():this.renderEditRoutes()})]})]})})}):null}}]),n}(s.Component),ia=Object(p.b)(ca),sa=(n(1012),n(1082)),la=n(1083);window.idlingEngineCore=a,window.craftjs=H;var ua=l.a.createRef(),da=function(e){return function(){ua.current.closeSnackbar(e)}};Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){var n="IndexedBD not available. Unsuppored in FF private browsing.";try{var a=indexedDB.open("isAvailable");a.onerror=function(){t(n)},a.onsuccess=function(){e()}}catch(r){t(n)}}));case 3:d.a.render(Object(c.jsxs)(sa.a,{theme:f,children:[Object(c.jsx)(la.a,{}),Object(c.jsx)(p.a,{maxSnack:5,ref:ua,autoHideDuration:null,action:function(e){return Object(c.jsx)(ve.a,{onClick:da(e),color:"secondary",children:"Dismiss"})},children:Object(c.jsx)(ia,{})})]}),document.getElementById("root")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d.a.render(Object(c.jsx)("div",{children:e.t0}),document.getElementById("root"));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(26),r=n(188),o=new(n.n(r).a);!function(){var e=console;e._customized||(e.co=Object(a.a)({},console),e._customized=!0);var t=e.co,n={DEBUG:1,INFO:2,WARN:3,ERROR:4};e.logLevels=n,e.logLevel=n.DEBUG,e.debug=function(){if(e.logLevel<=n.DEBUG){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.debug.apply(t,["DEBUG"].concat(r))}},e.info=function(){if(e.logLevel<=n.INFO){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.info.apply(t,["INFO"].concat(r))}},e.warn=function(){if(e.logLevel<=n.WARN){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];t.warn.apply(t,["WARN"].concat(r))}},e.error=function(){if(e.logLevel<=n.ERROR){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];t.error.apply(t,["ERROR"].concat(r)),o.emit("error",r)}}}();console},14:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return game})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addCodeFile})),__webpack_require__.d(__webpack_exports__,"b",(function(){return executeCode})),__webpack_require__.d(__webpack_exports__,"d",(function(){return startGameTimers}));var _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_lib_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),uuid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1018),_lib_log__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(136),_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(24),game={running:!1,settings:{tickInterval:1e3},data:{},actions:{},dataSources:{},visibilitySources:{},configure:function(e){console.log("game.configure not defined")},isInitialized:!1,isGameDataInitialized:!1,_initialize:function(e){console.log("game.initialize not defined")},get initialize(){return this._initialize},set initialize(e){var t=this;this._initialize=function(n){console.log("Initializing Game"),t.isInitialized=!0,e(n)}},_initializeGameData:function(){console.log("game.initializeGameData not defined")},get initializeGameData(){return this._initializeGameData},set initializeGameData(e){var t=this;this._initializeGameData=function(){console.log("Initializing Game Data"),t.isInitialized=!0,e()}},_tick:function(){console.log("game.tick not defined")},get tick(){return this._tick},set tick(e){this._tick=function(){(game.running||_lib_context__WEBPACK_IMPORTED_MODULE_3__.b.state.localSettings.flags.tickWhileEditing)&&e()}},update:function(){console.log("game.update not defined")},setUpdateUIFunction:function(e){game.update=e}};function addCodeFile(e,t){_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles.push({id:Object(uuid__WEBPACK_IMPORTED_MODULE_5__.a)(),name:e,code:t})}var fileLineCounts=[];function executeCode(){return _executeCode.apply(this,arguments)}function _executeCode(){return _executeCode=Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _callee2(){var files,finalCode,_iterator,_step,file,lines,numberWidth,loadedGameData;return _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:files=_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles,fileLineCounts=[],finalCode="",_iterator=Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(files);try{for(_iterator.s();!(_step=_iterator.n()).done;)file=_step.value,finalCode+=file.code+"\n",fileLineCounts.push(file.code.split("\n").length)}catch(err){_iterator.e(err)}finally{_iterator.f()}return lines=finalCode.split("\n"),numberWidth=Math.floor(Math.log(lines.length)),console.groupCollapsed("GAME CODE"),console.log(lines.map((function(e,t){return"".concat((t+1).toString().padEnd(numberWidth)," ").concat(e)})).join("\n")),console.groupEnd(),_context2.prev=10,eval(finalCode),_context2.next=14,_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__.a.loadGameData(_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.id);case 14:loadedGameData=_context2.sent,console.groupCollapsed("Loaded Game Data"),console.log(loadedGameData),console.groupEnd(),game.isInitialized||game.initialize(loadedGameData),game.configure(game.settings),startTicking(),_context2.next=27;break;case 23:_context2.prev=23,_context2.t0=_context2.catch(10),_context2.t0.message="GAME SCRIPT ERROR: "+_context2.t0.message,console.error(_context2.t0);case 27:case"end":return _context2.stop()}}),_callee2,null,[[10,23]])}))),_executeCode.apply(this,arguments)}function handleError(e){var t,n;if((null===(t=e[0])||void 0===t?void 0:t.message)&&(null===(n=e[0])||void 0===n?void 0:n.stack)){for(var a=e[0],r=a.message,o=null,c=a.stack.split("\n"),i=0;i<2;i++){var s=c[i];if(s.includes("eval")){var l=s.match(/(\d+):(\d+)/g);if(l.length){var u=l[l.length-1].split(":");o=[parseInt(u[0]),parseInt(u[1])];break}}}if(o){var d=0;for(var p in fileLineCounts){var m=fileLineCounts[p];if(o[0]<d+m){var b=o[0]-d,j=o[1],f=_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.codeFiles[p].name;r+=" (Line: ".concat(b,", Col: ").concat(j,') in "').concat(f,'"');break}d+=m}}_lib_context__WEBPACK_IMPORTED_MODULE_3__.b.enqueueSnackbar(r,{variant:"error",preventDuplicate:!0})}}function startGameTimers(){setInterval((function(){_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__.a.saveGameData(_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.id,game.data)}),5e3)}setInterval((function(){_lib_GameManager__WEBPACK_IMPORTED_MODULE_7__.a.saveGameData(_data__WEBPACK_IMPORTED_MODULE_4__.a.gameConfig.id,game.data)}),5e3);var runningInterval=null,ticking=!1;function startTicking(){runningInterval&&clearInterval(runningInterval),runningInterval=setInterval(Object(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){return _home_owner_code_idling_engine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ticking){e.next=5;break}return ticking=!0,e.next=5,game.tick();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:ticking=!1;case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),game.settings.tickInterval)}_lib_log__WEBPACK_IMPORTED_MODULE_6__.a.on("error",handleError),window.game=game},204:function(e){e.exports=JSON.parse('{"name":"idling-engine","version":"1.0.12","dependencies":{"@craftjs/core":"0.1.0-beta.13","@material-ui/core":"^4.11.2","@material-ui/icons":"^4.11.2","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/jest":"^26.0.19","@types/node":"^12.19.11","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","ace-builds":"^1.4.12","axios":"^0.21.1","concurrently":"^5.3.0","events":"^3.2.0","idb":"^6.0.0","material-ui-color-picker":"^3.5.1","notistack":"^1.0.3","react":"^17.0.1","react-ace":"^9.2.1","react-contenteditable":"^3.3.5","react-dom":"^17.0.1","react-markdown":"^5.0.3","react-router-dom":"^5.2.0","react-scripts":"4.0.1","react-syntax-highlighter":"^15.4.3","typescript":"^4.1.3","uuid":"^8.3.2","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-router-dom":"^5.1.6","@types/react-syntax-highlighter":"^13.5.0","@types/uuid":"^8.3.0","gh-pages":"^3.1.0"},"homepage":"https://zephren.github.io/idling-engine"}')},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),r=n.n(a),o=n(13),c=n(49),i=n(50),s=n(218),l=new(function(){function e(){var t=this;Object(c.a)(this,e),this.db=void 0,this.setReady=void 0,this.ready=new Promise((function(e){t.setReady=e}))}return Object(i.a)(e,[{key:"init",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)("GameConfig",10,{upgrade:this._upgrade,blocked:this._blocked,blocking:this._blocking,terminated:this._terminated});case 2:(t=e.sent).onerror=function(e){console.error("Database error: "+e.target.errorCode)},this.db=t,this.setReady(),console.debug("DATABASE",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_upgrade",value:function(e,t,n,a){console.debug("UPGRADE DATABASE",10),e.objectStoreNames.contains("games")||e.createObjectStore("games",{keyPath:"id"}),e.objectStoreNames.contains("gameData")||e.createObjectStore("gameData",{keyPath:"id"})}},{key:"_blocked",value:function(){}},{key:"_blocking",value:function(){}},{key:"_terminated",value:function(){}},{key:"getAll",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready;case 2:return t=this.db.transaction(["games"],"readwrite"),n=t.objectStore("games"),e.next=6,n.getAll();case 6:return a=e.sent,e.next=9,t.done;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready;case 2:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=6,a.put(t);case 6:return e.next=8,n.done;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=8,a.get(t);case 8:return o=e.sent,e.next=11,n.done;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["games"],"readwrite"),a=n.objectStore("games"),e.next=8,a.delete(t);case 8:return e.next=10,n.done;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveGameData",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n.id=t,a=this.db.transaction(["gameData"],"readwrite"),o=a.objectStore("gameData"),e.next=9,o.put(n);case 9:return e.next=11,a.done;case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadGameData",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ready;case 4:return n=this.db.transaction(["gameData"],"readwrite"),a=n.objectStore("gameData"),e.next=8,a.get(t);case 8:return o=e.sent,e.next=11,n.done;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());window.resetGameStore=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to reset the game store?")){e.next=3;break}return e.abrupt("return");case 3:return t=l.db.transaction(["games"],"readwrite"),n=t.objectStore("games"),e.next=7,n.clear();case 7:return e.next=9,t.done;case 9:window.location.reload();case 10:case"end":return e.stop()}}),e)}))),window.setGameLayout=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.load(t);case 2:return(a=e.sent).layout=n,e.next=6,l.save(a);case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),o={state:{localSettings:{flags:{highlightComponents:!0,previousHighlightComponents:!0,styleDrawerOpen:!1,tickWhileEditing:!1},lastCodeFile:"",styleDrawerComponentName:"",styleDrawerStyleId:""},optionsDrawerOpen:!1,mode:""},urlParams:{gameConfig:new URLSearchParams(window.location.search).get("gameConfig")},editorQuery:null,enqueueSnackbar:function(){},update:function(){throw new Error("Update function not defined")}},c=r.a.createContext(o);window.store=o}},[[1013,1,2]]]);
//# sourceMappingURL=main.99690255.chunk.js.map
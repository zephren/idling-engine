(this.webpackJsonpcraftjs=this.webpackJsonpcraftjs||[]).push([[0],{15:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return game})),__webpack_require__.d(__webpack_exports__,"a",(function(){return executeCode}));var _home_owner_code_craftjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39),_lib_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_lib_dataStorage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30),_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19),game={running:!0,settings:{tickInterval:1e3},data:{},actions:{},conditionals:{},dataSources:{},visibilitySources:{},configure:function(e){console.log("game.configure not defined")},isInitialized:!1,isGameDataInitialized:!1,_initialize:function(e){console.log("game.initialize not defined")},get initialize(){return this._initialize},set initialize(e){var t=this;this._initialize=function(n){console.log("Initializing Game"),t.isInitialized=!0,e(n)}},_initializeGameData:function(){console.log("game.initializeGameData not defined")},get initializeGameData(){return this._initializeGameData},set initializeGameData(e){var t=this;this._initializeGameData=function(){console.log("Initializing Game Data"),t.isInitialized=!0,e()}},_tick:function(){console.log("game.tick not defined")},get tick(){return this._tick},set tick(e){this._tick=function(){(game.running||_lib_context__WEBPACK_IMPORTED_MODULE_1__.b.state.localSettings.flags.tickWhileEditing)&&e()}},update:function(){console.log("game.update not defined")},setUpdateUIFunction:function(e){game.update=e}},currentTimeout=null;function tick(){currentTimeout=setTimeout((function(){try{game.tick()}catch(e){console.error(e)}tick()}),game.settings.tickInterval)}function executeCode(){var files=_data__WEBPACK_IMPORTED_MODULE_3__.a.gameData.codeFiles,finalCode="",_iterator=Object(_home_owner_code_craftjs_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(files),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var file=_step.value;finalCode+=file.code+"\n\n"}}catch(err){_iterator.e(err)}finally{_iterator.f()}var lines=finalCode.split("\n"),numberWidth=Math.floor(Math.log(lines.length));console.log(lines.map((function(e,t){return"".concat((t+1).toString().padEnd(numberWidth)," ").concat(e)})).join("\n"));try{currentTimeout&&clearTimeout(currentTimeout),eval(finalCode);var loadedGameData=_lib_dataStorage__WEBPACK_IMPORTED_MODULE_2__.a.get("savedGameData",{});console.log("loadedGameData",loadedGameData),game.isInitialized||game.initialize(loadedGameData),game.configure(game.settings),tick()}catch(err){err.message="GAME SCRIPT ERROR: "+err.message,console.error(err)}}setInterval((function(){_lib_dataStorage__WEBPACK_IMPORTED_MODULE_2__.a.set("savedGameData",game.data)}),5e3),window.game=game},163:function(e){e.exports=JSON.parse('{"name":"craftjs","version":"1.0.9","private":true,"dependencies":{"@craftjs/core":"0.1.0-beta.13","@material-ui/core":"^4.11.2","@material-ui/icons":"^4.11.2","@testing-library/jest-dom":"^5.11.6","@testing-library/react":"^11.2.2","@testing-library/user-event":"^12.6.0","@types/jest":"^26.0.19","@types/node":"^12.19.11","@types/react":"^16.14.2","@types/react-dom":"^16.9.10","ace-builds":"^1.4.12","axios":"^0.21.1","material-ui-color-picker":"^3.5.1","react":"^17.0.1","react-ace":"^9.2.1","react-contenteditable":"^3.3.5","react-dom":"^17.0.1","react-markdown":"^5.0.3","react-router-dom":"^5.2.0","react-scripts":"4.0.1","typescript":"^4.1.3","uuid":"^8.3.2","web-vitals":"^0.2.4"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm version patch && git push && npm run build","deploy":"gh-pages -d build","sync":"git add . && git commit -m \'Sync\' && git push"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-router-dom":"^5.1.6","@types/uuid":"^8.3.0","gh-pages":"^3.1.0"},"homepage":"https://zephren.github.io/idling-engine"}')},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={gameData:null,customComponents:[]}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(70),r=n(71),o=new(function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"get",value:function(e,t){return localStorage[e]?JSON.parse(localStorage[e]):t}},{key:"set",value:function(e,t){localStorage[e]=JSON.stringify(t)}},{key:"delete",value:function(e){delete localStorage[e]}}]),e}())},718:function(e,t,n){},719:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(17),o=n.n(r),c=n(45),i=n.n(c),s=n(64),l=n(70),u=n(71),p=n(173),d=n(172),j=n(0),m=n.n(j),b=n(26),f={DEBUG:1,INFO:2,WARN:3,ERROR:4},h=console,O=Object(b.a)({},console);h.logLevels=f,h.logLevel=f.DEBUG,h.debug=function(){if(h.logLevel<=f.DEBUG){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.debug.apply(O,["DEBUG"].concat(t))}},h.info=function(){if(h.logLevel<=f.INFO){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.info.apply(O,["INFO"].concat(t))}},h.warn=function(){if(h.logLevel<=f.WARN){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.warn.apply(O,["WARN"].concat(t))}},h.error=function(){if(h.logLevel<=f.ERROR){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];O.error.apply(O,["ERROR"].concat(t))}};console;var g=n(18),x=n(150),y=n.n(x),v=(n(200),n(615),n(616),n(151)),C=n.n(v),_=n(22),S=n(752),k=n(754),w=n(756),N=n(722),D=n(757),I=n(758),P=n(792),E=n(762),G=n(795),z=n(158),F=n.n(z),T=n(157),A=n.n(T),R=n(19),B=n(8),M=n(15),U=n(790),W="\n\n// You may wish to move each of the following to its own file\n\ngame.configure = (settings) => {\n  // Update any game settings here\n  // settings.tickInterval = 5000\n}\n\ngame.initialize = (loadedGameData) => {\n  // Code executed when the application starts up\n  game.data = new GameData(loadedGameData);\n}\n\ngame.initializeGameData = () => {\n  // Code executed when the resetting the game data\n  game.data = new GameData({});\n  game.update();\n}\n\ngame.tick = () => {\n  // The main function to handle game logic\n};\n\n// Define actions using game.actions ...\n// Define conditionals using game.conditionals ...\n\ngame.actions.buttonClick = () => {\n  game.data.counter++;\n  game.update();\n}\n",L="\n\nclass GameData {\n  constructor(data) {\n    this._updateData(data);\n\n    // Set the data\n    for (const property in data) {\n      this[property] = data[property];\n    }\n  }\n\n  _updateData() {\n    // Use this to update game data as changes are made\n    if (!this.counter) {\n      this.counter = 0;\n    }\n  }\n\n  // Can use getters as well for use with variableText\n}\n",V=n(30);function H(){V.a.set("localSettings",B.b.state.localSettings)}var J={},K=n(74),q=n(10),Q=Object(S.a)((function(e){return{componentEditing:{boxShadow:"inset 0em 0em 0em 2px rgba(255, 50, 50, 1)",minHeight:"5px",minWidth:"5px",padding:"10px!important"},componentSelected:{boxShadow:"inset 0em 0em 0em 2px green"}}}));function Y(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return[].concat(Object(K.a)(a),[e&&B.b.state.localSettings.flags.highlightComponents?n.componentEditing:"",t?n.componentSelected:""]).join(" ")}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalClasses,n=void 0===t?[]:t,a=Object(j.useContext)(B.a),r=Object(q.e)((function(e){return{selected:e.events.selected}})),o=r.connectors,c=o.connect,i=o.drag,s=r.selected,l=Object(q.d)((function(e){return{enabled:e.options.enabled}})),u=l.enabled,p=Q(),d=Y(u,s,p,n),m=function(e){return c(i(e))};return{refFn:m,selected:s,enabled:u,componentClassName:d,store:a}}var X=new(function(){function e(){Object(l.a)(this,e),this.components={}}return Object(u.a)(e,[{key:"addComponent",value:function(e){this.components[e.componentName]={componentName:e.componentName,component:e}}}]),e}()),Z={};function ee(e){console.log("Registering custom component ".concat(e.componentName)),Z[e.componentName]=e,X.addComponent(e)}function te(){var e=B.b.editorQuery;if(e){console.debug("Saving game data");var t={};for(var n in Z){var a=Z[n];t[n]=a.baseStyle}var r=e.serialize();"{}"===r&&(r=null),R.a.gameData={id:Math.random(),layout:r,baseStyles:t,customStyles:J,customComponents:R.a.customComponents,codeFiles:R.a.gameData.codeFiles},V.a.set("gameData",R.a.gameData)}else console.error("store.editorQuery not set")}window.registerCustomComponent=ee,window.useSetupComponent=$;var ne=Object(S.a)((function(e){return{fileName:{fontSize:e.typography.fontSize}}}));function ae(){var e=Object(_.g)(),t=ne(),n=Object(j.useState)(!1),r=Object(g.a)(n,2),o=r[0],c=r[1],i=Object(j.useState)(!1),s=Object(g.a)(i,2),l=s[0],u=s[1],p=Object(j.useState)({}),d=Object(g.a)(p,2),m=d[0],f=d[1];Object(j.useContext)(B.a);var h=R.a.gameData.codeFiles;function O(){te()}function x(){!function(e){h=e,R.a.gameData.codeFiles=e}(h.filter((function(e,t){return!m[t]}))),f({})}function v(e,t){h.push({id:Object(U.a)(),name:e,code:t})}return Object(j.useEffect)((function(){var e=setInterval((function(){O()}),1e3);return function(){clearInterval(e),O(),Object(M.a)(),M.b.initialize(M.b.data)}}),[]),0===h.length&&(v("main","//main\n"+W),v("gameData","//gameData\n"+L)),Object(a.jsxs)(k.a,{container:!0,style:{position:"absolute",height:"100%",width:"100%"},children:[Object(a.jsx)(k.a,{item:!0,sm:2,style:{position:"relative"},children:Object(a.jsxs)(w.a,{dense:!0,style:{overflowY:"auto",position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:[h.map((function(n,r){var i=e.location.pathname.includes(n.id);return Object(a.jsxs)(N.a,{style:{cursor:"pointer"},selected:i,onClick:function(){!function(t,n){if(l){var a=Object(b.a)({},m);a[n]=!a[n],f(a)}else B.b.state.localSettings.lastCodeFile=t,H(),e.push("/code/".concat(t))}(n.id,r)},children:[l&&Object(a.jsx)(D.a,{children:m[r]?Object(a.jsx)(A.a,{}):Object(a.jsx)(F.a,{})}),i?Object(a.jsx)(I.a,{primary:Object(a.jsx)(P.a,{value:n.name,onChange:function(e){n.name=e.target.value,c(!o)},size:"small",inputProps:{className:t.fileName}})}):Object(a.jsx)(I.a,{primary:n.name})]},n.id)})),Object(a.jsx)(E.a,{}),Object(a.jsx)(N.a,{button:!0,onClick:function(){var e="New File ".concat(h.length);v(e,"//".concat(e)),c(!o)},children:Object(a.jsx)(I.a,{primary:"+ New File"})}),Object(a.jsx)(E.a,{}),Object(a.jsxs)(N.a,{children:[Object(a.jsx)(I.a,{primary:"Delete Files"}),Object(a.jsx)(G.a,{onChange:function(e){l&&x(),u(e.target.checked)},checked:l})]}),Object(a.jsx)(N.a,{children:Object(a.jsx)(I.a,{primary:"Beautify",secondary:"Ctrl + Shift + B"})})]})}),Object(a.jsx)(k.a,{item:!0,sm:10,style:{background:"red",position:"relative"},children:Object(a.jsxs)(_.d,{children:[h.map((function(e){return Object(a.jsx)(_.b,{path:"/code/".concat(e.id),render:function(){return Object(a.jsx)("div",{style:{position:"absolute",width:"100%",top:"0px",bottom:"0px"},children:Object(a.jsx)(y.a,{mode:"javascript",theme:"monokai",onChange:function(t){e.code=t},name:"Code Editor",editorProps:{$blockScrolling:!0},style:{width:"100%",height:"100%",fontSize:"1.1em"},value:e.code,tabSize:2,commands:C.a.commands,focus:!0})})}},e.id)})),Object(a.jsx)(_.b,{path:"/code",children:Object(a.jsx)(_.a,{to:"/code/".concat(h[0].id)})})]})})]})}var re=n(764),oe=n(120),ce=n(78),ie=n.n(ce),se=n(27),le=n(791);function ue(e){var t=e.parts,n=[];return Object(a.jsx)(le.a,{"aria-label":"breadcrumb",children:t.map((function(e,t){var r=Object(g.a)(e,2),o=r[0],c=r[1];return c&&n.push(c),Object(a.jsx)(se.c,{to:"/".concat(n.join("/")),children:o},n.join(""))}))})}function pe(){return Object.keys(X.components).map((function(e){var t=X.components[e];return"[".concat(t.componentName,"](/components/").concat(t.componentName,")")}))}function de(e,t){return"[".concat(e,"](").concat(t,")")}var je={link:function(e){return Object(a.jsx)(se.c,{to:e.href,children:e.children})}},me=Object(S.a)((function(){return{paper:{padding:"1em"}}}));function be(){var e=me();return console.log("Documentation render"),Object(a.jsx)(re.a,{children:Object(a.jsx)(oe.a,{className:e.paper,children:Object(a.jsx)(se.a,{basename:"/idling-engine/documentation",children:Object(a.jsx)("div",{className:"markdown-container",children:Object(a.jsxs)(_.d,{children:[Object(a.jsx)(_.b,{path:"/components/:componentName",render:function(e){var t=X.components[e.match.params.componentName].component;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{parts:[["Documentation",""],["Components","components"],[t.componentName,t.componentName]]}),Object(a.jsx)(ie.a,{plugins:[],children:t.documentation.md,renderers:je})]})}}),Object(a.jsx)(_.b,{path:"/components",render:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{parts:[["Documentation",""],["Components","components"]]}),Object(a.jsx)(ie.a,{plugins:[],children:"\n# Components\n".concat(pe().join("\n\n"),"\n"),renderers:je})]})}}),Object(a.jsx)(_.b,{path:"/game",render:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{parts:[["Documentation",""],["Game","game"]]}),Object(a.jsx)(ie.a,{plugins:[],children:"\n# Game\ngame stuff\n",renderers:je})]})}}),Object(a.jsx)(_.b,{path:"/customComponents",render:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{parts:[["Documentation",""],["Custom Components","customComponents"]]}),Object(a.jsx)(ie.a,{plugins:[],children:"\n# Custom Components\n...how to implement\n",renderers:je})]})}}),Object(a.jsx)(_.b,{path:"/",render:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ue,{parts:[["Documentation",""]]}),Object(a.jsx)(ie.a,{plugins:[],children:"\n# Idling Engine\n\n## Game Config/Code\n\nThis section details the properties of the game object and their configuration.\n\n".concat(de("More >","/game"),"\n\n## Custom Components\n\nIf you are daring enough, this section explains how to implment your own custom components.\n\n").concat(de("More >","/customComponents"),"\n\n## Components\n").concat(pe().join("\n\n"),"\n  "),renderers:je})]})}})]})})})})})}var fe=n(787),he=n(79),Oe=n(766),ge=n(797),xe=n(174),ye=n(39),ve=n(767),Ce=n(768),_e=n(769),Se=n(770),ke=n(771),we=function(e){var t=e.component;return e.items.map((function(e,n){return t(e,n)}))},Ne=n(763),De=n(765),Ie=n(794),Pe=n(761),Ee=n(788),Ge=function(e){var t,n=e.value,r=e.items,o=e.label,c=e.onChange,i=[],s=Object(ye.a)(r);try{for(s.s();!(t=s.n()).done;){var l=t.value,u="",p=null;"string"===typeof l?(u=l,p=l):(u=l.name,p=l.value),i.push(Object(a.jsx)(De.a,{value:p,children:u},u))}}catch(j){s.e(j)}finally{s.f()}var d=null;return o&&(d=Object(a.jsx)(Ie.a,{shrink:!0,children:o})),Object(a.jsxs)(Pe.a,{fullWidth:!0,children:[d,Object(a.jsx)(Ee.a,{value:n||"",onChange:c,children:i})]})},ze=n(101),Fe=n.n(ze),Te=function(e){var t=e.property,n=e.value,r=e.itemsFn,o=e.setProp;return Object(a.jsxs)(fe.a,{display:"flex",alignItems:"flex-end",children:[Object(a.jsx)(fe.a,{flexGrow:1,children:Object(a.jsx)(Ge,{value:n||"",items:r(),onChange:function(e){o((function(n){return n[t]=e.target.value}))}})}),Object(a.jsx)(fe.a,{children:Object(a.jsx)(Ne.a,{size:"small",onClick:function(){o((function(e){return e[t]=null}))},children:Object(a.jsx)(Fe.a,{})})})]})},Ae=(n(796),function(e){var t=e.property,n=e.value,r=e.setProp;return Object(a.jsx)(P.a,{fullWidth:!0,value:n||"",onChange:function(e){r((function(n){n[t]=e.target.value}))}})}),Re=n(159),Be=n.n(Re);function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.b.state.localSettings.flags.styleDrawerOpen=!0,B.b.state.localSettings.flags.previousHighlightComponents=B.b.state.localSettings.flags.highlightComponents,B.b.state.localSettings.flags.highlightComponents=!1,e.componentName&&(B.b.state.localSettings.styleDrawerComponentName=e.componentName,B.b.state.localSettings.styleDrawerStyleId=e.styleId||"",J[e.componentName]=J[e.componentName]||{}),H(),B.b.update()}var Ue=function(e){var t=e.property,n=e.value,r=e.componentName,o=e.setProp;return J[r]&&0!==Object.keys(J[r]).length?Object(a.jsxs)(fe.a,{display:"flex",alignItems:"flex-end",children:[Object(a.jsx)(fe.a,{flexGrow:1,children:Object(a.jsx)(Ge,{value:n||"",items:Object.keys(J[r]).map((function(e){return{value:e,name:J[r][e].styleName}})),onChange:function(e){o((function(n){return n[t]=e.target.value}))}})}),Object(a.jsx)(fe.a,{children:Object(a.jsx)(Ne.a,{size:"small",onClick:function(){o((function(e){return e[t]=null}))},children:Object(a.jsx)(Fe.a,{})})}),Object(a.jsx)(fe.a,{children:Object(a.jsx)(Ne.a,{size:"small",onClick:function(){Me({componentName:r,styleId:n})},children:Object(a.jsx)(Be.a,{})})})]}):Object(a.jsx)(Oe.a,{fullWidth:!0,variant:"contained",onClick:function(){Me({componentName:r})},children:"Define a Style"})},We=function(e){var t=e.config,n=e.properties,r=e.setProp,o=[];if(!n)return console.error(t,new Error),null;var c,i=Object(ye.a)(t);try{for(i.s();!(c=i.n()).done;){var s=c.value,l=s.property,u=Object(xe.a)(s,["property"]),p=n[l];o.push(Object(a.jsxs)(ve.a,{children:[Object(a.jsx)(Ce.a,{component:"td",scope:"row",children:l}),Object(a.jsx)(Ce.a,{style:{width:"1em"}}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(s.type,Object(b.a)({property:l,value:p,setProp:r},u))})]},l))}}catch(d){i.e(d)}finally{i.f()}return Object(a.jsx)(_e.a,{children:Object(a.jsx)(Se.a,{size:"small",padding:"none",children:Object(a.jsx)(ke.a,{children:o})})})},Le=function(e){return Object(K.a)(Object.keys(Z).reduce((function(t,n){var a=Z[n];return a.toolboxItem&&t.push(a.toolboxItem(e)),t}),[]))};function Ve(e){B.b.state.localSettings.flags[e]=!B.b.state.localSettings.flags[e],H(),B.b.update()}var He=function(){var e=Object(q.d)(),t=e.connectors,n=e.actions,r=Object(j.useState)(null),o=Object(g.a)(r,2),c=o[0],i=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fe.a,{px:2,py:2,children:Object(a.jsxs)(k.a,{container:!0,direction:"column",spacing:1,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(he.a,{children:"Drag to add"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Highlight components",Object(a.jsx)(G.a,{checked:B.b.state.localSettings.flags.highlightComponents,onChange:function(){Ve("highlightComponents")}})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:["Tick while editing",Object(a.jsx)(G.a,{checked:B.b.state.localSettings.flags.tickWhileEditing,onChange:function(){Ve("tickWhileEditing")}})]})]}),Le(t).map((function(e){return Object(a.jsx)(k.a,{container:!0,direction:"column",item:!0,children:Object(a.jsx)(Oe.a,{ref:e.ref,variant:"contained",onClick:function(){n.selectNode(),i({component:e.component})},children:e.name})},e.name)}))]})}),c?Object(a.jsx)(Ke,{component:c.component}):null]})},Je={margin:{property:"margin",type:Ae},padding:{property:"padding",type:Ae},height:{property:"height",type:Ae}},Ke=function(e){var t=e.component,n=t.baseStyle;if(!n)return null;var r=[];for(var o in n){var c=Je[o];r.push(c)}return Object(a.jsx)(fe.a,{mt:2,px:2,py:2,children:Object(a.jsxs)(k.a,{container:!0,direction:"column",spacing:0,children:[Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(fe.a,{pb:2,children:Object(a.jsxs)(k.a,{container:!0,alignItems:"center",children:[Object(a.jsx)(k.a,{item:!0,xs:!0,children:Object(a.jsx)(he.a,{variant:"subtitle1",children:"Base Component Config"})}),Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(ge.a,{size:"small",color:"primary",label:t.componentName})})]})})}),Object(a.jsx)(We,{config:r,properties:n,setProp:function(e){var a=Object.assign({},n);e(a),t.baseStyle=a,B.b.update()}})]})})},qe=function(){var e=Object(q.d)((function(e,t){var n,a=e.events.selected;return a&&(n={id:a,name:e.nodes[a].data.name,settings:e.nodes[a].related&&e.nodes[a].related.settings,isDeletable:t.node(a).isDeletable()}),{selected:n}})),t=e.actions,n=e.selected;return n?Object(a.jsx)(fe.a,{mt:2,px:2,py:2,children:Object(a.jsxs)(k.a,{container:!0,direction:"column",spacing:0,children:[Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(fe.a,{pb:2,children:Object(a.jsxs)(k.a,{container:!0,alignItems:"center",children:[Object(a.jsx)(k.a,{item:!0,xs:!0,children:Object(a.jsx)(he.a,{variant:"subtitle1",children:"Selected"})}),Object(a.jsx)(k.a,{item:!0,children:Object(a.jsx)(ge.a,{size:"small",color:"primary",label:n.name})})]})})}),n.settings&&m.a.createElement(n.settings),n.isDeletable?Object(a.jsx)(Oe.a,{variant:"contained",color:"default",onClick:function(){t.delete(n.id)},children:"Delete"}):null]})}):null},Qe=n(773),Ye=n(774),$e=function(e){e.property;var t=e.value,n=e.onChange;return Object(a.jsx)(G.a,{checked:t||!1,onChange:n})},Xe={md:"\n# AppBar\n\n## Properties\n\n\n"},Ze=n(789),et=n(772);function tt(e){var t=e.path,n=e.tabs,r=e.className,o=Object(q.e)().connectors.connect,c=Object(_.g)(),i=function(e,t){var n=null;for(var a in t){var r=t[a];if(r.default&&(n=r),e.match(r.path))return[parseInt(a),r]}return n?[-1,n]:[-1,null]}(t,n),s=Object(g.a)(i,2),l=s[0],u=s[1];return-1===l?(u&&c.push(u.to),null):Object(a.jsx)(Ze.a,{ref:o,value:l,onChange:function(e,t){var a=n[t];c.push(a.to)},className:r,children:n.map((function(e){return e.visibilitySource&&!M.b.visibilitySources[e.visibilitySource]()?null:Object(a.jsx)(et.a,{label:e.name,className:r},e.name)}))})}var nt=Object(S.a)((function(e){return{root:{flexGrow:1},spacer:{flexGrow:1},fullHeight:Object(b.a)({},e.mixins.toolbar)}}));function at(e){var t=e.tabs,n=nt(),r=$({additionalClasses:[n.root]}),o=r.refFn,c=r.componentClassName,i=r.store,s=Object(_.g)(),l=Object(j.useState)(!0),u=Object(g.a)(l,2),p=u[0],d=u[1];return Object(a.jsx)("div",{ref:o,className:n.root,onClick:function(){setTimeout((function(){d(!p),i.update()}))},children:Object(a.jsx)(Qe.a,{position:"static",className:c,children:Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(tt,{path:s.location.pathname,tabs:t,className:n.fullHeight}),Object(a.jsx)("div",{className:n.spacer})]})})})}at.componentName="AppBar",at.craft={props:{tabs:[{name:"Tab 1",path:"tab1",to:"/tab1",default:!0},{name:"Tab 2",path:"tab2",to:"/tab2"},{name:"Tab 3",path:"tab3",to:"/tab3"}]},related:{settings:function(){var e=Object(q.e)((function(e){return{props:e.data.props,triggerUpdate:!!e.data.props.triggerUpdate,tabs:e.data.props.tabs}})),t=e.actions.setProp,n=e.triggerUpdate,r=e.tabs,o=Object.keys(M.b.visibilitySources);return Object(a.jsxs)("div",{children:[r.map((function(e,c){return Object(a.jsx)(We,{config:[{type:Ae,property:"name"},{type:Ae,property:"path"},{type:Ae,property:"to"},{type:Te,property:"visibilitySource",itemsFn:function(){return o}},{type:$e,property:"default",onChange:function(){return function(e){var a,o=Object(ye.a)(r);try{for(o.s();!(a=o.n()).done;)a.value.default=!1}catch(c){o.e(c)}finally{o.f()}return e.default=!0,t((function(e){e.triggerUpdate=!n}))}(e)}}],properties:e,setProp:function(a){a(e),t((function(e){e.triggerUpdate=!n}))}},c)})),Object(a.jsx)(Oe.a,{onClick:function(){return r.push({name:"New Tab",path:"",to:""}),t((function(e){return e.triggerUpdate=!n}))},children:"Add Tab"})]})}}},at.documentation=Xe,at.toolboxItem=function(e){return{name:"AppBar",component:at,ref:function(t){return e.create(t,Object(a.jsx)(at,{}))}}},ee(at);function rt(e,t,n){var a=Object(j.useState)(null),r=Object(g.a)(a,2),o=r[0],c=r[1],i=null;return n&&(i=t[n]),(o&&i&&i.customId!==o.customId||!o&&i)&&c(Object(b.a)(Object(b.a)({},e),i)),o&&!i&&c(null),o||e}var ot={md:"\n# Button\n\n## Properties\n\n### onClickAction\nThis is an action made avaiable from `game.actions`. No parameters are passed to the action.\n"},ct=function e(t){var n=t.size,r=t.variant,o=t.color,c=t.text,i=t.onClickAction,s=t.actionContext,l=t.customStyleName,u=$(),p=u.refFn,d=u.componentClassName,j=rt(e.baseStyle,J.Button,l);return Object(a.jsx)(Oe.a,{style:j,ref:p,className:d,size:n,variant:r,color:o,onClick:function(){var e=M.b.actions[i];e&&(e(s),B.b.update())},children:c})};ct.componentName="Button",ct.craft={props:{size:"small",variant:"contained",color:"primary",text:"Button"},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,r=e.props;return Object(a.jsx)(We,{config:[{type:Ue,property:"customStyleName",componentName:n},{type:Te,property:"onClickAction",itemsFn:function(){return Object.keys(M.b.actions)}},{type:Ae,property:"text"}],properties:r,setProp:t})}}},ct.baseStyle={margin:"0em"},ct.styleProperties=[{property:"padding",type:Ae}],ct.documentation=ot,ct.toolboxItem=function(e){return{name:"Button",component:ct,ref:function(t){return e.create(t,Object(a.jsx)(ct,{}))}}},ee(ct);var it={md:"\n# Text\n\n## Properties\n\n### text\nThe text to show\n\n"},st=function e(t){var n=t.text,r=t.customStyleName,o=$(),c=o.refFn,i=o.componentClassName,s=rt(e.baseStyle,J.Text,r);return Object(a.jsx)("span",{ref:c,className:i,style:s,children:n})};st.componentName="Text",st.craft={props:{text:"Text"},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,r=e.props;return Object(a.jsx)(We,{config:[{type:Ue,property:"customStyleName",componentName:n},{type:Ae,property:"text",componentName:n}],properties:r,setProp:t})}}},st.baseStyle={margin:"0em"},st.styleProperties=[{property:"fontSize",type:Ae}],st.documentation=it,st.toolboxItem=function(e){return{name:"Text",component:st,ref:function(t){return e.create(t,Object(a.jsx)(st,{text:"Some text"}))}}},ee(st);var lt=n(775),ut=n(776),pt=(n(777),function(e){var t=e.children,n=Object(q.e)().connectors.connect;return Object(a.jsx)(lt.a,{ref:n,className:"text-only",children:t})});pt.craft={rules:{}};var dt=function(e){var t=e.children,n=Object(q.e)().connectors.connect;return Object(a.jsx)(ut.a,{ref:n,children:t})};dt.craft={rules:{canMoveIn:function(e){return e.data.type===ct}}};function jt(e,t){if(!e)return{};var n={};if(M.b.visibilitySources[e]&&!M.b.visibilitySources[e]()){if(!t)return null;n.opacity="0.25"}return n}var mt={md:"\n# Container\n\n## Properties\n\n\n"},bt=function e(t){var n=t.children,r=t.visibilitySource,o=$(),c=o.refFn,i=o.componentClassName,s=jt(r,o.enabled);return s?Object(a.jsx)(re.a,{ref:c,style:Object(b.a)(Object(b.a)({},e.baseStyle),s),className:i,children:n}):null};bt.componentName="Container",bt.craft={props:{padding:"0px"},related:{settings:function(){var e=Object(q.e)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(a.jsx)(We,{config:[{type:Te,property:"visibilitySource",itemsFn:function(){return Object.keys(M.b.visibilitySources)}}],properties:n,setProp:t})}}},bt.baseStyle={padding:"0em"},bt.documentation=mt,bt.toolboxItem=function(e){return{name:"Container",component:bt,ref:function(t){return e.create(t,Object(a.jsx)(q.b,{is:bt,canvas:!0,children:Object(a.jsx)(st,{text:"Container"})}))}}},ee(bt);var ft=[{name:"3",value:3},{name:"4",value:4},{name:"6",value:6}],ht={md:"\n# GridContainer\n\n## Properties\n\n\n\n"},Ot={md:"\n# GridItem\n\n## Properties\n\n\n\n"},gt=Object(S.a)((function(){return{root:{flexGrow:1}}})),xt=function(e){var t=e.children,n=e.visibilitySource,r=$({additionalClasses:[gt().root]}),o=r.refFn,c=r.componentClassName,i=jt(n,r.enabled);return i?Object(a.jsx)(k.a,{container:!0,ref:o,className:c,style:i,spacing:2,children:t}):null};xt.componentName="GridContiainer",xt.craft={props:{},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(a.jsx)(We,{config:[{type:Te,property:"visibilitySource",itemsFn:function(){return Object.keys(M.b.visibilitySources)}}],properties:n,setProp:t})}}};var yt=function e(t){var n=t.children,r=t.size,o=t.visibilitySource,c=t.customStyleName,i=$(),s=i.refFn,l=i.componentClassName,u=i.enabled,p=rt(e.baseStyle,J.GridItem,c),d=jt(o,u);return d?Object(a.jsx)(k.a,{item:!0,xs:r,ref:s,className:l,style:d,children:Object(a.jsx)(oe.a,{style:p,children:n})}):null};yt.componentName="GridItem",yt.craft={props:{size:6},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,r=e.props;return Object(a.jsx)(We,{config:[{type:Ue,property:"customStyleName",componentName:n},{type:Te,property:"size",itemsFn:function(){return ft}},{type:Te,property:"visibilitySource",itemsFn:function(){return Object.keys(M.b.visibilitySources)}}],properties:r,setProp:t})}}},yt.baseStyle={padding:"0em",height:"100%"},yt.styleProperties=[{property:"padding",type:Ae}],xt.documentation=ht,yt.documentation=Ot,X.addComponent(xt),X.addComponent(yt),xt.toolboxItem=function(e){return{name:"GridContainer",component:xt,ref:function(t){return e.create(t,Object(a.jsxs)(q.b,{is:xt,canvas:!0,children:[Object(a.jsx)(q.b,{is:yt,canvas:!0,children:Object(a.jsx)(st,{text:"Grid Item"})}),Object(a.jsx)(q.b,{is:yt,canvas:!0,children:Object(a.jsx)(st,{text:"Grid Item"})})]}))}}},ee(xt),yt.toolboxItem=function(e){return{name:"GridItem",component:yt,ref:function(t){return e.create(t,Object(a.jsx)(q.b,{is:yt,canvas:!0,children:Object(a.jsx)(st,{text:"Grid Item"})}))}}},ee(yt);var vt=n(160),Ct=n.n(vt),_t=n(161),St=n.n(_t),kt={md:"\n# PathContainer\n\n## Properties\n\n\n"},wt=Object(S.a)((function(e){return{main:{padding:"0em"}}})),Nt=function e(t){var n=t.path,r=t.children,o=t.customStyleName,c=Object(_.g)(),i=$({additionalClasses:[wt().main]}),s=i.refFn,l=i.enabled,u=i.componentClassName,p=c.location.pathname.includes(n),d=rt(e.baseStyle,J.PathContainer,o);return Object(a.jsxs)(re.a,{ref:s,className:u,style:d,children:[l&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{float:"right",height:"0em"},children:p?Object(a.jsx)(Ct.a,{}):Object(a.jsx)(St.a,{})}),n," : ",c.location.pathname]}),p?r:null]})};Nt.styleProperties=[{property:"margin",type:Ae}];Nt.componentName="PathContainer",Nt.craft={props:{path:"/tab1"},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,r=e.props;return Object(a.jsx)(We,{config:[{type:Ue,property:"customStyleName",componentName:n},{type:Ae,property:"path"}],properties:r,setProp:t})}}},Nt.baseStyle={margin:"0em"},Nt.documentation=kt,Nt.toolboxItem=function(e){return{name:"PathContainer",component:Nt,ref:function(t){return e.create(t,Object(a.jsx)(q.b,{is:Nt,canvas:!0}))}}},ee(Nt);var Dt=n(778),It={md:"\n# Table\n\n## Properties\n\n"},Pt=function(e){var t=e.items,n=e.columnNames,r=[],o={item:{},index:"0",column:{}};try{for(var c in t){var i=t[c],s=[];for(var l in o.item=i,n){var u=n[l];o.index=l,o.column=u;var p=u.name,d=i[u.property];switch(u.type){case"string":if("string"!==typeof d)throw new Error("Trying to use a non-string value as a string");s.push(Object(a.jsx)(Ce.a,{children:d},p));break;case"variableString":if(!d.data)throw new Error("No data function for a variableString");s.push(Object(a.jsx)(Ce.a,{children:d.data()},p));break;case"button":if(!d.onClickAction)throw new Error("No onClickAcion function for a button");s.push(Object(a.jsx)(Ce.a,{children:Object(a.jsx)(ct,{text:d.text,variant:"contained",color:"primary",onClickAction:d.onClickAction,actionContext:i})},p))}}r.push(Object(a.jsx)(ve.a,{children:s},c))}}catch(j){return Object(a.jsx)(ke.a,{children:Object(a.jsxs)(Ce.a,{children:[Object(a.jsxs)("div",{children:["Table Data Error! ",j.message]}),Object(a.jsxs)("div",{children:["Column Index: ",o.index]}),Object(a.jsxs)("div",{children:["Column Type: ",o.column.type]}),Object(a.jsxs)("div",{children:["Item Data: ",JSON.stringify(o.item)]})]})})}return Object(a.jsx)(ke.a,{children:r})},Et=function(e){var t,n=e.columnNames,r=void 0===n?[]:n,o=e.itemSource,c=$(),i=c.refFn,s=c.componentClassName,l=[],u=Object(ye.a)(r);try{for(u.s();!(t=u.n()).done;){var p=t.value;l.push(Object(a.jsx)(Ce.a,{children:p.name},p.name))}}catch(m){u.e(m)}finally{u.f()}var d=M.b.dataSources[o],j=d?d():[];return Object(a.jsx)("div",{ref:i,className:s,children:Object(a.jsx)(_e.a,{children:Object(a.jsxs)(Se.a,{size:"small",children:[Object(a.jsx)(Dt.a,{children:Object(a.jsx)(ve.a,{children:l})}),Object(a.jsx)(Pt,{items:j,columnNames:r})]})})})},Gt=function(e){var t=e.item,n=e.update;return Object(a.jsxs)("div",{style:{marginBottom:"1em"},children:[Object(a.jsx)(P.a,{fullWidth:!0,value:t.name,label:"Name",onChange:function(e){t.name=e.target.value,n()}}),Object(a.jsx)(P.a,{fullWidth:!0,value:t.property,label:"Property",onChange:function(e){t.property=e.target.value,n()}}),Object(a.jsx)(Ge,{value:t.type||"",items:[{name:"String",value:"string"},{name:"Button",value:"button"},{name:"Variable String",value:"variableString"}],label:"Type",onChange:function(e){t.type=e.target.value,n()}})]})};Et.componentName="Table",Et.craft={props:{columnNames:[{name:"Colum 1",property:"col1",type:"string"},{name:"Colum 2",property:"col2",type:"string"},{name:"Colum 3",property:"col3",type:"button"}],itemSource:"",updateVariable:!1},related:{settings:function(){var e=Object(q.e)((function(e){return{props:e.data.props}})),t=e.actions.setProp,n=e.props;return Object(a.jsx)(We,{config:[{type:Te,property:"itemSource",itemsFn:function(){return Object.keys(M.b.dataSources)}},{type:we,property:"columnNames",component:function(e,n){return Object(a.jsx)(Gt,{item:e,update:function(){t((function(e){return e.updateVarible=!e.updateVarible}))}},n)},items:n.columnNames}],properties:n,setProp:t})}}},Et.documentation=It,Et.toolboxItem=function(e){return{name:"Table",component:Et,ref:function(t){return e.create(t,Object(a.jsx)(Et,{}))}}},ee(Et);var zt={md:"\n# VariableText\n\n## Properties\n\n"},Ft=function e(t){var n,r=t.dataProperty,o=t.subProperty,c=t.customStyleName,i=$(),s=i.refFn,l=i.componentClassName,u=rt(e.baseStyle,J.VariableText,c),p=M.b.data[r];return p&&o&&(p=p[o]),"object"===typeof p&&(p=void 0),Object(a.jsx)("span",{ref:s,className:l,style:u,children:null!==(n=p)&&void 0!==n?n:"##NO VALUE##"})};Ft.componentName="VariableText",Ft.craft={props:{},rules:{canDrag:function(e){return!0}},related:{settings:function(){var e=Object(q.e)((function(e){return{componentName:e.data.name,props:e.data.props}})),t=e.actions.setProp,n=e.componentName,r=e.props;return Object(a.jsx)(We,{config:[{type:Ue,property:"customStyleName",componentName:n},{type:Ae,property:"dataProperty"},{type:Ae,property:"subProperty"}],properties:r,setProp:t})}}},Ft.baseStyle={margin:"0em"},Ft.styleProperties=[{property:"fontSize",type:Ae}],Ft.documentation=zt,Ft.toolboxItem=function(e){return{name:"VariableText",component:Ft,ref:function(t){return e.create(t,Object(a.jsx)(Ft,{}))}}},ee(Ft);var Tt=function(){return Object(j.useEffect)((function(){console.debug("Starting autosave");var e=setInterval((function(){te()}),2e3);return function(){console.debug("Stopping autosave"),clearInterval(e)}}),[]),null},At=Object(S.a)((function(e){return{gameArea:{position:"absolute",background:"#eee",height:"100%",width:"100%",overflowY:"auto"}}}));function Rt(){var e=Object(q.d)().query,t=At();return Object(j.useEffect)((function(){return M.b.running=!1,function(){te()}}),[]),B.b.editorQuery=e,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{position:"absolute",width:"80%",height:"100%"},children:Object(a.jsx)("div",{className:t.gameArea,children:Object(a.jsx)(se.b,{children:Object(a.jsx)(q.c,{data:R.a.gameData.layout,children:Object(a.jsx)(q.b,{is:bt,padding:5,canvas:!0,children:Object(a.jsx)(st,{text:"Start dragging components in (and delete this one)"})})})})})}),Object(a.jsxs)("div",{style:{position:"absolute",right:"0%",width:"20%",height:"100%",overflowY:"auto"},children:[Object(a.jsx)(He,{}),Object(a.jsx)(qe,{})]})]})}function Bt(){return Object(a.jsxs)(q.a,{resolver:Z,children:[Object(a.jsx)(Tt,{}),Object(a.jsx)(Rt,{})]})}function Mt(){var e=Object(_.g)(),t=At();return Object(j.useEffect)((function(){M.b.running=!0,R.a.gameData||(console.error(new Error("No gameData routing to /edit")),e.push("/edit"))}),[e]),Object(a.jsx)("div",{className:t.gameArea,children:Object(a.jsx)(q.a,{resolver:Z,enabled:!1,children:Object(a.jsx)(se.b,{children:Object(a.jsx)(q.c,{data:R.a.gameData.layout})})})})}var Ut=n(785),Wt=n(786),Lt=n(162),Vt=n.n(Lt),Ht=function(){var e=Object(_.g)(),t=e.location.pathname,n=Object(j.useState)(!1),r=Object(g.a)(n,2),o=r[0],c=r[1];function i(t){e.push(t),c(!o)}return Object(j.useContext)(B.a),Object(a.jsx)(Qe.a,{position:"static",color:"transparent",children:Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Oe.a,{onClick:function(){B.b.state.optionsDrawerOpen=!0,B.b.update()},children:Object(a.jsx)(Vt.a,{})}),Object(a.jsx)(Oe.a,{onClick:function(){i("/edit")},variant:t.includes("/edit")?"contained":void 0,color:"primary",children:"Edit"}),Object(a.jsx)(Oe.a,{onClick:function(){var e=B.b.state.localSettings.lastCodeFile;e&&(e="/".concat(e)),i("/code".concat(e))},variant:t.includes("/code")?"contained":void 0,color:"primary",children:"Code"}),Object(a.jsx)(Oe.a,{onClick:function(){Me()},children:"Styling"}),Object(a.jsx)(Oe.a,{onClick:function(){te(),i("/play")},variant:t.includes("/play")?"contained":void 0,color:"primary",children:"Play"}),Object(a.jsx)(Oe.a,{onClick:function(){i("/documentation")},variant:t.includes("/documentation")?"contained":void 0,color:"primary",children:"Documentation"})]})})},Jt=n(171),Kt=n(779),qt={primary:Kt.a[900],secondary:Kt.a[100]},Qt=Object(Jt.a)({palette:{primary:{main:qt.primary},secondary:{main:qt.secondary}},overrides:{MuiSwitch:{switchBase:{color:qt.secondary},colorSecondary:{"&$checked":{color:qt.primary}},track:{opacity:.2,backgroundColor:qt.primary,"$checked$checked + &":{opacity:.5,backgroundColor:qt.primary}}}}}),Yt=n(798),$t=n(119),Xt=n.n($t),Zt=n(169),en=n.n(Zt),tn=n(170),nn=n.n(tn),an=n(163),rn=n(780),on=n(781),cn=n(782),sn=n(783),ln=n(784),un=function(e){var t=e.onClose,n={gameData:V.a.get("gameData")},r=Object(j.useState)(btoa(JSON.stringify(n))),o=Object(g.a)(r,2),c=o[0],i=o[1];return Object(a.jsxs)(rn.a,{open:!0,onClose:t,children:[Object(a.jsx)(on.a,{children:"Import or export game data"}),Object(a.jsxs)(cn.a,{children:[Object(a.jsx)(sn.a,{children:"Copy and paste the existing data somewhere to save it. Or paste in data you have and import it."}),Object(a.jsx)(P.a,{fullWidth:!0,label:"Current Game Data",multiline:!0,rows:4,value:c,onChange:function(e){i(e.target.value)},variant:"filled"})]}),Object(a.jsx)(ln.a,{children:Object(a.jsx)(Oe.a,{onClick:function(){var e=JSON.parse(atob(c));console.debug("Imported game data",JSON.stringify(e,null,2)),V.a.set("gameData",e.gameData),window.location.reload()},color:"primary",children:"Import"})})]})},pn=function(e){var t=e.onClose;return Object(a.jsxs)(rn.a,{open:!0,onClose:t,children:[Object(a.jsx)(on.a,{children:"Reset Game Configuration"}),Object(a.jsx)(cn.a,{children:Object(a.jsx)(sn.a,{children:"Are you sure you want to reset the curret game data?"})}),Object(a.jsxs)(ln.a,{children:[Object(a.jsx)(Oe.a,{onClick:t,color:"primary",variant:"contained",children:"Cancel"}),Object(a.jsx)(Oe.a,{onClick:function(){V.a.delete("gameData"),window.location.reload()},color:"primary",children:"Confirm"})]})]})},dn=n(168),jn=n.n(dn),mn=n(166),bn=n.n(mn),fn=n(165),hn=n.n(fn),On=n(167),gn=n.n(On),xn=n(164),yn=n.n(xn);function vn(){var e=Object(j.useState)(!1),t=Object(g.a)(e,2),n=t[0],a=t[1];return function(){return a(!n)}}function Cn(e){var t=e.component,n=e.components,r=e.update,o=null;return o="Checking"===t.status?Object(a.jsx)(hn.a,{}):t.ok?Object(a.jsx)(bn.a,{style:{color:"green"}}):Object(a.jsx)(gn.a,{style:{color:"red"}}),Object(a.jsxs)(ve.a,{children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Ne.a,{onClick:function(){var e=n.indexOf(t);n.splice(e,1),r()},children:Object(a.jsx)(jn.a,{})})}),Object(a.jsx)(Ce.a,{children:t.url}),Object(a.jsx)(Ce.a,{children:o}),Object(a.jsx)(Ce.a,{children:t.status})]})}var _n,Sn=function(e){var t=e.onClose,n=vn(),r=Object(j.useState)(""),o=Object(g.a)(r,2),c=o[0],l=o[1];function u(e){return e.status="Checking",new Promise(function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yn.a.get(e.url);case 3:a=t.sent,console.log(a.status),200===a.status&&(e.status="Ok",e.ok=!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.status="Failed (".concat(t.t0.response.status,")"),e.ok=!1;case 12:n();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}function p(){return(p=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.a.customComponents.map((function(e){return u(e)})),n(),e.next=4,Promise.all(t);case 4:n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)(rn.a,{open:!0,onClose:t,children:[Object(a.jsx)(on.a,{children:"Custom Components"}),Object(a.jsxs)(cn.a,{children:[Object(a.jsx)(sn.a,{children:"Add custom components to your game."}),Object(a.jsx)(_e.a,{children:Object(a.jsxs)(Se.a,{size:"small",children:[Object(a.jsx)(Dt.a,{children:Object(a.jsxs)(ve.a,{children:[Object(a.jsx)(Ce.a,{}),Object(a.jsx)(Ce.a,{children:"URL"}),Object(a.jsx)(Ce.a,{}),Object(a.jsx)(Ce.a,{children:"Status"})]})}),Object(a.jsx)(ke.a,{children:R.a.customComponents.map((function(e){return Object(a.jsx)(Cn,{component:e,components:R.a.customComponents,update:n})}))})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(P.a,{value:c,onChange:function(e){l(e.target.value)}}),Object(a.jsx)(Oe.a,{onClick:function(){var e={url:c,status:"New"};R.a.customComponents.push(e),u(e),l("")},variant:"contained",color:"primary",children:"Add Component"}),Object(a.jsx)(Oe.a,{onClick:function(){return p.apply(this,arguments)},variant:"contained",color:"primary",children:"Check Components"})]}),Object(a.jsxs)(ln.a,{children:[Object(a.jsx)(Oe.a,{onClick:function(){t()},color:"primary",children:"Done"}),Object(a.jsx)(Oe.a,{onClick:function(){te(),window.location.reload()},color:"primary",variant:"contained",children:"Save And Reload"})]})]})},kn=function(){var e=Object(j.useState)(!1),t=Object(g.a)(e,2),n=t[0],r=t[1],o=Object(j.useState)(!1),c=Object(g.a)(o,2),i=c[0],s=c[1],l=Object(j.useState)(!1),u=Object(g.a)(l,2),p=u[0],d=u[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(Yt.a,{open:B.b.state.optionsDrawerOpen,onClose:function(){B.b.state.optionsDrawerOpen=!1,B.b.update()},children:Object(a.jsxs)(w.a,{children:[Object(a.jsxs)(N.a,{button:!0,onClick:function(){M.b.initializeGameData()},children:[Object(a.jsx)(D.a,{children:Object(a.jsx)(Xt.a,{})}),Object(a.jsx)(I.a,{primary:"Initialize Game Data"})]}),Object(a.jsxs)(N.a,{button:!0,onClick:function(){s(!0)},children:[Object(a.jsx)(D.a,{children:Object(a.jsx)(Xt.a,{})}),Object(a.jsx)(I.a,{primary:"Reset Game Configuration",secondary:"Reset all game configuration"})]}),Object(a.jsxs)(N.a,{button:!0,onClick:function(){r(!0)},children:[Object(a.jsx)(D.a,{children:Object(a.jsx)(en.a,{})}),Object(a.jsx)(I.a,{primary:"Import / Export",secondary:"Import or export your game data"})]}),Object(a.jsxs)(N.a,{button:!0,onClick:function(){d(!0)},children:[Object(a.jsx)(D.a,{children:Object(a.jsx)(nn.a,{})}),Object(a.jsx)(I.a,{primary:"Custom Components",secondary:"Custom components for your game"})]}),Object(a.jsx)(E.a,{}),Object(a.jsx)(N.a,{onClick:function(){},children:Object(a.jsx)(I.a,{primary:"Idling Engine",secondary:"Version ".concat(an.version)})})]})}),n&&Object(a.jsx)(un,{onClose:function(){return r(!1)}}),i&&Object(a.jsx)(pn,{onClose:function(){return s(!1)}}),p&&Object(a.jsx)(Sn,{onClose:function(){return d(!1)}})]})},wn=n(60),Nn=(_n={},Object(wn.a)(_n,ct.name,ct),Object(wn.a)(_n,Nt.name,Nt),Object(wn.a)(_n,yt.name,yt),Object(wn.a)(_n,st.name,st),Object(wn.a)(_n,Ft.name,Ft),_n),Dn=function(){var e=vn(),t=B.b.state.localSettings,n=t.styleDrawerComponentName,r=t.styleDrawerStyleId,o=function(t,n){B.b.state.localSettings.styleDrawerComponentName=t,B.b.state.localSettings.styleDrawerStyleId=n,e()},c=null;return n&&(c=J[n]),c&&c[r]||(r=""),Object(a.jsx)("div",{children:Object(a.jsx)(Yt.a,{open:B.b.state.localSettings.flags.styleDrawerOpen,onClose:function(){B.b.state.localSettings.flags.styleDrawerOpen=!1,B.b.state.localSettings.flags.highlightComponents=B.b.state.localSettings.flags.previousHighlightComponents,H(),B.b.update()},anchor:"right",BackdropProps:{invisible:!0},children:Object(a.jsxs)("div",{style:{padding:"1em"},children:[Object(a.jsx)(he.a,{variant:"h4",children:"Style Components"}),Object(a.jsx)(Ge,{value:n,items:Object.keys(Nn),label:"Component",onChange:function(t){J[t.target.value]=J[t.target.value]||{},o(t.target.value,""),e()}}),c&&Object(a.jsxs)(fe.a,{display:"flex",alignItems:"flex-end",children:[Object(a.jsx)(fe.a,{flexGrow:1,children:Object(a.jsx)(Ge,{value:r,items:Object.keys(c).map((function(e){return{value:e,name:c[e].styleName}})),label:"Styles",onChange:function(e){o(n,e.target.value)}})}),Object(a.jsx)(fe.a,{children:Object(a.jsx)(Oe.a,{onClick:function(e){var t=Object(U.a)();c[t]={styleName:"New Style ".concat(Object.keys(c).length+1)},o(n,t)},variant:"contained",children:"Add Style"})})]}),c&&r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(We,{config:[{property:"styleName",type:Ae}].concat(Object(K.a)(Nn[n].styleProperties)),properties:c[r],setProp:function(e){var t=Object.assign({},c[r],{customId:Math.random()});e(t),c[r]=t,B.b.update()}}),Object(a.jsx)(Oe.a,{onClick:function(e){var t=Object.keys(c),a=t.indexOf(r),i="";delete c[r],a>0?i=t[a-1]:t.length&&(i=t[1]),o(n,i)},variant:"contained",children:"Delete Style"})]})]})})})},In={codeFiles:[]};function Pn(){try{var e=V.a.get("gameData");if(e)return e.baseStyles&&function(e){for(var t in e){var n=Z[t],a=e[t];n&&a&&(n.baseStyle=Object(b.a)(Object(b.a)({},n.baseStyle),a))}}(e.baseStyles),e.customStyles&&Object.assign(J,e.customStyles),R.a.gameData=e,R.a.customComponents=e.customComponents||[],e;console.warn("No game data loaded")}catch(t){console.error(t)}return R.a.gameData=In,null}function En(){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(s.a)(i.a.mark((function e(){var t,n,a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n={},a=Object(ye.a)(R.a.customComponents),e.prev=3,o=function(){var e=r.value;if(!e.url)return"continue";var a=new Promise((function(t){var a=document.createElement("script");a.type="text/javascript",a.src=e.url,a.onload=function(){t()},a.onerror=function(a){console.log(a),n[e.url]=a,t()},document.head.append(a)}));t.push(a)},a.s();case 6:if((r=a.n()).done){e.next=12;break}if("continue"!==o()){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.next=22,Promise.all(t);case 22:console.log(n);case 23:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})))).apply(this,arguments)}!function(){var e=V.a.get("localSettings",void 0);e&&(console.log("storedLocalSettings",e),B.b.state.localSettings=Object.assign(B.b.state.localSettings,e))}();var zn=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={ready:!1},e.update=function(){e.setState({})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B.b.update=this.update,e.next=3,En();case 3:Pn(),M.b.setUpdateUIFunction(B.b.update),Object(M.a)(),this.setState({ready:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.ready?Object(a.jsxs)(Ut.a,{theme:Qt,children:[Object(a.jsx)(Wt.a,{}),Object(a.jsx)(B.a.Provider,{value:{state:B.b.state,update:this.update,editorQuery:B.b.editorQuery},children:Object(a.jsx)(se.a,{basename:"/idling-engine",children:Object(a.jsxs)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:[Object(a.jsx)(kn,{}),Object(a.jsx)(Dn,{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"absolute",width:"100%",height:"100%"},children:[Object(a.jsx)(Ht,{}),Object(a.jsx)("div",{style:{position:"relative",flexGrow:1},children:Object(a.jsxs)(_.d,{children:[Object(a.jsx)(_.b,{path:"/edit",render:function(){return Object(a.jsx)(Bt,{})}}),Object(a.jsx)(_.b,{path:"/code",render:function(){return Object(a.jsx)(ae,{})}}),Object(a.jsx)(_.b,{path:"/play",render:function(){return Object(a.jsx)(Mt,{})}}),Object(a.jsx)(_.b,{path:"/documentation",render:function(){return Object(a.jsx)(be,{})}}),Object(a.jsx)(_.b,{path:"/",children:Object(a.jsx)(_.a,{to:"/edit"})})]})})]})]})})})]}):null}}]),n}(j.Component);n(718);o.a.render(Object(a.jsx)(zn,{}),document.getElementById("root"))},8:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=n(0),r={state:{localSettings:{flags:{highlightComponents:!0,previousHighlightComponents:!0,styleDrawerOpen:!1,tickWhileEditing:!1},lastCodeFile:"",styleDrawerComponentName:"",styleDrawerStyleId:""},optionsDrawerOpen:!1},editorQuery:null,update:function(){throw new Error("Update function not defined")}},o=n.n(a).a.createContext(r);window.store=r}},[[719,1,2]]]);
//# sourceMappingURL=main.b31b408b.chunk.js.map
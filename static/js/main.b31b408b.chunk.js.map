{"version":3,"sources":["data/game.ts","data/data.ts","lib/dataStorage.ts","lib/log.ts","data/initial/code.ts","lib/localSettings.ts","data/customStyles.ts","config/useSetupComponent.ts","data/documentation.ts","data/components.ts","lib/saveGameData.ts","views/Code.tsx","views/Documentation/Breadcrumbs.tsx","views/Documentation/components-md.ts","views/Documentation/templates/link.ts","views/Documentation/index.tsx","views/Documentation/game-md.ts","views/Documentation/customComponents-md.ts","views/Documentation/index-md.ts","components/Settings/CustomRepeatSetting.ts","components/Controls/Dropdown.tsx","components/Settings/DropdownSetting.tsx","components/Settings/StringSetting.tsx","actions/styleDrawer.ts","components/Settings/StyleSetting.tsx","components/Settings/index.tsx","components/Toolbox/getToolboxComponents.tsx","actions/localSettings.ts","components/Toolbox/index.tsx","components/SettingsPanel.tsx","components/Settings/SwitchSetting.tsx","components/CustomComponents/AppBar/AppBarDocumentation.ts","components/CustomComponents/AppBar/ToolBarTabs.tsx","components/CustomComponents/AppBar/index.tsx","config/useCustomStyle.ts","components/CustomComponents/Button/ButtonDocumentation.ts","components/CustomComponents/Button/index.tsx","components/CustomComponents/Button/ButtonSettings.tsx","components/CustomComponents/Text/TextSettings.tsx","components/CustomComponents/Text/TextDocumentation.ts","components/CustomComponents/Text/index.tsx","components/CustomComponents/Card/index.tsx","lib/checkVisibility.ts","components/CustomComponents/Container/ContainerDocumentation.ts","components/CustomComponents/Container/index.tsx","components/CustomComponents/Container/ContainerSettings.tsx","components/CustomComponents/Grid/GridSettings.tsx","components/CustomComponents/Grid/GridContainerDocumentation.ts","components/CustomComponents/Grid/GridItemDocumentation.ts","components/CustomComponents/Grid/index.tsx","components/CustomComponents/PathContainer/PathContainerDocumentation.ts","components/CustomComponents/PathContainer/index.tsx","components/CustomComponents/Table/TableDocumentation.ts","components/CustomComponents/Table/index.tsx","components/CustomComponents/VariableText/VariableTextSettings.tsx","components/CustomComponents/VariableText/VariableTextDocumentation.ts","components/CustomComponents/VariableText/index.tsx","views/Edit/AutoSave.tsx","styles/shared.ts","views/Edit/index.tsx","views/Play.tsx","components/Header.tsx","styles/theme.ts","components/OptionsDrawer/ImportExportDialog.tsx","components/OptionsDrawer/ConfirmResetDialog.tsx","config/useUpdate.ts","components/OptionsDrawer/CustomComponentsDialog.tsx","components/OptionsDrawer/index.tsx","components/StyleDrawer.tsx","lib/loadGameData.ts","lib/loadCustomComponents.ts","App.tsx","index.tsx","lib/context.ts"],"names":["game","running","settings","tickInterval","data","actions","conditionals","dataSources","visibilitySources","configure","console","log","isInitialized","isGameDataInitialized","_initialize","loadedGameData","this","fn","_initializeGameData","_tick","store","state","localSettings","flags","tickWhileEditing","update","setUpdateUIFunction","currentTimeout","tick","setTimeout","err","error","executeCode","files","gameData","codeFiles","finalCode","file","code","lines","split","numberWidth","Math","floor","length","map","line","index","toString","padEnd","join","clearTimeout","eval","dataStorage","get","initialize","message","setInterval","set","window","customComponents","key","defaultValue","localStorage","JSON","parse","value","stringify","LogLevels","DEBUG","INFO","WARN","ERROR","c","co","logLevels","logLevel","debug","args","info","warn","initialCode","saveLocalSettings","customStyles","useSharedStyles","makeStyles","theme","componentEditing","boxShadow","minHeight","minWidth","padding","componentSelected","componentClass","editing","selected","sharedClasses","additonalClasses","highlightComponents","useSetupComponent","properties","additionalClasses","useContext","Context","useNode","events","connectors","connect","drag","useEditor","enabled","options","componentClassName","refFn","ref","documentation","components","component","componentName","registerCustomComponent","Component","addComponent","saveGameData","editorQuery","baseStyles","baseStyle","layout","serialize","id","random","useStyles","fileName","fontSize","typography","Code","history","useHistory","classes","useState","updateValue","deletingFiles","setDeletingFiles","selectedFiles","setSelectedFiles","save","deleteFiles","newFiles","setFiles","filter","item","addFile","name","push","uuid","useEffect","interval","clearInterval","Grid","container","style","position","height","width","sm","List","dense","overflowY","top","bottom","location","pathname","includes","ListItem","cursor","onClick","newSelectedFiles","lastCodeFile","handleFileClick","ListItemIcon","ListItemText","primary","TextField","onChange","event","target","size","inputProps","className","Divider","button","checked","secondary","background","path","render","mode","editorProps","$blockScrolling","tabSize","commands","beautify","focus","to","Breadcrumbs","parts","cumulativePath","aria-label","part","pathPart","getComponents","Object","keys","link","text","renderers","props","href","children","paper","Documentation","Paper","basename","match","params","plugins","md","CustomRepeatSetting","items","Dropdown","label","itemElements","MenuItem","labelElement","InputLabel","shrink","FormControl","fullWidth","Select","DropdownSetting","property","itemsFn","setProp","Box","display","alignItems","flexGrow","IconButton","StringSetting","openStyleDrawer","styleDrawerOpen","previousHighlightComponents","styleDrawerComponentName","styleDrawerStyleId","styleId","StyleSetting","styleName","variant","Settings","config","settingsRows","Error","configItem","remainingProps","TableRow","TableCell","scope","type","TableContainer","TableBody","getToolboxComponents","reduce","acc","toolboxItem","toggleLocalSetting","settingProperty","Toolbox","selectedComponent","setSelectedComponent","px","py","direction","spacing","Typography","justifyContent","Switch","selectNode","propertyConfigDefinitions","margin","BaseProperties","definition","mt","pb","xs","Chip","color","callback","newProps","assign","SettingsPanel","query","currentNodeId","nodes","related","isDeletable","node","React","createElement","delete","SwitchSetting","AppBarDocumentation","ToolBarTabs","tabs","defaultTab","tab","default","parseInt","getCurrentTab","currentTabIndex","Tabs","visibilitySource","root","spacer","fullHeight","mixins","toolbar","AppBar","Toolbar","craft","triggerUpdate","setDefault","create","useCustomStyle","base","styleGroup","customStyleName","setStyle","customStyle","customId","ButtonDocumentation","Button","onClickAction","actionContext","action","styleProperties","TextDocumentation","Text","rules","canDrag","CardTop","CardContent","CardBottom","CardActions","canMoveIn","incomingNode","checkVisibility","extraStyle","opacity","ContainerDocumentation","Container","is","canvas","sizes","GridContainerDocumentation","GridItemDocumentation","GridContainer","GridItem","PathContainerDocumentation","main","PathContainer","visible","float","TableDocumentation","TableRows","columnNames","rows","currentContext","column","itemIndex","cells","itemProperty","Table","itemSource","headerRow","itemSourceFunction","TableHead","ColumnSetting","marginBottom","updateVariable","updateVarible","VariableTextDocumentation","VariableText","dataProperty","subProperty","undefined","AutoSave","gameArea","Content","right","Edit","resolver","Play","Header","navigate","optionsDrawerOpen","colors","blueGrey","createMuiTheme","palette","overrides","MuiSwitch","switchBase","colorSecondary","track","backgroundColor","ImportExportDialog","onClose","currentAllGameData","btoa","allGameData","setAllGameData","Dialog","open","DialogTitle","DialogContent","DialogContentText","multiline","DialogActions","atob","reload","ConfirmResetDialog","useUpdate","CustomComponent","icon","status","ok","indexOf","splice","url","CustomComponentsDialog","newComponentUrl","setNewComponentUrl","checkComponent","Promise","accept","a","axios","result","response","requests","all","OptionsDrawer","showImportExprt","setShowImportExport","showConfirmReset","setShowConfirmReset","showCustomComponents","setShowCustomComponents","Drawer","initializeGameData","packageJson","version","supportedComponents","StyleDrawer","selectedStyle","updateSettings","anchor","BackdropProps","invisible","styleIds","nextStyle","initialGameData","loadGameData","storedGameData","loadComponentProperties","loadCustomComponents","loadingPromises","errors","customComponent","p","resolve","s","document","src","onload","onerror","head","append","storedLocalSettings","loadLocalSettings","App","ready","setState","ThemeProvider","CssBaseline","Provider","flexDirection","ReactDOM","getElementById","createContext"],"mappings":"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","file":"static/js/main.b31b408b.chunk.js","sourcesContent":["import { store } from \"../lib/context\";\nimport { dataStorage } from \"../lib/dataStorage\";\nimport { data } from \"./data\";\n\ninterface AnyObject {\n  [key: string]: any;\n}\n\nexport const game = {\n  running: true,\n\n  // Settings\n  settings: {\n    tickInterval: 1000,\n  },\n\n  // Data\n  data: {} as AnyObject,\n\n  // Actions\n  actions: {} as AnyObject,\n\n  // Conditionals\n  conditionals: {} as AnyObject,\n\n  // Data sources\n  dataSources: {} as AnyObject,\n\n  // Visibility sources\n  visibilitySources: {} as AnyObject,\n\n  // Configure\n  configure: (settings: AnyObject) => {\n    console.log(\"game.configure not defined\");\n  },\n\n  // Initialized state\n  isInitialized: false,\n  isGameDataInitialized: false,\n\n  // initialize\n  _initialize: (loadedGameData: any) => {\n    console.log(\"game.initialize not defined\");\n  },\n\n  get initialize() {\n    return this._initialize;\n  },\n\n  set initialize(fn) {\n    this._initialize = (loadedGameData: any) => {\n      console.log(\"Initializing Game\");\n      this.isInitialized = true;\n      fn(loadedGameData);\n    };\n  },\n\n  // initializeGameData\n  _initializeGameData: () => {\n    console.log(\"game.initializeGameData not defined\");\n  },\n\n  get initializeGameData() {\n    return this._initializeGameData;\n  },\n\n  set initializeGameData(fn) {\n    this._initializeGameData = () => {\n      console.log(\"Initializing Game Data\");\n      this.isInitialized = true;\n      fn();\n    };\n  },\n\n  // tick\n  _tick: () => {\n    console.log(\"game.tick not defined\");\n  },\n\n  get tick() {\n    return this._tick;\n  },\n\n  set tick(fn) {\n    this._tick = () => {\n      if (game.running || store.state.localSettings.flags.tickWhileEditing) {\n        fn();\n      }\n    };\n  },\n\n  // update\n  update: () => {\n    console.log(\"game.update not defined\");\n  },\n\n  setUpdateUIFunction: (fn: any) => {\n    game.update = fn;\n  },\n};\n\nlet currentTimeout: any = null;\n\n// Tick\nfunction tick() {\n  currentTimeout = setTimeout(() => {\n    try {\n      game.tick();\n    } catch (err) {\n      console.error(err);\n    }\n    tick();\n  }, game.settings.tickInterval);\n}\n\nexport function executeCode() {\n  const files: any = data.gameData.codeFiles;\n\n  let finalCode = \"\";\n  for (const file of files) {\n    finalCode += file.code + \"\\n\\n\";\n  }\n\n  const lines = finalCode.split(\"\\n\");\n  const numberWidth = Math.floor(Math.log(lines.length));\n\n  console.log(\n    lines\n      .map((line, index) => {\n        const numberedLine = `${(index + 1)\n          .toString()\n          .padEnd(numberWidth)} ${line}`;\n        return numberedLine;\n      })\n      .join(\"\\n\")\n  );\n\n  try {\n    // Stop anything currently executing\n    if (currentTimeout) {\n      clearTimeout(currentTimeout);\n    }\n\n    // eslint-disable-next-line no-eval\n    eval(finalCode);\n\n    let loadedGameData = dataStorage.get(\"savedGameData\", {});\n\n    console.log(\"loadedGameData\", loadedGameData);\n\n    if (!game.isInitialized) {\n      game.initialize(loadedGameData);\n    }\n\n    game.configure(game.settings);\n\n    tick();\n  } catch (err) {\n    err.message = \"GAME SCRIPT ERROR: \" + err.message;\n    console.error(err);\n  }\n}\n\nsetInterval(() => {\n  dataStorage.set(\"savedGameData\", game.data);\n}, 5000);\n\n(window as any).game = game;\n","export const data = {\n  gameData: null as any,\n  customComponents: [] as any[],\n};\n","class DataStorage {\n  get(key: string, defaultValue?: any) {\n    return localStorage[key] ? JSON.parse(localStorage[key]) : defaultValue;\n  }\n\n  set(key: string, value: any) {\n    localStorage[key] = JSON.stringify(value);\n  }\n\n  delete(key: string) {\n    delete localStorage[key];\n  }\n}\n\nexport const dataStorage = new DataStorage();\n","// Mutate console for better logging\n\nconst LogLevels = {\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4,\n};\n\nconst c = console as any;\nconst co = { ...console };\n\nc.logLevels = LogLevels;\nc.logLevel = LogLevels.DEBUG;\n\nc.debug = (...args: any) => {\n  if (c.logLevel <= LogLevels.DEBUG) {\n    co.debug(\"DEBUG\", ...args);\n  }\n};\n\nc.info = (...args: any) => {\n  if (c.logLevel <= LogLevels.INFO) {\n    co.info(\"INFO\", ...args);\n  }\n};\n\nc.warn = (...args: any) => {\n  if (c.logLevel <= LogLevels.WARN) {\n    co.warn(\"WARN\", ...args);\n  }\n};\n\nc.error = (...args: any) => {\n  if (c.logLevel <= LogLevels.ERROR) {\n    co.error(\"ERROR\", ...args);\n  }\n};\n\nexport default console;\n","const main = `\n\n// You may wish to move each of the following to its own file\n\ngame.configure = (settings) => {\n  // Update any game settings here\n  // settings.tickInterval = 5000\n}\n\ngame.initialize = (loadedGameData) => {\n  // Code executed when the application starts up\n  game.data = new GameData(loadedGameData);\n}\n\ngame.initializeGameData = () => {\n  // Code executed when the resetting the game data\n  game.data = new GameData({});\n  game.update();\n}\n\ngame.tick = () => {\n  // The main function to handle game logic\n};\n\n// Define actions using game.actions ...\n// Define conditionals using game.conditionals ...\n\ngame.actions.buttonClick = () => {\n  game.data.counter++;\n  game.update();\n}\n`;\n\nconst gameData = `\n\nclass GameData {\n  constructor(data) {\n    this._updateData(data);\n\n    // Set the data\n    for (const property in data) {\n      this[property] = data[property];\n    }\n  }\n\n  _updateData() {\n    // Use this to update game data as changes are made\n    if (!this.counter) {\n      this.counter = 0;\n    }\n  }\n\n  // Can use getters as well for use with variableText\n}\n`;\n\nexport const initialCode = {\n  main,\n  gameData,\n};\n","import { store } from \"./context\";\nimport { dataStorage } from \"./dataStorage\";\n\nexport function loadLocalSettings() {\n  const storedLocalSettings = dataStorage.get(\"localSettings\", undefined);\n\n  // Apply the stored settings or just use the defaults\n  if (storedLocalSettings) {\n    console.log(\"storedLocalSettings\", storedLocalSettings);\n    store.state.localSettings = Object.assign(\n      store.state.localSettings,\n      storedLocalSettings\n    );\n  }\n}\n\nexport function saveLocalSettings() {\n  dataStorage.set(\"localSettings\", store.state.localSettings);\n}\n","export const customStyles: {\n  [key: string]: any;\n} = {};\n","import { useEditor, useNode } from \"@craftjs/core\";\nimport { makeStyles, Theme } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport { Context, store } from \"../lib/context\";\n\nexport const useSharedStyles = makeStyles((theme: Theme) => ({\n  componentEditing: {\n    boxShadow: \"inset 0em 0em 0em 2px rgba(255, 50, 50, 1)\",\n    minHeight: \"5px\",\n    minWidth: \"5px\",\n    padding: \"10px!important\",\n  },\n  componentSelected: {\n    boxShadow: \"inset 0em 0em 0em 2px green\",\n  },\n}));\n\nfunction componentClass(\n  editing: boolean,\n  selected: boolean,\n  sharedClasses: any,\n  additonalClasses: string[] = []\n) {\n  return [\n    ...additonalClasses,\n    editing && store.state.localSettings.flags.highlightComponents\n      ? sharedClasses.componentEditing\n      : \"\",\n    selected ? sharedClasses.componentSelected : \"\",\n  ].join(\" \");\n}\n\ntype Properties = {\n  additionalClasses?: string[];\n};\n\nexport function useSetupComponent(properties: Properties = {}) {\n  const { additionalClasses = [] } = properties;\n\n  const store = useContext(Context);\n\n  const {\n    connectors: { connect, drag },\n    selected,\n  } = useNode((state: any) => ({\n    selected: state.events.selected,\n  }));\n\n  const { enabled } = useEditor((state: any) => ({\n    enabled: state.options.enabled,\n  }));\n\n  const sharedClasses = useSharedStyles();\n  const componentClassName = componentClass(\n    enabled,\n    selected,\n    sharedClasses,\n    additionalClasses\n  );\n\n  const refFn = (ref: any) => connect(drag(ref));\n\n  return {\n    refFn,\n    // connect,\n    // drag,\n    selected,\n    enabled,\n    // sharedClasses,\n    componentClassName,\n    store,\n  };\n}\n","class Documentation {\n  components: any = {};\n\n  addComponent(component: any) {\n    this.components[component.componentName] = {\n      componentName: component.componentName,\n      component,\n    };\n  }\n}\n\nexport const documentation = new Documentation();\n","import { useSetupComponent } from \"../config/useSetupComponent\";\nimport { documentation } from \"./documentation\";\n\nexport const components: any = {};\n\nexport function registerCustomComponent(Component: any) {\n  console.log(`Registering custom component ${Component.componentName}`);\n  components[Component.componentName] = Component;\n\n  documentation.addComponent(Component);\n}\n\n(window as any).registerCustomComponent = registerCustomComponent;\n\n(window as any).useSetupComponent = useSetupComponent;\n","import { store } from \"./context\";\nimport { customStyles } from \"../data/customStyles\";\nimport { data } from \"../data/data\";\nimport { components } from \"../data/components\";\nimport { dataStorage } from \"./dataStorage\";\n\nexport function saveGameData() {\n  const { editorQuery } = store;\n\n  if (!editorQuery) {\n    console.error(\"store.editorQuery not set\");\n    return;\n  }\n\n  console.debug(\"Saving game data\");\n\n  const baseStyles: any = {};\n\n  for (const componentName in components) {\n    // Kinda hacky but works\n    const component = (components as any)[componentName];\n\n    baseStyles[componentName] = component.baseStyle;\n  }\n\n  // Layout is a string\n  let layout = editorQuery.serialize();\n\n  // If this condition matches, then there was some error\n  if (layout === \"{}\") {\n    layout = null;\n  }\n\n  data.gameData = {\n    id: Math.random(),\n    layout,\n    baseStyles,\n    customStyles,\n    customComponents: data.customComponents,\n    codeFiles: data.gameData.codeFiles,\n  };\n\n  dataStorage.set(\"gameData\", data.gameData);\n}\n","import AceEditor from \"react-ace\";\nimport \"ace-builds/webpack-resolver\";\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-monokai\";\nimport beautify from \"ace-builds/src-noconflict/ext-beautify\";\n\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\nimport {\n  Divider,\n  Grid,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n  Switch as MUISwitch,\n  TextField,\n  Theme,\n} from \"@material-ui/core\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\nimport { data } from \"../data/data\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { Context, store } from \"../lib/context\";\nimport { executeCode, game } from \"../data/game\";\nimport { v4 as uuid } from \"uuid\";\nimport { initialCode } from \"../data/initial/code\";\nimport { saveLocalSettings } from \"../lib/localSettings\";\nimport { saveGameData } from \"../lib/saveGameData\";\n\n// let files: any[] = [];\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  fileName: {\n    fontSize: theme.typography.fontSize,\n  },\n}));\n\nexport function Code() {\n  const history = useHistory();\n  const classes = useStyles();\n  const [updateValue, update] = useState(false);\n  const [deletingFiles, setDeletingFiles] = useState(false);\n  const [selectedFiles, setSelectedFiles]: [any, any] = useState({});\n  useContext(Context);\n\n  let files = data.gameData.codeFiles;\n\n  function save() {\n    saveGameData();\n  }\n\n  function setFiles(newFiles: string[]) {\n    files = newFiles;\n    data.gameData.codeFiles = newFiles;\n  }\n\n  function handleFileClick(id: string, index: number) {\n    if (deletingFiles) {\n      const newSelectedFiles = { ...selectedFiles };\n      newSelectedFiles[index] = !newSelectedFiles[index];\n      setSelectedFiles(newSelectedFiles);\n      // update(!updateValue);\n    } else {\n      store.state.localSettings.lastCodeFile = id;\n      saveLocalSettings();\n      history.push(`/code/${id}`);\n    }\n  }\n\n  function deleteFiles() {\n    const newFiles = files.filter((item: any, index: number) => {\n      return !selectedFiles[index];\n    });\n\n    setFiles(newFiles);\n    setSelectedFiles({});\n  }\n\n  function addFile(name: string, code: string) {\n    files.push({\n      id: uuid(),\n      name,\n      code,\n    });\n  }\n\n  // Did mount / unmount\n  useEffect(() => {\n    const interval = setInterval(() => {\n      save();\n    }, 1000);\n\n    return () => {\n      // Update the code when navigating away\n      clearInterval(interval);\n      save();\n      executeCode();\n      game.initialize(game.data);\n    };\n  }, []);\n\n  if (files.length === 0) {\n    addFile(\"main\", \"//main\\n\" + initialCode.main);\n    addFile(\"gameData\", \"//gameData\\n\" + initialCode.gameData);\n  }\n\n  return (\n    <Grid\n      container\n      style={{\n        position: \"absolute\",\n        height: \"100%\",\n        width: \"100%\",\n      }}\n    >\n      <Grid item sm={2} style={{ position: \"relative\" }}>\n        <List\n          dense={true}\n          style={{\n            overflowY: \"auto\",\n            position: \"absolute\",\n            width: \"100%\",\n            top: \"0px\",\n            bottom: \"0px\",\n          }}\n        >\n          {files.map((file: any, index: number) => {\n            const selected = history.location.pathname.includes(file.id);\n\n            return (\n              <ListItem\n                key={file.id}\n                style={{ cursor: \"pointer\" }}\n                selected={selected}\n                onClick={() => {\n                  handleFileClick(file.id, index);\n                }}\n              >\n                {deletingFiles && (\n                  <ListItemIcon>\n                    {selectedFiles[index] ? (\n                      <CheckBoxIcon />\n                    ) : (\n                      <CheckBoxOutlineBlankIcon />\n                    )}\n                  </ListItemIcon>\n                )}\n                {selected ? (\n                  <ListItemText\n                    primary={\n                      <TextField\n                        value={file.name}\n                        onChange={(event) => {\n                          file.name = event.target.value;\n                          update(!updateValue);\n                        }}\n                        size=\"small\"\n                        inputProps={{ className: classes.fileName }}\n                      />\n                    }\n                  />\n                ) : (\n                  <ListItemText primary={file.name} />\n                )}\n              </ListItem>\n            );\n          })}\n          <Divider />\n          <ListItem\n            button\n            onClick={() => {\n              const name = `New File ${files.length}`;\n\n              addFile(name, `//${name}`);\n\n              update(!updateValue);\n            }}\n          >\n            <ListItemText primary=\"+ New File\" />\n          </ListItem>\n          <Divider />\n          <ListItem>\n            <ListItemText primary=\"Delete Files\" />\n            <MUISwitch\n              onChange={(event) => {\n                if (deletingFiles) {\n                  deleteFiles();\n                }\n\n                setDeletingFiles(event.target.checked);\n              }}\n              checked={deletingFiles}\n            />\n          </ListItem>\n          <ListItem>\n            <ListItemText primary=\"Beautify\" secondary=\"Ctrl + Shift + B\" />\n          </ListItem>\n        </List>\n      </Grid>\n      <Grid item sm={10} style={{ background: \"red\", position: \"relative\" }}>\n        <Switch>\n          {files.map((file: any) => {\n            return (\n              <Route\n                key={file.id}\n                path={`/code/${file.id}`}\n                render={() => {\n                  return (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        width: \"100%\",\n                        top: \"0px\",\n                        bottom: \"0px\",\n                      }}\n                    >\n                      <AceEditor\n                        mode=\"javascript\"\n                        theme=\"monokai\"\n                        onChange={(code: string) => {\n                          file.code = code;\n                        }}\n                        name=\"Code Editor\"\n                        editorProps={{ $blockScrolling: true }}\n                        style={{\n                          width: \"100%\",\n                          height: \"100%\",\n                          fontSize: \"1.1em\",\n                        }}\n                        value={file.code}\n                        tabSize={2}\n                        commands={beautify.commands}\n                        focus\n                      />\n                    </div>\n                  );\n                }}\n              />\n            );\n          })}\n          <Route path=\"/code\">\n            <Redirect to={`/code/${files[0].id}`} />\n          </Route>\n        </Switch>\n      </Grid>\n    </Grid>\n  );\n}\n","import { Breadcrumbs as MUIBreadcrumbs } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\nexport function Breadcrumbs({ parts }: any) {\n  let cumulativePath: any[] = [];\n\n  return (\n    <MUIBreadcrumbs aria-label=\"breadcrumb\">\n      {parts.map((part: any, index: number) => {\n        const [name, pathPart] = part;\n\n        if (pathPart) {\n          cumulativePath.push(pathPart);\n        }\n\n        // if (index < parts.length) {\n        return (\n          <Link\n            key={cumulativePath.join(\"\")}\n            to={`/${cumulativePath.join(\"/\")}`}\n          >\n            {name}\n          </Link>\n        );\n        // }\n\n        // return <Typography color=\"textPrimary\">{name}</Typography>;\n      })}\n    </MUIBreadcrumbs>\n  );\n}\n","import { documentation } from \"../../data/documentation\";\n\nexport function getComponents() {\n  const componentsDocs = Object.keys(documentation.components).map(\n    (componentName) => {\n      const component = documentation.components[componentName];\n\n      return `[${component.componentName}](/components/${component.componentName})`;\n    }\n  );\n\n  return componentsDocs;\n}\n\nexport default function components() {\n  return `\n# Components\n${getComponents().join(\"\\n\\n\")}\n`;\n}\n","export function link(text: string, path: string) {\n  return `[${text}](${path})`;\n}\n","import { Container, makeStyles, Paper } from \"@material-ui/core\";\nimport ReactMarkdown from \"react-markdown\";\nimport { BrowserRouter, Route, Switch, Link } from \"react-router-dom\";\nimport { documentation } from \"../../data/documentation\";\nimport { Breadcrumbs } from \"./Breadcrumbs\";\nimport index from \"./index-md\";\nimport components from \"./components-md\";\nimport game from \"./game-md\";\nimport customComponents from \"./customComponents-md\";\n\nconst renderers = {\n  link: (props: any) => {\n    return <Link to={props.href}>{props.children}</Link>;\n  },\n};\n\nconst useStyles = makeStyles(() => ({\n  paper: {\n    padding: \"1em\",\n  },\n}));\n\nexport function Documentation() {\n  const classes = useStyles();\n\n  console.log(\"Documentation render\");\n\n  return (\n    <Container>\n      <Paper className={classes.paper}>\n        <BrowserRouter basename=\"/idling-engine/documentation\">\n          <div className=\"markdown-container\">\n            <Switch>\n              {/*Components*/}\n              <Route\n                path=\"/components/:componentName\"\n                render={(history) => {\n                  const { component } = documentation.components[\n                    history.match.params.componentName\n                  ];\n\n                  return (\n                    <>\n                      <Breadcrumbs\n                        parts={[\n                          [\"Documentation\", \"\"],\n                          [\"Components\", \"components\"],\n                          [component.componentName, component.componentName],\n                        ]}\n                      />\n                      <ReactMarkdown\n                        plugins={[]}\n                        children={component.documentation.md}\n                        renderers={renderers}\n                      />\n                    </>\n                  );\n                }}\n              />\n              <Route\n                path=\"/components\"\n                render={() => (\n                  <>\n                    <Breadcrumbs\n                      parts={[\n                        [\"Documentation\", \"\"],\n                        [\"Components\", \"components\"],\n                      ]}\n                    />\n                    <ReactMarkdown\n                      plugins={[]}\n                      children={components()}\n                      renderers={renderers}\n                    />\n                  </>\n                )}\n              />\n              {/* Game */}\n              <Route\n                path=\"/game\"\n                render={() => (\n                  <>\n                    <Breadcrumbs\n                      parts={[\n                        [\"Documentation\", \"\"],\n                        [\"Game\", \"game\"],\n                      ]}\n                    />\n                    <ReactMarkdown\n                      plugins={[]}\n                      children={game()}\n                      renderers={renderers}\n                    />\n                  </>\n                )}\n              />\n              {/* Custom Components */}\n              <Route\n                path=\"/customComponents\"\n                render={() => (\n                  <>\n                    <Breadcrumbs\n                      parts={[\n                        [\"Documentation\", \"\"],\n                        [\"Custom Components\", \"customComponents\"],\n                      ]}\n                    />\n                    <ReactMarkdown\n                      plugins={[]}\n                      children={customComponents()}\n                      renderers={renderers}\n                    />\n                  </>\n                )}\n              />\n              {/*Index*/}\n              <Route\n                path=\"/\"\n                render={() => (\n                  <>\n                    <Breadcrumbs parts={[[\"Documentation\", \"\"]]} />\n                    <ReactMarkdown\n                      plugins={[]}\n                      children={index()}\n                      renderers={renderers}\n                    />\n                  </>\n                )}\n              />\n            </Switch>\n          </div>\n        </BrowserRouter>\n      </Paper>\n    </Container>\n  );\n}\n","export default function components() {\n  return `\n# Game\ngame stuff\n`;\n}\n","export default function components() {\n  return `\n# Custom Components\n...how to implement\n`;\n}\n","import { getComponents } from \"./components-md\";\nimport { link } from \"./templates/link\";\n\nexport default function index() {\n  return `\n# Idling Engine\n\n## Game Config/Code\n\nThis section details the properties of the game object and their configuration.\n\n${link(\"More >\", \"/game\")}\n\n## Custom Components\n\nIf you are daring enough, this section explains how to implment your own custom components.\n\n${link(\"More >\", \"/customComponents\")}\n\n## Components\n${getComponents().join(\"\\n\\n\")}\n  `;\n}\n","export const CustomRepeatSetting = ({ component, items }: any) => {\n  return items.map((item: any, index: number) => {\n    return component(item, index);\n  });\n};\n","import { FormControl, InputLabel, MenuItem, Select } from \"@material-ui/core\";\n\nexport const Dropdown = ({ value, items, label, onChange }: any) => {\n  const itemElements = [];\n\n  for (const item of items) {\n    let name = \"\";\n    let value = null;\n\n    if (typeof item === \"string\") {\n      name = item;\n      value = item;\n    } else {\n      name = item.name;\n      value = item.value;\n    }\n\n    itemElements.push(\n      <MenuItem key={name} value={value}>\n        {name}\n      </MenuItem>\n    );\n  }\n\n  let labelElement = null;\n  if (label) {\n    labelElement = <InputLabel shrink>{label}</InputLabel>;\n  }\n\n  return (\n    <FormControl fullWidth>\n      {labelElement}\n      <Select value={value || \"\"} onChange={onChange}>\n        {itemElements}\n      </Select>\n    </FormControl>\n  );\n};\n","import { Box, IconButton } from \"@material-ui/core\";\nimport { Dropdown } from \"../Controls/Dropdown\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\n\ninterface Props {\n  property: any;\n  value: any;\n  itemsFn: () => { name: string; value: any }[];\n  setProp: any;\n}\n\nexport const DropdownSetting = ({\n  property,\n  value,\n  itemsFn,\n  setProp,\n}: Props) => {\n  return (\n    <Box display=\"flex\" alignItems=\"flex-end\">\n      <Box flexGrow={1}>\n        <Dropdown\n          value={value || \"\"}\n          items={itemsFn()}\n          onChange={(event: any) => {\n            setProp((props: any) => (props[property] = event.target.value));\n          }}\n        />\n      </Box>\n      <Box>\n        <IconButton\n          size=\"small\"\n          onClick={() => {\n            setProp((props: any) => (props[property] = null));\n          }}\n        >\n          <ClearIcon />\n        </IconButton>\n      </Box>\n    </Box>\n  );\n};\n","import { TextField } from \"@material-ui/core\";\n\nexport const StringSetting = ({ property, value, setProp }: any) => {\n  return (\n    <TextField\n      fullWidth\n      value={value || \"\"}\n      onChange={(event: any) => {\n        setProp((props: any) => {\n          props[property] = event.target.value;\n        });\n      }}\n    />\n  );\n};\n","import { customStyles } from \"../data/customStyles\";\nimport { store } from \"../lib/context\";\nimport { saveLocalSettings } from \"../lib/localSettings\";\n\nexport function openStyleDrawer(options: any = {}) {\n  store.state.localSettings.flags.styleDrawerOpen = true;\n  store.state.localSettings.flags.previousHighlightComponents =\n    store.state.localSettings.flags.highlightComponents;\n  store.state.localSettings.flags.highlightComponents = false;\n\n  if (options.componentName) {\n    store.state.localSettings.styleDrawerComponentName = options.componentName;\n    store.state.localSettings.styleDrawerStyleId = options.styleId || \"\";\n\n    customStyles[options.componentName] =\n      customStyles[options.componentName] || {};\n  }\n\n  saveLocalSettings();\n\n  store.update();\n}\n\nexport function closeStyleDrawer() {\n  store.state.localSettings.flags.styleDrawerOpen = false;\n  store.state.localSettings.flags.highlightComponents =\n    store.state.localSettings.flags.previousHighlightComponents;\n\n  saveLocalSettings();\n\n  store.update();\n}\n","import { Box, Button, IconButton } from \"@material-ui/core\";\nimport { customStyles } from \"../../data/customStyles\";\nimport { Dropdown } from \"../Controls/Dropdown\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport { openStyleDrawer } from \"../../actions/styleDrawer\";\n\ninterface Props {\n  property: any;\n  value: any;\n  componentName: string;\n  setProp: any;\n}\n\nexport const StyleSetting = ({\n  property,\n  value,\n  componentName,\n  setProp,\n}: Props) => {\n  if (\n    !customStyles[componentName] ||\n    Object.keys(customStyles[componentName]).length === 0\n  ) {\n    return (\n      <Button\n        fullWidth\n        variant=\"contained\"\n        onClick={() => {\n          openStyleDrawer({\n            componentName,\n          });\n        }}\n      >\n        Define a Style\n      </Button>\n    );\n  }\n\n  return (\n    <Box display=\"flex\" alignItems=\"flex-end\">\n      <Box flexGrow={1}>\n        <Dropdown\n          value={value || \"\"}\n          items={Object.keys(customStyles[componentName]).map((id) => ({\n            value: id,\n            name: customStyles[componentName][id].styleName,\n          }))}\n          onChange={(event: any) => {\n            setProp((props: any) => (props[property] = event.target.value));\n          }}\n        />\n      </Box>\n      <Box>\n        <IconButton\n          size=\"small\"\n          onClick={() => {\n            setProp((props: any) => (props[property] = null));\n          }}\n        >\n          <ClearIcon />\n        </IconButton>\n      </Box>\n      <Box>\n        <IconButton\n          size=\"small\"\n          onClick={() => {\n            openStyleDrawer({\n              componentName,\n              styleId: value,\n            });\n          }}\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n    </Box>\n  );\n};\n","import {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n} from \"@material-ui/core\";\n\nexport { CustomRepeatSetting } from \"./CustomRepeatSetting\";\nexport { DropdownSetting } from \"./DropdownSetting\";\nexport { SliderSetting } from \"./SliderSetting\";\nexport { StringSetting } from \"./StringSetting\";\nexport { StyleSetting } from \"./StyleSetting\";\n\nexport const Settings = ({ config, properties, setProp }: any) => {\n  const settingsRows = [];\n\n  if (!properties) {\n    console.error(config, new Error());\n    return null;\n  }\n\n  for (const configItem of config) {\n    const { property, ...remainingProps } = configItem;\n    const value = properties[property];\n\n    settingsRows.push(\n      <TableRow key={property}>\n        <TableCell component=\"td\" scope=\"row\">\n          {property}\n        </TableCell>\n        <TableCell style={{ width: \"1em\" }} />\n        <TableCell>\n          <configItem.type\n            property={property}\n            value={value}\n            setProp={setProp}\n            {...remainingProps}\n          />\n        </TableCell>\n      </TableRow>\n    );\n  }\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" padding=\"none\">\n        <TableBody>{settingsRows}</TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n","import { EventConnectors } from \"@craftjs/core\";\nimport { components } from \"../../data/components\";\n\nexport const getToolboxComponents = (connectors: EventConnectors) => {\n  return [\n    ...Object.keys(components).reduce((acc: any[], componentName: any) => {\n      const component = components[componentName];\n\n      if (component.toolboxItem) {\n        acc.push(component.toolboxItem(connectors));\n      }\n\n      return acc;\n    }, []),\n  ];\n};\n","import { LocalSettingsFlags, store } from \"../lib/context\";\nimport { saveLocalSettings } from \"../lib/localSettings\";\n\nexport function toggleLocalSetting(settingProperty: keyof LocalSettingsFlags) {\n  store.state.localSettings.flags[settingProperty] = !store.state.localSettings\n    .flags[settingProperty];\n\n  saveLocalSettings();\n\n  store.update();\n}\n","import { useEditor } from \"@craftjs/core\";\nimport { store } from \"../../lib/context\";\nimport {\n  Box,\n  Typography,\n  Grid,\n  Button as MaterialButton,\n  Switch,\n  Chip,\n} from \"@material-ui/core\";\n\nimport { useState } from \"react\";\nimport { Settings, StringSetting } from \"../Settings\";\nimport { saveLocalSettings } from \"../../lib/localSettings\";\nimport { getToolboxComponents } from \"./getToolboxComponents\";\nimport { toggleLocalSetting } from \"../../actions/localSettings\";\n\nexport const Toolbox = () => {\n  const { connectors, actions } = useEditor();\n\n  const [selectedComponent, setSelectedComponent] = useState<{\n    component: any;\n  } | null>(null);\n\n  return (\n    <>\n      <Box px={2} py={2}>\n        <Grid container direction=\"column\" spacing={1}>\n          <div>\n            <Typography>Drag to add</Typography>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n              }}\n            >\n              Highlight components\n              <Switch\n                checked={store.state.localSettings.flags.highlightComponents}\n                onChange={() => {\n                  toggleLocalSetting(\"highlightComponents\");\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n              }}\n            >\n              Tick while editing\n              <Switch\n                checked={store.state.localSettings.flags.tickWhileEditing}\n                onChange={() => {\n                  toggleLocalSetting(\"tickWhileEditing\");\n                }}\n              />\n            </div>\n          </div>\n          {getToolboxComponents(connectors).map((component) => {\n            return (\n              <Grid key={component.name} container direction=\"column\" item>\n                <MaterialButton\n                  ref={component.ref}\n                  variant=\"contained\"\n                  onClick={() => {\n                    actions.selectNode();\n                    setSelectedComponent({ component: component.component });\n                  }}\n                >\n                  {component.name}\n                </MaterialButton>\n              </Grid>\n            );\n          })}\n        </Grid>\n      </Box>\n      {selectedComponent ? (\n        <BaseProperties component={selectedComponent.component} />\n      ) : null}\n    </>\n  );\n};\n\nconst propertyConfigDefinitions: {\n  [key: string]: any;\n} = {\n  margin: {\n    property: \"margin\",\n    type: StringSetting,\n  },\n  padding: {\n    property: \"padding\",\n    type: StringSetting,\n  },\n  height: {\n    property: \"height\",\n    type: StringSetting,\n  },\n};\n\nconst BaseProperties = ({ component }: any) => {\n  const { baseStyle } = component;\n\n  if (!baseStyle) {\n    return null;\n  }\n\n  const config = [];\n  for (const property in baseStyle) {\n    const definition = propertyConfigDefinitions[property];\n\n    config.push(definition);\n  }\n\n  return (\n    <Box mt={2} px={2} py={2}>\n      <Grid container direction=\"column\" spacing={0}>\n        <Grid item>\n          <Box pb={2}>\n            <Grid container alignItems=\"center\">\n              <Grid item xs>\n                <Typography variant=\"subtitle1\">\n                  Base Component Config\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Chip\n                  size=\"small\"\n                  color=\"primary\"\n                  label={component.componentName}\n                />\n              </Grid>\n            </Grid>\n          </Box>\n        </Grid>\n\n        <Settings\n          config={config}\n          properties={baseStyle}\n          setProp={(callback: (props: any) => void) => {\n            const newProps = Object.assign({}, baseStyle);\n            callback(newProps);\n            component.baseStyle = newProps;\n            store.update();\n          }}\n        />\n      </Grid>\n    </Box>\n  );\n};\n","import React from \"react\";\nimport {\n  Box,\n  Chip,\n  Grid,\n  Typography,\n  Button as MaterialButton,\n} from \"@material-ui/core\";\nimport { useEditor } from \"@craftjs/core\";\n\nexport const SettingsPanel = () => {\n  const { actions, selected } = useEditor((state, query) => {\n    const currentNodeId = state.events.selected;\n    let selected;\n\n    if (currentNodeId) {\n      selected = {\n        id: currentNodeId,\n        name: state.nodes[currentNodeId].data.name,\n        settings:\n          state.nodes[currentNodeId].related &&\n          state.nodes[currentNodeId].related.settings,\n        isDeletable: query.node(currentNodeId).isDeletable(),\n      };\n    }\n\n    return {\n      selected,\n    };\n  });\n\n  return selected ? (\n    <Box mt={2} px={2} py={2}>\n      <Grid container direction=\"column\" spacing={0}>\n        <Grid item>\n          <Box pb={2}>\n            <Grid container alignItems=\"center\">\n              <Grid item xs>\n                <Typography variant=\"subtitle1\">Selected</Typography>\n              </Grid>\n              <Grid item>\n                <Chip size=\"small\" color=\"primary\" label={selected.name} />\n              </Grid>\n            </Grid>\n          </Box>\n        </Grid>\n        {selected.settings && React.createElement(selected.settings)}\n        {selected.isDeletable ? (\n          <MaterialButton\n            variant=\"contained\"\n            color=\"default\"\n            onClick={() => {\n              actions.delete(selected.id);\n            }}\n          >\n            Delete\n          </MaterialButton>\n        ) : null}\n      </Grid>\n    </Box>\n  ) : null;\n};\n","import { Switch } from \"@material-ui/core\";\n\nexport const SwitchSetting = ({ property, value, onChange }: any) => {\n  return <Switch checked={value || false} onChange={onChange} />;\n};\n","const md = `\n# AppBar\n\n## Properties\n\n\n`;\n\nexport const AppBarDocumentation = {\n  md,\n};\n","import { useNode } from \"@craftjs/core\";\nimport { Tab as MUITab, Tabs } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { game } from \"../../../data/game\";\n\ninterface Tab {\n  name: string;\n  default?: boolean;\n  path: RegExp;\n  to: string;\n  visibilitySource: string;\n}\n\ninterface Props {\n  path: string;\n  tabs: Tab[];\n  className?: string;\n}\n\nfunction getCurrentTab(path: string, tabs: Tab[]): [number, Tab | null] {\n  let defaultTab = null;\n\n  for (const index in tabs) {\n    const tab = tabs[index];\n\n    if (tab.default) {\n      defaultTab = tab;\n    }\n\n    if (path.match(tab.path)) {\n      return [parseInt(index), tab];\n    }\n  }\n\n  // Redirect at this point;\n  if (defaultTab) {\n    return [-1, defaultTab];\n  }\n\n  return [-1, null];\n}\n\nexport function ToolBarTabs({ path, tabs, className }: Props) {\n  const {\n    connectors: { connect },\n  } = useNode();\n  const history = useHistory();\n\n  const [currentTabIndex, tab] = getCurrentTab(path, tabs);\n\n  if (currentTabIndex === -1) {\n    if (tab) {\n      history.push(tab.to);\n    }\n\n    return null;\n  }\n\n  return (\n    <Tabs\n      ref={connect}\n      value={currentTabIndex}\n      onChange={(event, value) => {\n        const tab = tabs[value];\n        history.push(tab.to);\n      }}\n      className={className}\n    >\n      {tabs.map((tab: Tab) => {\n        if (tab.visibilitySource) {\n          if (!game.visibilitySources[tab.visibilitySource]()) {\n            return null;\n          }\n        }\n\n        return <MUITab key={tab.name} label={tab.name} className={className} />;\n      })}\n    </Tabs>\n  );\n}\n","import { useNode } from \"@craftjs/core\";\nimport {\n  AppBar as MUIAppBar,\n  Button,\n  makeStyles,\n  Theme,\n  Toolbar,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { registerCustomComponent } from \"../../../data/components\";\nimport { game } from \"../../../data/game\";\nimport { DropdownSetting, Settings, StringSetting } from \"../../Settings\";\nimport { SwitchSetting } from \"../../Settings/SwitchSetting\";\nimport { AppBarDocumentation } from \"./AppBarDocumentation\";\nimport { ToolBarTabs } from \"./ToolBarTabs\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n  fullHeight: {\n    ...theme.mixins.toolbar,\n  },\n}));\n\nexport function AppBar({ tabs }: any) {\n  const classes = useStyles();\n  const { refFn, componentClassName, store } = useSetupComponent({\n    additionalClasses: [classes.root],\n  });\n\n  const history = useHistory();\n\n  const [updateValue, update] = useState(true);\n\n  return (\n    <div\n      ref={refFn}\n      className={classes.root}\n      onClick={() => {\n        setTimeout(() => {\n          update(!updateValue);\n          store.update();\n        });\n      }}\n    >\n      <MUIAppBar position=\"static\" className={componentClassName}>\n        <Toolbar>\n          <ToolBarTabs\n            path={history.location.pathname}\n            tabs={tabs}\n            className={classes.fullHeight}\n          />\n          <div className={classes.spacer}></div>\n        </Toolbar>\n      </MUIAppBar>\n    </div>\n  );\n}\n\nconst AppBarSettings = () => {\n  const {\n    actions: { setProp },\n    triggerUpdate,\n    tabs,\n  } = useNode((node) => ({\n    props: node.data.props,\n    triggerUpdate: !!node.data.props.triggerUpdate,\n    tabs: node.data.props.tabs,\n  }));\n\n  const setDefault = (defaultTab: any) => {\n    for (const tab of tabs) {\n      tab.default = false;\n    }\n\n    defaultTab.default = true;\n\n    return setProp((props: any) => {\n      props.triggerUpdate = !triggerUpdate;\n    });\n  };\n\n  const visibilitySources = Object.keys(game.visibilitySources);\n\n  return (\n    <div>\n      {tabs.map((tab: any, index: number) => {\n        return (\n          <Settings\n            key={index}\n            config={[\n              {\n                type: StringSetting,\n                property: \"name\",\n              },\n              {\n                type: StringSetting,\n                property: \"path\",\n              },\n              {\n                type: StringSetting,\n                property: \"to\",\n              },\n              {\n                type: DropdownSetting,\n                property: \"visibilitySource\",\n                itemsFn: () => visibilitySources,\n              },\n              {\n                type: SwitchSetting,\n                property: \"default\",\n                onChange: () => setDefault(tab),\n              },\n            ]}\n            properties={tab}\n            setProp={(callback: any) => {\n              // Custom set prop function\n              // Call the callback with the tab as the \"props\" we want to update\n              callback(tab);\n\n              // Then call the actual setProp to trigger the update\n              setProp((props: any) => {\n                props.triggerUpdate = !triggerUpdate;\n              });\n            }}\n          />\n        );\n\n        // return (\n        //   <div key={index}>\n        //     <TextField\n        //       label=\"Name\"\n        //       value={tab.name}\n        //       onChange={(event) => updateTab(tab, \"name\", event.target.value)}\n        //     />\n        //     <TextField\n        //       label=\"Path\"\n        //       value={tab.path}\n        //       onChange={(event) => updateTab(tab, \"path\", event.target.value)}\n        //     />\n        //     <TextField\n        //       label=\"To\"\n        //       value={tab.to}\n        //       onChange={(event) => updateTab(tab, \"to\", event.target.value)}\n        //     />\n        //     <Switch\n        //       checked={tab.default || false}\n        //       onChange={() => setDefault(tab)}\n        //     />\n        //   </div>\n        // );\n      })}\n      <Button\n        onClick={() => {\n          tabs.push({ name: \"New Tab\", path: \"\", to: \"\" });\n          return setProp((props) => (props.triggerUpdate = !triggerUpdate));\n        }}\n      >\n        Add Tab\n      </Button>\n    </div>\n  );\n};\n\nAppBar.componentName = \"AppBar\";\n\nAppBar.craft = {\n  props: {\n    tabs: [\n      {\n        name: \"Tab 1\",\n        path: \"tab1\",\n        to: `/tab1`,\n        default: true,\n      },\n      {\n        name: \"Tab 2\",\n        path: \"tab2\",\n        to: `/tab2`,\n      },\n      {\n        name: \"Tab 3\",\n        path: \"tab3\",\n        to: `/tab3`,\n      },\n    ],\n  },\n  related: {\n    settings: AppBarSettings,\n  },\n};\n\nAppBar.documentation = AppBarDocumentation;\n\nAppBar.toolboxItem = (connectors: any) => {\n  return {\n    name: \"AppBar\",\n    component: AppBar,\n    ref: (ref: any) => connectors.create(ref, <AppBar />),\n  };\n};\n\nregisterCustomComponent(AppBar);\n","import { useState } from \"react\";\n\nexport function useCustomStyle(\n  base: any,\n  styleGroup: any,\n  customStyleName: string\n) {\n  const [style, setStyle] = useState(null as any);\n\n  let customStyle = null;\n  if (customStyleName) {\n    customStyle = styleGroup[customStyleName];\n  }\n\n  // console.log(\n  //   \"style && customStyle.customId !== style.customId\",\n  //   style && customStyle.customId !== style.customId\n  // );\n  // console.log(customStyle);\n\n  // Already have a style and the customId is different\n  // Don't have a style and we have a custom style\n  if (\n    (style && customStyle && customStyle.customId !== style.customId) ||\n    (!style && customStyle)\n  ) {\n    setStyle({\n      ...base,\n      ...customStyle,\n    });\n  }\n\n  // If the customStyle is reset\n  if (style && !customStyle) {\n    setStyle(null);\n  }\n\n  // Return the base style if nothing else\n  return style || base;\n}\n","const md = `\n# Button\n\n## Properties\n\n### onClickAction\nThis is an action made avaiable from \\`game.actions\\`. No parameters are passed to the action.\n`;\n\nexport const ButtonDocumentation = {\n  md,\n};\n","import { Button as MaterialButton } from \"@material-ui/core\";\nimport { store } from \"../../../lib/context\";\nimport { game } from \"../../../data/game\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { ButtonSettings } from \"./ButtonSettings\";\nimport { useCustomStyle } from \"../../../config/useCustomStyle\";\nimport { customStyles } from \"../../../data/customStyles\";\nimport { StringSetting } from \"../../Settings\";\nimport { ButtonDocumentation } from \"./ButtonDocumentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\n\nexport const Button = ({\n  size,\n  variant,\n  color,\n  text,\n  onClickAction,\n  actionContext,\n  customStyleName,\n}: any) => {\n  const { refFn, componentClassName } = useSetupComponent();\n\n  const style = useCustomStyle(\n    Button.baseStyle,\n    customStyles.Button,\n    customStyleName\n  );\n\n  return (\n    <MaterialButton\n      style={style}\n      ref={refFn}\n      className={componentClassName}\n      size={size}\n      variant={variant}\n      color={color}\n      onClick={() => {\n        const action = game.actions[onClickAction];\n\n        if (action) {\n          action(actionContext);\n          store.update();\n        }\n      }}\n    >\n      {text}\n    </MaterialButton>\n  );\n};\n\nButton.componentName = \"Button\";\n\nButton.craft = {\n  props: {\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    text: \"Button\",\n  },\n  related: {\n    settings: ButtonSettings,\n  },\n};\n\nButton.baseStyle = {\n  margin: \"0em\",\n};\n\nButton.styleProperties = [\n  {\n    property: \"padding\",\n    type: StringSetting,\n  },\n];\n\nButton.documentation = ButtonDocumentation;\n\nButton.toolboxItem = (connectors: any) => {\n  return {\n    name: \"Button\",\n    component: Button,\n    ref: (ref: any) => connectors.create(ref, <Button />),\n  };\n};\n\nregisterCustomComponent(Button);\n","import { useNode } from \"@craftjs/core\";\nimport { Settings, StyleSetting } from \"../../Settings\";\nimport { StringSetting } from \"../../Settings\";\nimport { game } from \"../../../data/game\";\nimport { DropdownSetting } from \"../../Settings/DropdownSetting\";\n\nexport const ButtonSettings = () => {\n  const {\n    actions: { setProp },\n    componentName,\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: StyleSetting,\n          property: \"customStyleName\",\n          componentName,\n        },\n        {\n          type: DropdownSetting,\n          property: \"onClickAction\",\n          itemsFn: () => Object.keys(game.actions),\n        },\n        {\n          type: StringSetting,\n          property: \"text\",\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n","import { useNode } from \"@craftjs/core\";\nimport { Settings, StringSetting, StyleSetting } from \"../../Settings\";\n\nexport const TextSettings = () => {\n  const {\n    actions: { setProp },\n    componentName,\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: StyleSetting,\n          property: \"customStyleName\",\n          componentName,\n        },\n        {\n          type: StringSetting,\n          property: \"text\",\n          componentName,\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n","const md = `\n# Text\n\n## Properties\n\n### text\nThe text to show\n\n`;\n\nexport const TextDocumentation = {\n  md,\n};\n","import { useCustomStyle } from \"../../../config/useCustomStyle\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { customStyles } from \"../../../data/customStyles\";\nimport { TextSettings } from \"./TextSettings\";\nimport { StringSetting } from \"../../Settings\";\nimport { TextDocumentation } from \"./TextDocumentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\n\nexport const Text = ({ text, customStyleName }: any) => {\n  const { refFn, componentClassName } = useSetupComponent();\n\n  const style = useCustomStyle(\n    Text.baseStyle,\n    customStyles.Text,\n    customStyleName\n  );\n\n  return (\n    <span ref={refFn} className={componentClassName} style={style}>\n      {text}\n    </span>\n  );\n};\n\nText.componentName = \"Text\";\n\nText.craft = {\n  props: {\n    text: \"Text\",\n  },\n  rules: {\n    canDrag: (node: any) => true,\n  },\n  related: {\n    settings: TextSettings,\n  },\n};\n\nText.baseStyle = {\n  margin: \"0em\",\n};\n\nText.styleProperties = [\n  {\n    property: \"fontSize\",\n    type: StringSetting,\n  },\n];\n\nText.documentation = TextDocumentation;\n\nText.toolboxItem = (connectors: any) => {\n  return {\n    name: \"Text\",\n    component: Text,\n    ref: (ref: any) => connectors.create(ref, <Text text=\"Some text\" />),\n  };\n};\n\nregisterCustomComponent(Text);\n","import { Text } from \"../Text\";\nimport { Button } from \"../Button\";\nimport { Element, useNode } from \"@craftjs/core\";\nimport { Card as MUICard, CardActions, CardContent } from \"@material-ui/core\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\n\nexport const CardTop = ({ children }: any) => {\n  const {\n    connectors: { connect },\n  } = useNode();\n\n  return (\n    <CardContent ref={connect} className=\"text-only\">\n      {children}\n    </CardContent>\n  );\n};\n\nCardTop.craft = {\n  rules: {\n    // Only accept Text\n    // canMoveIn: (incomingNode: any) => incomingNode.data.type === Text,\n  },\n};\n\nexport const CardBottom = ({ children }: any) => {\n  const {\n    connectors: { connect },\n  } = useNode();\n\n  return <CardActions ref={connect}>{children}</CardActions>;\n};\n\nCardBottom.craft = {\n  rules: {\n    // Only accept Buttons\n    canMoveIn: (incomingNode: any) => incomingNode.data.type === Button,\n  },\n};\n\nexport const Card = () => {\n  const { refFn, componentClassName } = useSetupComponent();\n\n  return (\n    <MUICard ref={refFn} className={componentClassName}>\n      <Element id=\"text\" is={CardTop} canvas>\n        <Text text=\"Title\" fontSize={20} />\n        <Text text=\"Subtitle\" fontSize={15} />\n      </Element>\n      <Element id=\"buttons\" is={CardBottom} canvas>\n        <Button size=\"small\" text=\"Learn more\" variant=\"outlined\">\n          Hi!\n        </Button>\n      </Element>\n    </MUICard>\n  );\n};\n","import { game } from \"../data/game\";\n\nexport function checkVisibility(visibilitySource: string, enabled: boolean) {\n  if (!visibilitySource) {\n    return {};\n  }\n\n  const extraStyle: any = {};\n\n  if (\n    game.visibilitySources[visibilitySource] &&\n    !game.visibilitySources[visibilitySource]()\n  ) {\n    if (enabled) {\n      extraStyle.opacity = \"0.25\";\n    } else {\n      return null;\n    }\n  }\n\n  return extraStyle;\n}\n","const md = `\n# Container\n\n## Properties\n\n\n`;\n\nexport const ContainerDocumentation = {\n  md,\n};\n","import { Element } from \"@craftjs/core\";\nimport { Container as MUIContainer } from \"@material-ui/core\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { registerCustomComponent } from \"../../../data/components\";\nimport { checkVisibility } from \"../../../lib/checkVisibility\";\nimport { Text } from \"../Text\";\nimport { ContainerDocumentation } from \"./ContainerDocumentation\";\nimport { ContainerSettings } from \"./ContainerSettings\";\n\nexport const Container = ({ children, visibilitySource }: any) => {\n  const { refFn, componentClassName, enabled } = useSetupComponent();\n\n  const extraStyle = checkVisibility(visibilitySource, enabled);\n\n  if (!extraStyle) {\n    return null;\n  }\n\n  return (\n    <MUIContainer\n      ref={refFn}\n      style={{ ...Container.baseStyle, ...extraStyle }}\n      className={componentClassName}\n    >\n      {children}\n    </MUIContainer>\n  );\n};\n\nContainer.componentName = \"Container\";\n\nContainer.craft = {\n  props: {\n    padding: \"0px\",\n  },\n  related: {\n    settings: ContainerSettings,\n  },\n};\n\nContainer.baseStyle = {\n  padding: \"0em\",\n};\n\nContainer.documentation = ContainerDocumentation;\n\nContainer.toolboxItem = (connectors: any) => {\n  return {\n    name: \"Container\",\n    component: Container,\n    ref: (ref: any) =>\n      connectors.create(\n        ref,\n        <Element is={Container} canvas>\n          <Text text=\"Container\" />\n        </Element>\n      ),\n  };\n};\n\nregisterCustomComponent(Container);\n","import { useNode } from \"@craftjs/core\";\nimport { Settings } from \"../../Settings\";\nimport { game } from \"../../../data/game\";\nimport { DropdownSetting } from \"../../Settings/DropdownSetting\";\n\nexport const ContainerSettings = () => {\n  const {\n    actions: { setProp },\n    props,\n  } = useNode((node) => ({\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: DropdownSetting,\n          property: \"visibilitySource\",\n          itemsFn: () => Object.keys(game.visibilitySources),\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n","import { useNode } from \"@craftjs/core\";\nimport { game } from \"../../../data/game\";\nimport { Settings, StyleSetting } from \"../../Settings\";\nimport { DropdownSetting } from \"../../Settings/DropdownSetting\";\n\nconst sizes = [\n  { name: \"3\", value: 3 },\n  { name: \"4\", value: 4 },\n  { name: \"6\", value: 6 },\n];\n\nexport const GridContainerSettings = () => {\n  const {\n    actions: { setProp },\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: DropdownSetting,\n          property: \"visibilitySource\",\n          itemsFn: () => Object.keys(game.visibilitySources),\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n\nexport const GridItemSettings = () => {\n  const {\n    actions: { setProp },\n    componentName,\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: StyleSetting,\n          property: \"customStyleName\",\n          componentName,\n        },\n        {\n          type: DropdownSetting,\n          property: \"size\",\n          itemsFn: () => sizes,\n        },\n        {\n          type: DropdownSetting,\n          property: \"visibilitySource\",\n          itemsFn: () => Object.keys(game.visibilitySources),\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n","const md = `\n# GridContainer\n\n## Properties\n\n\n\n`;\n\nexport const GridContainerDocumentation = {\n  md,\n};\n","const md = `\n# GridItem\n\n## Properties\n\n\n\n`;\n\nexport const GridItemDocumentation = {\n  md,\n};\n","import { Grid, makeStyles, Paper } from \"@material-ui/core\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { GridContainerSettings, GridItemSettings } from \"./GridSettings\";\nimport { customStyles } from \"../../../data/customStyles\";\nimport { useCustomStyle } from \"../../../config/useCustomStyle\";\nimport { StringSetting } from \"../../Settings\";\nimport { checkVisibility } from \"../../../lib/checkVisibility\";\nimport { GridContainerDocumentation } from \"./GridContainerDocumentation\";\nimport { GridItemDocumentation } from \"./GridItemDocumentation\";\nimport { documentation } from \"../../../data/documentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\nimport { Element } from \"@craftjs/core\";\nimport { Text } from \"../Text\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1,\n  },\n}));\n\nexport const GridContainer = ({ children, visibilitySource }: any) => {\n  const classes = useStyles();\n  const { refFn, componentClassName, enabled } = useSetupComponent({\n    additionalClasses: [classes.root],\n  });\n\n  const extraStyle = checkVisibility(visibilitySource, enabled);\n\n  if (!extraStyle) {\n    return null;\n  }\n\n  return (\n    <Grid\n      container\n      ref={refFn}\n      className={componentClassName}\n      style={extraStyle}\n      spacing={2}\n    >\n      {children}\n    </Grid>\n  );\n};\n\nGridContainer.componentName = \"GridContiainer\";\n\nGridContainer.craft = {\n  props: {},\n  related: {\n    settings: GridContainerSettings,\n  },\n};\n\nexport const GridItem = ({\n  children,\n  size,\n  visibilitySource,\n  customStyleName,\n}: any) => {\n  const { refFn, componentClassName, enabled } = useSetupComponent();\n\n  const style = useCustomStyle(\n    GridItem.baseStyle,\n    customStyles.GridItem,\n    customStyleName\n  );\n\n  const extraStyle = checkVisibility(visibilitySource, enabled);\n\n  if (!extraStyle) {\n    return null;\n  }\n\n  return (\n    <Grid\n      item\n      xs={size}\n      ref={refFn}\n      className={componentClassName}\n      style={extraStyle}\n    >\n      <Paper style={style}>{children}</Paper>\n    </Grid>\n  );\n};\n\nGridItem.componentName = \"GridItem\";\n\nGridItem.craft = {\n  props: { size: 6 },\n  related: {\n    settings: GridItemSettings,\n  },\n};\n\nGridItem.baseStyle = {\n  padding: \"0em\",\n  height: \"100%\",\n};\n\nGridItem.styleProperties = [\n  {\n    property: \"padding\",\n    type: StringSetting,\n  },\n];\n\nGridContainer.documentation = GridContainerDocumentation;\nGridItem.documentation = GridItemDocumentation;\n\ndocumentation.addComponent(GridContainer);\ndocumentation.addComponent(GridItem);\n\nGridContainer.toolboxItem = (connectors: any) => {\n  return {\n    name: \"GridContainer\",\n    component: GridContainer,\n    ref: (ref: any) =>\n      connectors.create(\n        ref,\n        <Element is={GridContainer} canvas>\n          <Element is={GridItem} canvas>\n            <Text text=\"Grid Item\" />\n          </Element>\n          <Element is={GridItem} canvas>\n            <Text text=\"Grid Item\" />\n          </Element>\n        </Element>\n      ),\n  };\n};\n\nregisterCustomComponent(GridContainer);\n\nGridItem.toolboxItem = (connectors: any) => {\n  return {\n    name: \"GridItem\",\n    component: GridItem,\n    ref: (ref: any) =>\n      connectors.create(\n        ref,\n        <Element is={GridItem} canvas>\n          <Text text=\"Grid Item\" />\n        </Element>\n      ),\n  };\n};\n\nregisterCustomComponent(GridItem);\n","const md = `\n# PathContainer\n\n## Properties\n\n\n`;\n\nexport const PathContainerDocumentation = {\n  md,\n};\n","import {\n  Container as MUIContainer,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core\";\nimport { Element, useNode } from \"@craftjs/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { Settings, StyleSetting } from \"../../Settings\";\nimport { StringSetting } from \"../../Settings\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { useCustomStyle } from \"../../../config/useCustomStyle\";\nimport { customStyles } from \"../../../data/customStyles\";\nimport { PathContainerDocumentation } from \"./PathContainerDocumentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\n\nexport const useStyles = makeStyles((theme: Theme) => ({\n  main: {\n    padding: \"0em\",\n  },\n}));\n\nexport const PathContainer = ({ path, children, customStyleName }: any) => {\n  const history = useHistory();\n  const classes = useStyles();\n\n  const { refFn, enabled, componentClassName } = useSetupComponent({\n    additionalClasses: [classes.main],\n  });\n\n  const visible = history.location.pathname.includes(path);\n\n  const style = useCustomStyle(\n    PathContainer.baseStyle,\n    customStyles.PathContainer,\n    customStyleName\n  );\n\n  return (\n    <MUIContainer ref={refFn} className={componentClassName} style={style}>\n      {enabled && (\n        <div>\n          <div style={{ float: \"right\", height: \"0em\" }}>\n            {visible ? <VisibilityIcon /> : <VisibilityOffIcon />}\n          </div>\n          {path} : {history.location.pathname}\n        </div>\n      )}\n      {visible ? children : null}\n    </MUIContainer>\n  );\n};\n\nPathContainer.styleProperties = [\n  {\n    property: \"margin\",\n    type: StringSetting,\n  },\n];\n\nconst PathContainerSettings = () => {\n  const {\n    actions: { setProp },\n    componentName,\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: StyleSetting,\n          property: \"customStyleName\",\n          componentName,\n        },\n        {\n          type: StringSetting,\n          property: \"path\",\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n\nPathContainer.componentName = \"PathContainer\";\n\nPathContainer.craft = {\n  props: {\n    path: \"/tab1\",\n  },\n  related: {\n    settings: PathContainerSettings,\n  },\n};\n\nPathContainer.baseStyle = {\n  margin: \"0em\",\n};\n\nPathContainer.documentation = PathContainerDocumentation;\n\nPathContainer.toolboxItem = (connectors: any) => {\n  return {\n    name: \"PathContainer\",\n    component: PathContainer,\n    ref: (ref: any) =>\n      connectors.create(ref, <Element is={PathContainer} canvas />),\n  };\n};\n\nregisterCustomComponent(PathContainer);\n","const md = `\n# Table\n\n## Properties\n\n`;\n\nexport const TableDocumentation = {\n  md,\n};\n","import React from \"react\";\nimport { useNode } from \"@craftjs/core\";\nimport {\n  Table as MUITable,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n} from \"@material-ui/core\";\nimport { Settings } from \"../../Settings\";\nimport { CustomRepeatSetting } from \"../../Settings/CustomRepeatSetting\";\nimport { game } from \"../../../data/game\";\nimport { Button } from \"../Button\";\nimport { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { Dropdown } from \"../../Controls/Dropdown\";\nimport { DropdownSetting } from \"../../Settings/DropdownSetting\";\nimport { TableDocumentation } from \"./TableDocumentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\n\nconst TableRows = ({ items, columnNames }: any) => {\n  const rows = [];\n  const currentContext = {\n    item: {} as any,\n    index: \"0\",\n    column: {} as any,\n  };\n\n  try {\n    for (const itemIndex in items) {\n      const item = items[itemIndex];\n      const cells = [];\n\n      currentContext.item = item;\n\n      for (const index in columnNames) {\n        const column = columnNames[index];\n\n        currentContext.index = index;\n        currentContext.column = column;\n\n        const { name } = column;\n        const itemProperty = item[column.property];\n\n        switch (column.type) {\n          case \"string\":\n            if (typeof itemProperty !== \"string\") {\n              throw new Error(\"Trying to use a non-string value as a string\");\n            }\n\n            cells.push(<TableCell key={name}>{itemProperty}</TableCell>);\n            break;\n          case \"variableString\":\n            if (!itemProperty.data) {\n              throw new Error(\"No data function for a variableString\");\n            }\n\n            cells.push(<TableCell key={name}>{itemProperty.data()}</TableCell>);\n            break;\n          case \"button\":\n            if (!itemProperty.onClickAction) {\n              throw new Error(\"No onClickAcion function for a button\");\n            }\n\n            cells.push(\n              <TableCell key={name}>\n                <Button\n                  text={itemProperty.text}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClickAction={itemProperty.onClickAction}\n                  actionContext={item}\n                />\n              </TableCell>\n            );\n            break;\n        }\n      }\n\n      rows.push(<TableRow key={itemIndex}>{cells}</TableRow>);\n    }\n  } catch (err) {\n    return (\n      <TableBody>\n        <TableCell>\n          <div>Table Data Error! {err.message}</div>\n          <div>Column Index: {currentContext.index}</div>\n          <div>Column Type: {currentContext.column.type}</div>\n          <div>Item Data: {JSON.stringify(currentContext.item)}</div>\n        </TableCell>\n      </TableBody>\n    );\n  }\n\n  return <TableBody>{rows}</TableBody>;\n};\n\nexport const Table = ({ columnNames = [], itemSource }: any) => {\n  const { refFn, componentClassName } = useSetupComponent();\n\n  const headerRow = [];\n\n  for (const column of columnNames) {\n    headerRow.push(<TableCell key={column.name}>{column.name}</TableCell>);\n  }\n\n  const itemSourceFunction = game.dataSources[itemSource];\n\n  const items = itemSourceFunction ? itemSourceFunction() : [];\n\n  return (\n    <div ref={refFn} className={componentClassName}>\n      <TableContainer>\n        <MUITable size=\"small\">\n          <TableHead>\n            <TableRow>{headerRow}</TableRow>\n          </TableHead>\n          <TableRows items={items} columnNames={columnNames} />\n        </MUITable>\n      </TableContainer>\n    </div>\n  );\n};\n\nconst ColumnSetting = ({ item, update }: any) => {\n  return (\n    <div style={{ marginBottom: \"1em\" }}>\n      <TextField\n        fullWidth\n        value={item.name}\n        label=\"Name\"\n        onChange={(event: any) => {\n          item.name = event.target.value;\n          update();\n        }}\n      />\n      <TextField\n        fullWidth\n        value={item.property}\n        label=\"Property\"\n        onChange={(event: any) => {\n          item.property = event.target.value;\n          update();\n        }}\n      />\n      <Dropdown\n        value={item.type || \"\"}\n        items={[\n          { name: \"String\", value: \"string\" },\n          { name: \"Button\", value: \"button\" },\n          { name: \"Variable String\", value: \"variableString\" },\n        ]}\n        label=\"Type\"\n        onChange={(event: any) => {\n          item.type = event.target.value;\n          update();\n        }}\n      />\n    </div>\n  );\n};\n\nconst TableSettings = () => {\n  const {\n    actions: { setProp },\n    props,\n  } = useNode((node) => ({\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: DropdownSetting,\n          property: \"itemSource\",\n          itemsFn: () => Object.keys(game.dataSources),\n        },\n        {\n          type: CustomRepeatSetting,\n          property: \"columnNames\",\n          component: (item: any, index: number) => (\n            <ColumnSetting\n              key={index}\n              item={item}\n              update={() => {\n                setProp(\n                  (props: any) => (props.updateVarible = !props.updateVarible)\n                );\n              }}\n            />\n          ),\n          items: props.columnNames,\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n\nTable.componentName = \"Table\";\n\nTable.craft = {\n  props: {\n    columnNames: [\n      { name: \"Colum 1\", property: \"col1\", type: \"string\" },\n      { name: \"Colum 2\", property: \"col2\", type: \"string\" },\n      { name: \"Colum 3\", property: \"col3\", type: \"button\" },\n    ],\n    itemSource: \"\",\n    updateVariable: false,\n  },\n  related: {\n    settings: TableSettings,\n  },\n};\n\nTable.documentation = TableDocumentation;\n\nTable.toolboxItem = (connectors: any) => {\n  return {\n    name: \"Table\",\n    component: Table,\n    ref: (ref: any) => connectors.create(ref, <Table />),\n  };\n};\n\nregisterCustomComponent(Table);\n","import { useNode } from \"@craftjs/core\";\nimport { Settings, StringSetting, StyleSetting } from \"../../Settings\";\n\nexport const VariableTextSettings = () => {\n  const {\n    actions: { setProp },\n    componentName,\n    props,\n  } = useNode((node) => ({\n    componentName: node.data.name,\n    props: node.data.props,\n  }));\n\n  return (\n    <Settings\n      config={[\n        {\n          type: StyleSetting,\n          property: \"customStyleName\",\n          componentName,\n        },\n        {\n          type: StringSetting,\n          property: \"dataProperty\",\n        },\n        {\n          type: StringSetting,\n          property: \"subProperty\",\n        },\n      ]}\n      properties={props}\n      setProp={setProp}\n    />\n  );\n};\n","const md = `\n# VariableText\n\n## Properties\n\n`;\n\nexport const VariableTextDocumentation = {\n  md,\n};\n","import { useSetupComponent } from \"../../../config/useSetupComponent\";\nimport { game } from \"../../../data/game\";\nimport { StringSetting } from \"../../Settings\";\nimport { customStyles } from \"../../../data/customStyles\";\nimport { useCustomStyle } from \"../../../config/useCustomStyle\";\nimport { VariableTextSettings } from \"./VariableTextSettings\";\nimport { VariableTextDocumentation } from \"./VariableTextDocumentation\";\nimport { registerCustomComponent } from \"../../../data/components\";\n\nexport const VariableText = ({\n  dataProperty,\n  subProperty,\n  customStyleName,\n}: any) => {\n  const { refFn, componentClassName } = useSetupComponent();\n\n  const style = useCustomStyle(\n    VariableText.baseStyle,\n    customStyles.VariableText,\n    customStyleName\n  );\n\n  let value = game.data[dataProperty];\n  if (value && subProperty) {\n    value = value[subProperty];\n  }\n\n  if (typeof value === \"object\") {\n    value = undefined;\n  }\n\n  return (\n    <span ref={refFn} className={componentClassName} style={style}>\n      {value ?? \"##NO VALUE##\"}\n    </span>\n  );\n};\n\nVariableText.componentName = \"VariableText\";\n\nVariableText.craft = {\n  props: {},\n  rules: {\n    canDrag: (node: any) => true,\n  },\n  related: {\n    settings: VariableTextSettings,\n  },\n};\n\nVariableText.baseStyle = {\n  margin: \"0em\",\n};\n\nVariableText.styleProperties = [\n  {\n    property: \"fontSize\",\n    type: StringSetting,\n  },\n];\n\nVariableText.documentation = VariableTextDocumentation;\n\nVariableText.toolboxItem = (connectors: any) => {\n  return {\n    name: \"VariableText\",\n    component: VariableText,\n    ref: (ref: any) => connectors.create(ref, <VariableText />),\n  };\n};\n\nregisterCustomComponent(VariableText);\n","import { useEffect } from \"react\";\nimport { saveGameData } from \"../../lib/saveGameData\";\n\nexport const AutoSave = () => {\n  // Did mount / unmount\n  useEffect(() => {\n    console.debug(\"Starting autosave\");\n\n    const interval = setInterval(() => {\n      saveGameData();\n    }, 2000);\n\n    return () => {\n      console.debug(\"Stopping autosave\");\n      clearInterval(interval);\n    };\n  }, []);\n\n  return null;\n};\n","import { makeStyles, Theme } from \"@material-ui/core\";\n\nexport const useSharedStyles = makeStyles((theme: Theme) => ({\n  gameArea: {\n    position: \"absolute\",\n    background: \"#eee\",\n    height: \"100%\",\n    width: \"100%\",\n    overflowY: \"auto\",\n  },\n}));\n","import { store } from \"../../lib/context\";\nimport { Toolbox } from \"../../components/Toolbox\";\nimport { SettingsPanel } from \"../../components/SettingsPanel\";\n\nimport { Container, Text } from \"../../components/CustomComponents\";\n\nimport { Editor, Frame, Element, useEditor } from \"@craftjs/core\";\nimport { AutoSave } from \"./AutoSave\";\nimport { components } from \"../../data/components\";\nimport { HashRouter } from \"react-router-dom\";\nimport { data } from \"../../data/data\";\nimport { saveGameData } from \"../../lib/saveGameData\";\nimport { useEffect } from \"react\";\nimport { useSharedStyles } from \"../../styles/shared\";\nimport { game } from \"../../data/game\";\n\nfunction Content() {\n  const { query } = useEditor();\n  const classes = useSharedStyles();\n\n  useEffect(() => {\n    game.running = false;\n\n    return () => {\n      saveGameData();\n    };\n  }, []);\n\n  // Setting the editor query data here so that it can be used elsewhere,\n  // including outside of the editor context\n  store.editorQuery = query;\n\n  return (\n    <>\n      <div style={{ position: \"absolute\", width: \"80%\", height: \"100%\" }}>\n        <div className={classes.gameArea}>\n          <HashRouter>\n            <Frame data={data.gameData.layout}>\n              {/*This is the default layout*/}\n              <Element is={Container} padding={5} canvas>\n                <Text\n                  text={\"Start dragging components in (and delete this one)\"}\n                />\n              </Element>\n            </Frame>\n          </HashRouter>\n        </div>\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          right: \"0%\",\n          width: \"20%\",\n          height: \"100%\",\n          overflowY: \"auto\",\n        }}\n      >\n        <Toolbox />\n        <SettingsPanel />\n      </div>\n    </>\n  );\n}\n\nexport function Edit() {\n  return (\n    <Editor resolver={components}>\n      <AutoSave />\n      <Content />\n    </Editor>\n  );\n}\n","import { Editor, Frame } from \"@craftjs/core\";\nimport { useEffect } from \"react\";\nimport { HashRouter, useHistory } from \"react-router-dom\";\nimport { components } from \"../data/components\";\nimport { data } from \"../data/data\";\nimport { game } from \"../data/game\";\nimport { useSharedStyles } from \"../styles/shared\";\n\nexport function Play() {\n  const history = useHistory();\n  const classes = useSharedStyles();\n\n  useEffect(() => {\n    game.running = true;\n\n    // If there is no game data, then switch to the editor\n    if (!data.gameData) {\n      console.error(new Error(\"No gameData routing to /edit\"));\n      history.push(\"/edit\");\n    }\n  }, [history]);\n\n  return (\n    <div className={classes.gameArea}>\n      <Editor resolver={components} enabled={false}>\n        <HashRouter>\n          <Frame data={data.gameData.layout}></Frame>\n        </HashRouter>\n      </Editor>\n    </div>\n  );\n}\n","import { AppBar, Button, Toolbar } from \"@material-ui/core\";\nimport { useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Context, store } from \"../lib/context\";\nimport { saveGameData } from \"../lib/saveGameData\";\nimport { openStyleDrawer } from \"../actions/styleDrawer\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nexport const Header = () => {\n  const history = useHistory();\n  const path = history.location.pathname;\n  const [updateValue, update] = useState(false);\n\n  useContext(Context);\n\n  function navigate(path: string) {\n    history.push(path);\n    update(!updateValue);\n  }\n\n  return (\n    <AppBar position=\"static\" color=\"transparent\">\n      <Toolbar>\n        <Button\n          onClick={() => {\n            store.state.optionsDrawerOpen = true;\n            store.update();\n          }}\n        >\n          <MenuIcon />\n        </Button>\n        <Button\n          onClick={() => {\n            navigate(\"/edit\");\n          }}\n          variant={path.includes(\"/edit\") ? \"contained\" : undefined}\n          color=\"primary\"\n        >\n          Edit\n        </Button>\n        <Button\n          onClick={() => {\n            let file = store.state.localSettings.lastCodeFile;\n\n            if (file) {\n              file = `/${file}`;\n            }\n\n            navigate(`/code${file}`);\n          }}\n          variant={path.includes(\"/code\") ? \"contained\" : undefined}\n          color=\"primary\"\n        >\n          Code\n        </Button>\n        <Button\n          onClick={() => {\n            openStyleDrawer();\n          }}\n        >\n          Styling\n        </Button>\n        <Button\n          onClick={() => {\n            saveGameData();\n            navigate(\"/play\");\n          }}\n          variant={path.includes(\"/play\") ? \"contained\" : undefined}\n          color=\"primary\"\n        >\n          Play\n        </Button>\n        <Button\n          onClick={() => {\n            navigate(\"/documentation\");\n          }}\n          variant={path.includes(\"/documentation\") ? \"contained\" : undefined}\n          color=\"primary\"\n        >\n          Documentation\n        </Button>\n      </Toolbar>\n    </AppBar>\n  );\n};\n","import { createMuiTheme } from \"@material-ui/core\";\nimport { blueGrey } from \"@material-ui/core/colors\";\n\nconst colors = {\n  primary: blueGrey[900],\n  secondary: blueGrey[100],\n};\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      // Purple and green play nicely together.\n      main: colors.primary,\n    },\n    secondary: {\n      // This is green.A700 as hex.\n      main: colors.secondary,\n    },\n  },\n  overrides: {\n    MuiSwitch: {\n      switchBase: {\n        // Controls default (unchecked) color for the thumb\n        color: colors.secondary,\n      },\n      colorSecondary: {\n        \"&$checked\": {\n          // Controls checked color for the thumb\n          color: colors.primary,\n        },\n      },\n      track: {\n        // Controls default (unchecked) color for the track\n        opacity: 0.2,\n        backgroundColor: colors.primary,\n        \"$checked$checked + &\": {\n          // Controls checked color for the track\n          opacity: 0.5,\n          backgroundColor: colors.primary,\n        },\n      },\n    },\n  },\n});\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { dataStorage } from \"../../lib/dataStorage\";\n\nexport const ImportExportDialog = ({ onClose }: any) => {\n  const currentAllGameData = {\n    gameData: dataStorage.get(\"gameData\"),\n  };\n\n  const [allGameData, setAllGameData] = useState(\n    btoa(JSON.stringify(currentAllGameData))\n  );\n\n  return (\n    <Dialog open={true} onClose={onClose}>\n      <DialogTitle>Import or export game data</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Copy and paste the existing data somewhere to save it. Or paste in\n          data you have and import it.\n        </DialogContentText>\n        <TextField\n          fullWidth\n          label=\"Current Game Data\"\n          multiline\n          rows={4}\n          value={allGameData}\n          onChange={(event) => {\n            setAllGameData(event.target.value);\n          }}\n          variant=\"filled\"\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            const data = JSON.parse(atob(allGameData));\n            console.debug(\"Imported game data\", JSON.stringify(data, null, 2));\n            dataStorage.set(\"gameData\", data.gameData);\n            window.location.reload();\n          }}\n          color=\"primary\"\n        >\n          Import\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { dataStorage } from \"../../lib/dataStorage\";\n\nexport const ConfirmResetDialog = ({ onClose }: any) => {\n  return (\n    <Dialog open={true} onClose={onClose}>\n      <DialogTitle>Reset Game Configuration</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to reset the curret game data?\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\" variant=\"contained\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            dataStorage.delete(\"gameData\");\n            window.location.reload();\n          }}\n          color=\"primary\"\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { useState } from \"react\";\n\nexport function useUpdate() {\n  const [updateValue, update] = useState(false);\n\n  return () => update(!updateValue);\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  TextField,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  IconButton,\n  TableHead,\n} from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport HelpOutlinedIcon from \"@material-ui/icons/HelpOutlined\";\nimport ErrorIcon from \"@material-ui/icons/Error\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nimport { useUpdate } from \"../../config/useUpdate\";\nimport { data } from \"../../data/data\";\nimport { saveGameData } from \"../../lib/saveGameData\";\n\nfunction CustomComponent({ component, components, update }: any) {\n  let icon = null;\n\n  if (component.status === \"Checking\") {\n    icon = <HelpOutlinedIcon />;\n  } else if (component.ok) {\n    icon = <CheckCircleIcon style={{ color: \"green\" }} />;\n  } else {\n    icon = <ErrorIcon style={{ color: \"red\" }} />;\n  }\n\n  return (\n    <TableRow>\n      <TableCell>\n        <IconButton\n          onClick={() => {\n            const index = components.indexOf(component);\n            components.splice(index, 1);\n            update();\n          }}\n        >\n          <DeleteIcon />\n        </IconButton>\n      </TableCell>\n      <TableCell>{component.url}</TableCell>\n      <TableCell>{icon}</TableCell>\n      <TableCell>{component.status}</TableCell>\n    </TableRow>\n  );\n}\n\nexport const CustomComponentsDialog = ({ onClose }: any) => {\n  const update = useUpdate();\n  const [newComponentUrl, setNewComponentUrl] = useState(\"\");\n\n  function checkComponent(component: any) {\n    component.status = \"Checking\";\n\n    return new Promise(async function (accept: any) {\n      try {\n        const result = await axios.get(component.url);\n\n        console.log(result.status);\n        if (result.status === 200) {\n          component.status = \"Ok\";\n          component.ok = true;\n        }\n      } catch (err) {\n        component.status = `Failed (${err.response.status})`;\n        component.ok = false;\n      }\n\n      accept();\n    });\n  }\n\n  async function checkComponentUrls() {\n    const requests = data.customComponents.map((component) => {\n      return checkComponent(component);\n    });\n\n    update();\n\n    await Promise.all(requests);\n\n    update();\n  }\n\n  return (\n    <Dialog open={true} onClose={onClose}>\n      <DialogTitle>Custom Components</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Add custom components to your game.\n        </DialogContentText>\n        <TableContainer>\n          <Table size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell></TableCell>\n                <TableCell>URL</TableCell>\n                <TableCell></TableCell>\n                <TableCell>Status</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {data.customComponents.map((component) => {\n                return (\n                  <CustomComponent\n                    component={component}\n                    components={data.customComponents}\n                    update={update}\n                  />\n                );\n              })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        <br />\n\n        <TextField\n          value={newComponentUrl}\n          onChange={(event: any) => {\n            setNewComponentUrl(event.target.value);\n          }}\n        />\n        <Button\n          onClick={() => {\n            const component = {\n              url: newComponentUrl,\n              status: \"New\",\n            };\n\n            data.customComponents.push(component);\n\n            checkComponent(component);\n\n            setNewComponentUrl(\"\");\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Add Component\n        </Button>\n        <Button\n          onClick={checkComponentUrls}\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Check Components\n        </Button>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            onClose();\n          }}\n          color=\"primary\"\n        >\n          Done\n        </Button>\n        <Button\n          onClick={() => {\n            saveGameData();\n            window.location.reload();\n          }}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          Save And Reload\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import {\n  Divider,\n  Drawer,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport LoopIcon from \"@material-ui/icons/Loop\";\nimport ImportExportIcon from \"@material-ui/icons/ImportExport\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport packageJson from \"../../../package.json\";\nimport { store } from \"../../lib/context\";\nimport { useState } from \"react\";\nimport { ImportExportDialog } from \"./ImportExportDialog\";\nimport { ConfirmResetDialog } from \"./ConfirmResetDialog\";\nimport { CustomComponentsDialog } from \"./CustomComponentsDialog\";\nimport { game } from \"../../data/game\";\n\nexport const OptionsDrawer = () => {\n  const [showImportExprt, setShowImportExport] = useState(false);\n  const [showConfirmReset, setShowConfirmReset] = useState(false);\n  const [showCustomComponents, setShowCustomComponents] = useState(false);\n\n  return (\n    <div>\n      <Drawer\n        open={store.state.optionsDrawerOpen}\n        onClose={() => {\n          store.state.optionsDrawerOpen = false;\n          store.update();\n        }}\n      >\n        <List>\n          {/* Initialize Game Data */}\n          <ListItem\n            button\n            onClick={() => {\n              game.initializeGameData();\n            }}\n          >\n            <ListItemIcon>\n              <LoopIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Initialize Game Data\" />\n          </ListItem>\n          {/* Reset Game Configuration */}\n          <ListItem\n            button\n            onClick={() => {\n              setShowConfirmReset(true);\n            }}\n          >\n            <ListItemIcon>\n              <LoopIcon />\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Reset Game Configuration\"\n              secondary=\"Reset all game configuration\"\n            />\n          </ListItem>\n          {/* Import / Export */}\n          <ListItem\n            button\n            onClick={() => {\n              setShowImportExport(true);\n            }}\n          >\n            <ListItemIcon>\n              <ImportExportIcon />\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Import / Export\"\n              secondary=\"Import or export your game data\"\n            />\n          </ListItem>\n          {/* Custom Components */}\n          <ListItem\n            button\n            onClick={() => {\n              setShowCustomComponents(true);\n            }}\n          >\n            <ListItemIcon>\n              <AppsIcon />\n            </ListItemIcon>\n            <ListItemText\n              primary=\"Custom Components\"\n              secondary=\"Custom components for your game\"\n            />\n          </ListItem>\n          <Divider />\n          {/* Version */}\n          <ListItem onClick={() => {}}>\n            <ListItemText\n              primary=\"Idling Engine\"\n              secondary={`Version ${packageJson.version}`}\n            />\n          </ListItem>\n        </List>\n      </Drawer>\n\n      {showImportExprt && (\n        <ImportExportDialog onClose={() => setShowImportExport(false)} />\n      )}\n\n      {showConfirmReset && (\n        <ConfirmResetDialog onClose={() => setShowConfirmReset(false)} />\n      )}\n\n      {showCustomComponents && (\n        <CustomComponentsDialog\n          onClose={() => setShowCustomComponents(false)}\n        />\n      )}\n    </div>\n  );\n};\n","import { Box, Button, Drawer, Typography } from \"@material-ui/core\";\nimport { store } from \"../lib/context\";\nimport { Settings, StringSetting } from \"./Settings\";\nimport { customStyles } from \"../data/customStyles\";\nimport { Dropdown } from \"./Controls/Dropdown\";\nimport * as components from \"./CustomComponents\";\nimport { v4 as uuid } from \"uuid\";\nimport { closeStyleDrawer } from \"../actions/styleDrawer\";\nimport { useUpdate } from \"../config/useUpdate\";\n\nconst supportedComponents: any = {\n  [components.Button.name]: components.Button,\n  [components.PathContainer.name]: components.PathContainer,\n  [components.GridItem.name]: components.GridItem,\n  [components.Text.name]: components.Text,\n  [components.VariableText.name]: components.VariableText,\n};\n\nexport const StyleDrawer = () => {\n  const update = useUpdate();\n\n  let {\n    styleDrawerComponentName: selectedComponent,\n    styleDrawerStyleId: selectedStyle,\n  } = store.state.localSettings;\n\n  const updateSettings = (\n    styleDrawerComponentName: string,\n    styleDrawerStyleId: string\n  ) => {\n    store.state.localSettings.styleDrawerComponentName = styleDrawerComponentName;\n    store.state.localSettings.styleDrawerStyleId = styleDrawerStyleId;\n    update();\n  };\n\n  let component: any = null;\n  if (selectedComponent) {\n    component = customStyles[selectedComponent];\n  }\n\n  // The selectedStyle id doesn't actually exist\n  // Could be an artifact of the localSettings\n  if (!component || !component[selectedStyle]) {\n    selectedStyle = \"\";\n  }\n\n  return (\n    <div>\n      <Drawer\n        open={store.state.localSettings.flags.styleDrawerOpen}\n        onClose={() => {\n          closeStyleDrawer();\n        }}\n        anchor=\"right\"\n        BackdropProps={{ invisible: true }}\n      >\n        <div style={{ padding: \"1em\" }}>\n          <Typography variant=\"h4\">Style Components</Typography>\n          <Dropdown\n            value={selectedComponent}\n            items={Object.keys(supportedComponents)}\n            label=\"Component\"\n            onChange={(event: any) => {\n              customStyles[event.target.value] =\n                customStyles[event.target.value] || {};\n\n              updateSettings(event.target.value, \"\");\n              update();\n            }}\n          />\n          {component && (\n            <Box display=\"flex\" alignItems=\"flex-end\">\n              <Box flexGrow={1}>\n                <Dropdown\n                  value={selectedStyle}\n                  items={Object.keys(component).map((id) => ({\n                    value: id,\n                    name: component[id].styleName,\n                  }))}\n                  label=\"Styles\"\n                  onChange={(event: any) => {\n                    updateSettings(selectedComponent, event.target.value);\n                  }}\n                />\n              </Box>\n              <Box>\n                <Button\n                  onClick={(event) => {\n                    const id = uuid();\n\n                    component[id] = {\n                      styleName: `New Style ${\n                        Object.keys(component).length + 1\n                      }`,\n                    };\n\n                    updateSettings(selectedComponent, id);\n                  }}\n                  variant=\"contained\"\n                >\n                  Add Style\n                </Button>\n              </Box>\n            </Box>\n          )}\n\n          {component && selectedStyle && (\n            <>\n              <Settings\n                config={[\n                  {\n                    property: \"styleName\",\n                    type: StringSetting,\n                  },\n                  ...supportedComponents[selectedComponent].styleProperties,\n                ]}\n                properties={component[selectedStyle]}\n                setProp={(callback: (props: any) => void) => {\n                  // Important to assign it a new Id\n                  const newProps = Object.assign({}, component[selectedStyle], {\n                    customId: Math.random(),\n                  });\n                  callback(newProps);\n                  component[selectedStyle] = newProps;\n\n                  store.update();\n                }}\n              />\n              <Button\n                onClick={(event) => {\n                  const styleIds = Object.keys(component);\n                  const index = styleIds.indexOf(selectedStyle);\n\n                  let nextStyle = \"\";\n\n                  delete component[selectedStyle];\n\n                  if (index > 0) {\n                    nextStyle = styleIds[index - 1];\n                  } else if (styleIds.length) {\n                    nextStyle = styleIds[1];\n                  }\n\n                  updateSettings(selectedComponent, nextStyle);\n                }}\n                variant=\"contained\"\n              >\n                Delete Style\n              </Button>\n            </>\n          )}\n        </div>\n      </Drawer>\n    </div>\n  );\n};\n","import { customStyles } from \"../data/customStyles\";\nimport { data } from \"../data/data\";\nimport { components } from \"../data/components\";\nimport { dataStorage } from \"./dataStorage\";\n\nconst initialGameData = {\n  codeFiles: [],\n};\n\nfunction loadComponentProperties(baseStyles: any) {\n  for (const componentName in baseStyles) {\n    const component = components[componentName];\n    const baseStyle = baseStyles[componentName];\n\n    if (component && baseStyle) {\n      component.baseStyle = {\n        ...component.baseStyle,\n        ...baseStyle,\n      };\n    }\n  }\n}\n\nexport function loadGameData() {\n  try {\n    let storedGameData = dataStorage.get(\"gameData\");\n\n    if (storedGameData) {\n      if (storedGameData.baseStyles) {\n        loadComponentProperties(storedGameData.baseStyles);\n      }\n\n      if (storedGameData.customStyles) {\n        Object.assign(customStyles, storedGameData.customStyles);\n      }\n\n      data.gameData = storedGameData;\n      data.customComponents = storedGameData.customComponents || [];\n\n      return storedGameData;\n    }\n\n    console.warn(\"No game data loaded\");\n  } catch (err) {\n    console.error(err);\n  }\n\n  data.gameData = initialGameData;\n\n  return null;\n}\n","import { data } from \"../data/data\";\n\nexport async function loadCustomComponents() {\n  const loadingPromises = [];\n  const errors: any = {};\n\n  for (const customComponent of data.customComponents) {\n    if (!customComponent.url) {\n      continue;\n    }\n\n    const p = new Promise((resolve: any) => {\n      const s = document.createElement(\"script\");\n      s.type = \"text/javascript\";\n      s.src = customComponent.url;\n      s.onload = () => {\n        resolve();\n      };\n      s.onerror = (err) => {\n        console.log(err);\n        errors[customComponent.url] = err;\n        resolve();\n      };\n\n      document.head.append(s);\n    });\n\n    loadingPromises.push(p);\n  }\n\n  await Promise.all(loadingPromises);\n\n  console.log(errors);\n}\n","import React, { Component } from \"react\";\nimport \"./lib/log\";\nimport { Edit, Play, Code, Documentation } from \"./views\";\nimport { Context, store } from \"./lib/context\";\nimport { BrowserRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport { CssBaseline, ThemeProvider } from \"@material-ui/core\";\nimport { Header } from \"./components/Header\";\nimport { theme } from \"./styles/theme\";\nimport { game, executeCode } from \"./data/game\";\nimport { OptionsDrawer } from \"./components/OptionsDrawer\";\nimport { StyleDrawer } from \"./components/StyleDrawer\";\nimport { loadLocalSettings } from \"./lib/localSettings\";\nimport { loadGameData } from \"./lib/loadGameData\";\nimport { loadCustomComponents } from \"./lib/loadCustomComponents\";\n\nloadLocalSettings();\n\nexport default class App extends Component {\n  state = {\n    ready: false,\n  };\n\n  async componentDidMount() {\n    // This allows components to update the state\n    // without being tied to the context\n    store.update = this.update;\n\n    await loadCustomComponents();\n\n    // Load the game configuration\n    loadGameData();\n    game.setUpdateUIFunction(store.update);\n    executeCode();\n\n    this.setState({\n      ready: true,\n    });\n  }\n\n  update = () => {\n    // This causes the context provider to update\n    this.setState({});\n  };\n\n  render() {\n    if (!this.state.ready) {\n      return null;\n    }\n\n    return (\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Context.Provider\n          value={{\n            state: store.state,\n            update: this.update,\n            editorQuery: store.editorQuery,\n          }}\n        >\n          <BrowserRouter basename=\"/idling-engine\">\n            <div\n              style={{ position: \"absolute\", width: \"100%\", height: \"100%\" }}\n            >\n              <OptionsDrawer />\n              <StyleDrawer />\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  position: \"absolute\",\n                  width: \"100%\",\n                  height: \"100%\",\n                }}\n              >\n                <Header />\n                <div style={{ position: \"relative\", flexGrow: 1 }}>\n                  <Switch>\n                    <Route path=\"/edit\" render={() => <Edit />} />\n                    <Route path=\"/code\" render={() => <Code />} />\n                    <Route path=\"/play\" render={() => <Play />} />\n                    <Route\n                      path=\"/documentation\"\n                      render={() => <Documentation />}\n                    />\n                    <Route path=\"/\">\n                      <Redirect to=\"/edit\" />\n                    </Route>\n                  </Switch>\n                </div>\n              </div>\n            </div>\n          </BrowserRouter>\n        </Context.Provider>\n      </ThemeProvider>\n    );\n  }\n}\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./styles/style.css\";\n// import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","import React from \"react\";\n\nexport interface LocalSettingsFlags {\n  highlightComponents: boolean; // Highlight components and apply padding for easier selection\n  previousHighlightComponents: boolean; // The last state of the setting (used when opening the style editor)\n  styleDrawerOpen: boolean;\n  tickWhileEditing: boolean; // Whether or not to run game logic while editing the layout\n}\n\nexport interface LocalSettings {\n  flags: LocalSettingsFlags;\n  lastCodeFile: string; // The last file that was being edited in the code editor\n  styleDrawerComponentName: string;\n  styleDrawerStyleId: string;\n}\n\nexport const store = {\n  state: {\n    localSettings: {\n      flags: {\n        highlightComponents: true,\n        previousHighlightComponents: true,\n        styleDrawerOpen: false,\n        tickWhileEditing: false,\n      },\n      lastCodeFile: \"\",\n      styleDrawerComponentName: \"\",\n      styleDrawerStyleId: \"\",\n    } as LocalSettings,\n    optionsDrawerOpen: false,\n  },\n  editorQuery: null as any, // The object to be able to query the editor\n  update: (): void => {\n    throw new Error(\"Update function not defined\");\n  },\n};\n\nexport const Context = React.createContext(store);\n\n(window as any).store = store;\n"],"sourceRoot":""}